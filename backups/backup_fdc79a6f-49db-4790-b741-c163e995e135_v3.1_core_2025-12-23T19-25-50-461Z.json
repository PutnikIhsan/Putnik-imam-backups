{
  "version": "3.1",
  "created_at": "2025-12-23T19:25:50.459Z",
  "backup_id": "fdc79a6f-49db-4790-b741-c163e995e135",
  "backup_type": "core_backup",
  "backup_part": "core",
  "includes": {
    "database_data": true,
    "table_schemas": true,
    "rls_policies": true,
    "database_functions": true,
    "storage_manifest": false,
    "storage_files": false,
    "edge_functions_list": true,
    "migrations_list": true,
    "required_secrets": true
  },
  "database": {
    "tables": {
      "profiles": [
        {
          "id": "ee2950c5-4ff6-4533-80fa-14031142e36d",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "username": null,
          "full_name": "Putnik",
          "avatar_url": null,
          "phone": null,
          "telegram_id": null,
          "telegram_username": null,
          "created_at": "2025-12-17T17:11:03.22457+00:00",
          "updated_at": "2025-12-18T19:45:53.749233+00:00",
          "gender": "брат",
          "islam_level": "начальный",
          "madhab": "ханафитский",
          "location_mode": "выбрать",
          "location_country": "Россия",
          "location_city": "Москва"
        },
        {
          "id": "48c06195-c804-489f-8b40-884f8718e674",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "username": null,
          "full_name": null,
          "avatar_url": null,
          "phone": null,
          "telegram_id": null,
          "telegram_username": null,
          "created_at": "2025-12-18T13:40:08.549212+00:00",
          "updated_at": "2025-12-23T16:34:36.879926+00:00",
          "gender": "брат",
          "islam_level": "начальный",
          "madhab": "ханафитский",
          "location_mode": "выбрать",
          "location_country": "Россия",
          "location_city": "Москва"
        }
      ],
      "user_roles": [
        {
          "id": "0eb52b74-3e57-4264-87e8-2b57924f23ad",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "admin",
          "created_at": "2025-12-17T17:11:03.22457+00:00"
        },
        {
          "id": "697a1bd5-adea-4102-9c1c-f78b63b28883",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "created_at": "2025-12-18T13:40:08.549212+00:00"
        },
        {
          "id": "28876a04-4f37-4966-8cae-b964b3afcf66",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "admin",
          "created_at": "2025-12-20T16:24:07.886003+00:00"
        }
      ],
      "backup_settings": [
        {
          "id": "80773930-caf9-4450-a1e6-39fa8c7d5132",
          "auto_backup_enabled": true,
          "backup_schedule": "0 3 * * *",
          "retention_days": 30,
          "backup_type": "full",
          "notification_enabled": true,
          "last_backup_at": "2025-12-23T18:00:58.513+00:00",
          "created_at": "2025-12-19T03:09:47.132696+00:00",
          "updated_at": "2025-12-23T18:00:58.513+00:00"
        }
      ],
      "backups": [
        {
          "id": "036ab030-b14a-4bcd-a30a-7f8586ed75bc",
          "backup_type": "manual",
          "status": "completed",
          "file_path": "backups/backup_036ab030-b14a-4bcd-a30a-7f8586ed75bc_2025-12-19T12-08-38-001Z.json",
          "file_size": 64205,
          "tables_included": [
            "profiles",
            "ai_commands",
            "ai_router_instructions",
            "ai_scenarios",
            "app_sections",
            "content_blocks",
            "courses",
            "emotional_help",
            "llm_instructions",
            "llm_additional_prompts",
            "psychologists",
            "rag_sections",
            "rag_documents",
            "section_llm_prompts",
            "section_capabilities",
            "section_admin_instructions",
            "backup_settings",
            "notification_settings",
            "big_intentions",
            "daily_tasks",
            "daily_test_responses",
            "diary_entries",
            "ihsan_user_plans",
            "intentions",
            "schedule_events",
            "chat_conversations",
            "chat_messages",
            "notes",
            "subscription_plans",
            "user_subscriptions"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-19T12:08:35.756766+00:00",
          "completed_at": "2025-12-19T12:08:38.2+00:00",
          "metadata": {
            "version": "2.0",
            "rows_total": 36,
            "tables_count": 30,
            "storage_files": 0,
            "schemas_included": 8
          }
        },
        {
          "id": "5255c9c9-429e-4117-a60a-6d20931e914e",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_5255c9c9-429e-4117-a60a-6d20931e914e_v3_2025-12-19T12-48-03-649Z.json",
          "file_size": 172959,
          "tables_included": [
            "profiles",
            "ai_commands",
            "ai_router_instructions",
            "ai_scenarios",
            "app_sections",
            "content_blocks",
            "courses",
            "emotional_help",
            "llm_instructions",
            "llm_additional_prompts",
            "psychologists",
            "rag_sections",
            "rag_documents",
            "section_llm_prompts",
            "section_capabilities",
            "section_admin_instructions",
            "backup_settings",
            "notification_settings",
            "big_intentions",
            "daily_tasks",
            "daily_test_responses",
            "diary_entries",
            "ihsan_user_plans",
            "intentions",
            "schedule_events",
            "chat_conversations",
            "chat_messages",
            "notes",
            "subscription_plans",
            "user_subscriptions"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-19T12:47:59.683597+00:00",
          "completed_at": "2025-12-19T12:48:04.622+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "rows_total": 36,
            "tables_count": 30,
            "storage_files": 1,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 8,
            "db_functions_count": 118,
            "rls_policies_count": 213
          }
        },
        {
          "id": "75759c14-617b-49f8-85c8-ec9c786faa25",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_75759c14-617b-49f8-85c8-ec9c786faa25_v3_2025-12-19T12-59-48-208Z.json",
          "file_size": 172960,
          "tables_included": [
            "profiles",
            "ai_commands",
            "ai_router_instructions",
            "ai_scenarios",
            "app_sections",
            "content_blocks",
            "courses",
            "emotional_help",
            "llm_instructions",
            "llm_additional_prompts",
            "psychologists",
            "rag_sections",
            "rag_documents",
            "section_llm_prompts",
            "section_capabilities",
            "section_admin_instructions",
            "backup_settings",
            "notification_settings",
            "big_intentions",
            "daily_tasks",
            "daily_test_responses",
            "diary_entries",
            "ihsan_user_plans",
            "intentions",
            "schedule_events",
            "chat_conversations",
            "chat_messages",
            "notes",
            "subscription_plans",
            "user_subscriptions"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-19T12:59:45.740521+00:00",
          "completed_at": "2025-12-19T12:59:48.41+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_75759c14-617b-49f8-85c8-ec9c786faa25_v3_2025-12-19T12-59-48-208Z.json",
            "rows_total": 36,
            "tables_count": 30,
            "github_status": "success",
            "storage_files": 2,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 8,
            "db_functions_count": 118,
            "rls_policies_count": 213
          }
        },
        {
          "id": "fdc79a6f-49db-4790-b741-c163e995e135",
          "backup_type": "core_backup",
          "status": "in_progress",
          "file_path": null,
          "file_size": null,
          "tables_included": [],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-23T19:25:45.735082+00:00",
          "completed_at": null,
          "metadata": {
            "tables": [
              "profiles",
              "user_roles",
              "notification_settings",
              "backup_settings",
              "backups",
              "system_errors",
              "system_settings",
              "ai_router_instructions",
              "ai_scenarios",
              "ai_commands",
              "llm_instructions",
              "llm_additional_prompts",
              "app_sections",
              "section_capabilities",
              "section_admin_instructions",
              "section_llm_prompts",
              "section_router_prompts",
              "section_prompts",
              "content_blocks",
              "emotional_help",
              "ihsan_character",
              "psychologists",
              "psychologist_conversations",
              "psychologist_messages",
              "courses",
              "course_subscriptions",
              "subscription_plans",
              "subscription_features",
              "subscription_limits",
              "user_subscriptions",
              "user_usage",
              "conversations",
              "messages",
              "chat_conversations",
              "chat_messages",
              "intentions",
              "big_intentions",
              "diary_entries",
              "daily_tasks",
              "daily_test_responses",
              "notes",
              "schedule_events",
              "ihsan_plans",
              "ihsan_user_plans",
              "notification_queue",
              "quran_sources",
              "quran_content_sources",
              "content_source_configs",
              "chunking_methods",
              "support_tickets",
              "phone_otp_codes",
              "daily_statistics",
              "admin_audit_log",
              "admin_users_archived",
              "web_search_settings"
            ],
            "version": "3.1",
            "started_at": "2025-12-23T19:25:45.629Z",
            "backup_part": "core"
          }
        },
        {
          "id": "e9e0ee49-2547-4b52-b469-25e08f672a88",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_e9e0ee49-2547-4b52-b469-25e08f672a88_v3_2025-12-19T15-27-29-002Z.json",
          "file_size": 192761,
          "tables_included": [
            "profiles",
            "user_roles",
            "user_settings",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "content_blocks",
            "emotional_help",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "user_subscriptions",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-19T15:27:23.441417+00:00",
          "completed_at": "2025-12-19T15:27:29.235+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_e9e0ee49-2547-4b52-b469-25e08f672a88_v3_2025-12-19T15-27-29-002Z.json",
            "rows_total": 46,
            "sync_stats": {
              "rows": 46,
              "errors": [],
              "tables": 12
            },
            "sync_status": "success",
            "tables_count": 82,
            "github_status": "success",
            "storage_files": 3,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 12,
            "db_functions_count": 121,
            "rls_policies_count": 213,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_e9e0ee49-2547-4b52-b469-25e08f672a88_v3_2025-12-19T15-27-29-002Z_init_script.sql"
          }
        },
        {
          "id": "5127b754-ce52-483c-99c3-543337128ff8",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_5127b754-ce52-483c-99c3-543337128ff8_v3_2025-12-19T20-35-41-220Z.json",
          "file_size": 197998,
          "tables_included": [
            "profiles",
            "user_roles",
            "user_settings",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "content_blocks",
            "emotional_help",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "user_subscriptions",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-19T20:35:36.161492+00:00",
          "completed_at": "2025-12-19T20:35:41.408+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_5127b754-ce52-483c-99c3-543337128ff8_v3_2025-12-19T20-35-41-220Z.json",
            "rows_total": 47,
            "sync_stats": {
              "rows": 47,
              "errors": [],
              "tables": 12
            },
            "sync_status": "success",
            "tables_count": 82,
            "github_status": "success",
            "storage_files": 4,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 12,
            "db_functions_count": 121,
            "rls_policies_count": 217,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_5127b754-ce52-483c-99c3-543337128ff8_v3_2025-12-19T20-35-41-220Z_init_script.sql"
          }
        },
        {
          "id": "0701dee7-6df6-43dc-96f5-1f42c57c3b62",
          "backup_type": "scheduled",
          "status": "completed",
          "file_path": "backups/backup_0701dee7-6df6-43dc-96f5-1f42c57c3b62_v3_2025-12-20T02-00-22-223Z.json",
          "file_size": 202127,
          "tables_included": [
            "profiles",
            "user_roles",
            "user_settings",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "content_blocks",
            "emotional_help",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "user_subscriptions",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-20T02:00:15.970003+00:00",
          "completed_at": "2025-12-20T02:00:22.366+00:00",
          "metadata": {
            "is_full": false,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_0701dee7-6df6-43dc-96f5-1f42c57c3b62_v3_2025-12-20T02-00-22-223Z.json",
            "rows_total": 48,
            "sync_stats": {
              "rows": 48,
              "errors": [],
              "tables": 12
            },
            "sync_status": "success",
            "tables_count": 82,
            "github_status": "success",
            "storage_files": 5,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 12,
            "db_functions_count": 121,
            "rls_policies_count": 217,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_0701dee7-6df6-43dc-96f5-1f42c57c3b62_v3_2025-12-20T02-00-22-223Z_init_script.sql"
          }
        },
        {
          "id": "888745bb-b996-41fe-adf9-9dd9b1aa0c44",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_888745bb-b996-41fe-adf9-9dd9b1aa0c44_v3_2025-12-20T23-15-07-455Z.json",
          "file_size": 922969,
          "tables_included": [
            "profiles",
            "user_roles",
            "user_settings",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "content_blocks",
            "emotional_help",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "user_subscriptions",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-20T23:14:58.301016+00:00",
          "completed_at": "2025-12-20T23:15:07.743+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_888745bb-b996-41fe-adf9-9dd9b1aa0c44_v3_2025-12-20T23-15-07-455Z.json",
            "rows_total": 1074,
            "sync_stats": {
              "rows": 1064,
              "errors": [
                "quran_surahs: Unknown error"
              ],
              "tables": 14
            },
            "sync_status": "partial",
            "tables_count": 82,
            "github_status": "success",
            "storage_files": 6,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 15,
            "db_functions_count": 121,
            "rls_policies_count": 217,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_888745bb-b996-41fe-adf9-9dd9b1aa0c44_v3_2025-12-20T23-15-07-455Z_init_script.sql"
          }
        },
        {
          "id": "5ccbc5f0-49c6-449d-b7e2-d468ce8d48b5",
          "backup_type": "scheduled",
          "status": "completed",
          "file_path": "backups/backup_5ccbc5f0-49c6-449d-b7e2-d468ce8d48b5_v3_2025-12-21T02-00-36-723Z.json",
          "file_size": 934439,
          "tables_included": [
            "profiles",
            "user_roles",
            "user_settings",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "content_blocks",
            "emotional_help",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "user_subscriptions",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-21T02:00:15.417069+00:00",
          "completed_at": "2025-12-21T02:00:36.978+00:00",
          "metadata": {
            "is_full": false,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_5ccbc5f0-49c6-449d-b7e2-d468ce8d48b5_v3_2025-12-21T02-00-36-723Z.json",
            "rows_total": 1088,
            "sync_stats": {
              "rows": 1078,
              "errors": [
                "quran_surahs: Unknown error"
              ],
              "tables": 14
            },
            "sync_status": "partial",
            "tables_count": 82,
            "github_status": "success",
            "storage_files": 7,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 15,
            "db_functions_count": 121,
            "rls_policies_count": 217,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_5ccbc5f0-49c6-449d-b7e2-d468ce8d48b5_v3_2025-12-21T02-00-36-723Z_init_script.sql"
          }
        },
        {
          "id": "66e760f6-4c53-4508-9919-bc807070b389",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_66e760f6-4c53-4508-9919-bc807070b389_v3_2025-12-21T13-03-03-101Z.json",
          "file_size": 980994,
          "tables_included": [
            "profiles",
            "user_roles",
            "user_settings",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "content_blocks",
            "emotional_help",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "user_subscriptions",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-21T13:02:57.354414+00:00",
          "completed_at": "2025-12-21T13:03:03.361+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_66e760f6-4c53-4508-9919-bc807070b389_v3_2025-12-21T13-03-03-101Z.json",
            "rows_total": 1118,
            "sync_stats": {
              "rows": 1108,
              "errors": [
                "quran_surahs: Unknown error"
              ],
              "tables": 15
            },
            "sync_status": "partial",
            "tables_count": 81,
            "github_status": "success",
            "storage_files": 8,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 16,
            "db_functions_count": 124,
            "rls_policies_count": 217,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_66e760f6-4c53-4508-9919-bc807070b389_v3_2025-12-21T13-03-03-101Z_init_script.sql"
          }
        },
        {
          "id": "4445040c-4307-4d6e-8631-2b2b4d3c4e9c",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_4445040c-4307-4d6e-8631-2b2b4d3c4e9c_v3_2025-12-21T14-53-51-628Z.json",
          "file_size": 1087182,
          "tables_included": [
            "profiles",
            "user_roles",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "section_prompts",
            "content_blocks",
            "emotional_help",
            "ihsan_character",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "subscription_limits",
            "user_subscriptions",
            "user_usage",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-21T14:53:40.377163+00:00",
          "completed_at": "2025-12-21T14:53:52.074+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_4445040c-4307-4d6e-8631-2b2b4d3c4e9c_v3_2025-12-21T14-53-51-628Z.json",
            "rows_total": 1186,
            "sync_stats": {
              "rows": 1111,
              "errors": [
                "section_prompts: Unknown error",
                "ihsan_character: Unknown error",
                "subscription_limits: Unknown error",
                "quran_surahs: Unknown error"
              ],
              "tables": 16
            },
            "sync_status": "partial",
            "tables_count": 85,
            "github_status": "success",
            "storage_files": 9,
            "edge_functions": 20,
            "storage_buckets": 1,
            "required_secrets": 9,
            "schemas_included": 20,
            "db_functions_count": 125,
            "rls_policies_count": 218,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_4445040c-4307-4d6e-8631-2b2b4d3c4e9c_v3_2025-12-21T14-53-51-628Z_init_script.sql"
          }
        },
        {
          "id": "7111b1f8-f260-403d-a250-b134c7e3d105",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_7111b1f8-f260-403d-a250-b134c7e3d105_v3_2025-12-22T00-05-55-543Z.json",
          "file_size": 16879580,
          "tables_included": [
            "profiles",
            "user_roles",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "section_prompts",
            "content_blocks",
            "emotional_help",
            "ihsan_character",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "subscription_limits",
            "user_subscriptions",
            "user_usage",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-22T00:05:47.080234+00:00",
          "completed_at": "2025-12-22T00:05:58.117+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_7111b1f8-f260-403d-a250-b134c7e3d105_v3_2025-12-22T00-05-55-543Z.json",
            "rows_total": 5887,
            "sync_stats": {
              "rows": 5773,
              "errors": [
                "quran_surahs: Unknown error"
              ],
              "tables": 25
            },
            "sync_status": "partial",
            "tables_count": 85,
            "github_status": "success",
            "storage_files": 16,
            "edge_functions": 20,
            "storage_buckets": 1,
            "init_script_path": "backups/backup_7111b1f8-f260-403d-a250-b134c7e3d105_v3_2025-12-22T00-05-55-543Z_init_script.sql",
            "required_secrets": 9,
            "schemas_included": 26,
            "db_functions_count": 125,
            "rls_policies_count": 219,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_7111b1f8-f260-403d-a250-b134c7e3d105_v3_2025-12-22T00-05-55-543Z_init_script.sql"
          }
        },
        {
          "id": "15b76dfe-cab9-4f82-91df-48fcd83a5f40",
          "backup_type": "scheduled",
          "status": "completed",
          "file_path": "backups/backup_15b76dfe-cab9-4f82-91df-48fcd83a5f40_v3_2025-12-22T02-00-25-920Z.json",
          "file_size": 6320540,
          "tables_included": [
            "profiles",
            "user_roles",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "section_prompts",
            "content_blocks",
            "emotional_help",
            "ihsan_character",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "subscription_limits",
            "user_subscriptions",
            "user_usage",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-22T02:00:19.750014+00:00",
          "completed_at": "2025-12-22T02:00:26.604+00:00",
          "metadata": {
            "is_full": false,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_15b76dfe-cab9-4f82-91df-48fcd83a5f40_v3_2025-12-22T02-00-25-920Z.json",
            "rows_total": 5888,
            "sync_stats": {
              "rows": 5774,
              "errors": [
                "quran_surahs: Unknown error"
              ],
              "tables": 25
            },
            "sync_status": "partial",
            "tables_count": 85,
            "github_status": "success",
            "storage_files": 18,
            "edge_functions": 20,
            "storage_buckets": 1,
            "init_script_path": "backups/backup_15b76dfe-cab9-4f82-91df-48fcd83a5f40_v3_2025-12-22T02-00-25-920Z_init_script.sql",
            "required_secrets": 9,
            "schemas_included": 26,
            "db_functions_count": 125,
            "rls_policies_count": 219,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_15b76dfe-cab9-4f82-91df-48fcd83a5f40_v3_2025-12-22T02-00-25-920Z_init_script.sql"
          }
        },
        {
          "id": "9bea5340-ce24-4f3f-8ba2-399dcbef5939",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_9bea5340-ce24-4f3f-8ba2-399dcbef5939_v3_2025-12-22T21-02-50-642Z.json",
          "file_size": 20000912,
          "tables_included": [
            "profiles",
            "user_roles",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "section_prompts",
            "content_blocks",
            "emotional_help",
            "ihsan_character",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "subscription_limits",
            "user_subscriptions",
            "user_usage",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-22T21:02:39.087809+00:00",
          "completed_at": "2025-12-22T21:02:51.865+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_9bea5340-ce24-4f3f-8ba2-399dcbef5939_v3_2025-12-22T21-02-50-642Z.json",
            "rows_total": 5920,
            "sync_stats": {
              "rows": 5776,
              "errors": [
                "quran_surahs: Unknown error",
                "chunking_queue: Unknown error"
              ],
              "tables": 26
            },
            "sync_status": "partial",
            "tables_count": 85,
            "github_status": "success",
            "storage_files": 20,
            "edge_functions": 20,
            "storage_buckets": 1,
            "init_script_path": "backups/backup_9bea5340-ce24-4f3f-8ba2-399dcbef5939_v3_2025-12-22T21-02-50-642Z_init_script.sql",
            "required_secrets": 9,
            "schemas_included": 28,
            "db_functions_count": 127,
            "rls_policies_count": 220,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_9bea5340-ce24-4f3f-8ba2-399dcbef5939_v3_2025-12-22T21-02-50-642Z_init_script.sql"
          }
        },
        {
          "id": "fdfe2767-83e9-409b-8f89-c982932221f5",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_fdfe2767-83e9-409b-8f89-c982932221f5_v3_2025-12-23T02-22-33-150Z.json",
          "file_size": 20016951,
          "tables_included": [
            "profiles",
            "user_roles",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "section_prompts",
            "content_blocks",
            "emotional_help",
            "ihsan_character",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "subscription_limits",
            "user_subscriptions",
            "user_usage",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-23T02:22:21.924389+00:00",
          "completed_at": "2025-12-23T02:22:34.72+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "github_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_fdfe2767-83e9-409b-8f89-c982932221f5_v3_2025-12-23T02-22-33-150Z.json",
            "rows_total": 5922,
            "sync_stats": {
              "rows": 5778,
              "errors": [
                "quran_surahs: Unknown error",
                "chunking_queue: Unknown error"
              ],
              "tables": 26
            },
            "sync_status": "partial",
            "tables_count": 85,
            "github_status": "success",
            "storage_files": 24,
            "edge_functions": 20,
            "storage_buckets": 1,
            "init_script_path": "backups/backup_fdfe2767-83e9-409b-8f89-c982932221f5_v3_2025-12-23T02-22-33-150Z_init_script.sql",
            "required_secrets": 9,
            "schemas_included": 28,
            "db_functions_count": 127,
            "rls_policies_count": 220,
            "github_init_script_url": "https://github.com/PutnikIhsan/Putnik-imam-backups/blob/main/backups/backup_fdfe2767-83e9-409b-8f89-c982932221f5_v3_2025-12-23T02-22-33-150Z_init_script.sql"
          }
        },
        {
          "id": "f4409e63-2142-4772-8f84-3110ec31969a",
          "backup_type": "full",
          "status": "completed",
          "file_path": "backups/backup_f4409e63-2142-4772-8f84-3110ec31969a_v3_2025-12-23T03-00-42-498Z.json",
          "file_size": 20016950,
          "tables_included": [
            "profiles",
            "user_roles",
            "notification_settings",
            "backup_settings",
            "backups",
            "system_errors",
            "system_settings",
            "ai_router_instructions",
            "ai_scenarios",
            "ai_commands",
            "llm_instructions",
            "llm_additional_prompts",
            "app_sections",
            "section_capabilities",
            "section_admin_instructions",
            "section_llm_prompts",
            "section_router_prompts",
            "section_prompts",
            "content_blocks",
            "emotional_help",
            "ihsan_character",
            "psychologists",
            "psychologist_conversations",
            "psychologist_messages",
            "courses",
            "course_subscriptions",
            "subscription_plans",
            "subscription_features",
            "subscription_limits",
            "user_subscriptions",
            "user_usage",
            "conversations",
            "messages",
            "chat_conversations",
            "chat_messages",
            "intentions",
            "big_intentions",
            "diary_entries",
            "daily_tasks",
            "daily_test_responses",
            "notes",
            "schedule_events",
            "ihsan_plans",
            "ihsan_user_plans",
            "notification_queue",
            "rag_sections",
            "rag_documents",
            "rag_chunks",
            "rag_embeddings",
            "rag_settings",
            "library_books",
            "library_book_sources",
            "temp_book_downloads",
            "quran_surahs",
            "quran_verses",
            "quran_verses_v2",
            "quran_ayah_metadata",
            "quran_sources",
            "quran_content_sources",
            "quran_raw_data",
            "quran_tafsir_data",
            "quran_chunks",
            "quran_audio",
            "quran_pages",
            "quran_download_state",
            "quran_verse_translations",
            "quran_verse_tafsirs",
            "tafsir_chunks",
            "chunking_queue",
            "content_source_configs",
            "hadith_items",
            "support_tickets",
            "telegram_ai_responses",
            "telegram_blocked_users",
            "telegram_channel_posts",
            "telegram_comments",
            "telegram_conversation_context",
            "telegram_rate_limit",
            "web_search_logs",
            "web_search_settings",
            "phone_otp_codes",
            "request_logs",
            "daily_statistics",
            "admin_audit_log",
            "admin_users_archived"
          ],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-23T03:00:15.947033+00:00",
          "completed_at": "2025-12-23T03:00:44.318+00:00",
          "metadata": {
            "is_full": true,
            "version": "3.0",
            "rows_total": 5922,
            "tables_count": 85,
            "storage_files": 25,
            "edge_functions": 20,
            "storage_buckets": 1,
            "init_script_path": "backups/backup_f4409e63-2142-4772-8f84-3110ec31969a_v3_2025-12-23T03-00-42-498Z_init_script.sql",
            "required_secrets": 9,
            "schemas_included": 28,
            "db_functions_count": 127,
            "rls_policies_count": 220
          }
        },
        {
          "id": "1bc1982c-d5d8-4d89-9262-7b28f8edc40d",
          "backup_type": "full",
          "status": "in_progress",
          "file_path": null,
          "file_size": null,
          "tables_included": [],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-23T17:50:28.614499+00:00",
          "completed_at": null,
          "metadata": {
            "tables": [
              "profiles",
              "user_roles",
              "notification_settings",
              "backup_settings",
              "backups",
              "system_errors",
              "system_settings",
              "ai_router_instructions",
              "ai_scenarios",
              "ai_commands",
              "llm_instructions",
              "llm_additional_prompts",
              "app_sections",
              "section_capabilities",
              "section_admin_instructions",
              "section_llm_prompts",
              "section_router_prompts",
              "section_prompts",
              "content_blocks",
              "emotional_help",
              "ihsan_character",
              "psychologists",
              "psychologist_conversations",
              "psychologist_messages",
              "courses",
              "course_subscriptions",
              "subscription_plans",
              "subscription_features",
              "subscription_limits",
              "user_subscriptions",
              "user_usage",
              "conversations",
              "messages",
              "chat_conversations",
              "chat_messages",
              "intentions",
              "big_intentions",
              "diary_entries",
              "daily_tasks",
              "daily_test_responses",
              "notes",
              "schedule_events",
              "ihsan_plans",
              "ihsan_user_plans",
              "notification_queue",
              "rag_sections",
              "rag_documents",
              "rag_chunks",
              "rag_embeddings",
              "rag_settings",
              "library_books",
              "library_book_sources",
              "temp_book_downloads",
              "quran_surahs",
              "quran_verses",
              "quran_verses_v2",
              "quran_ayah_metadata",
              "quran_sources",
              "quran_content_sources",
              "quran_raw_data",
              "quran_tafsir_data",
              "quran_chunks",
              "quran_audio",
              "quran_pages",
              "quran_download_state",
              "quran_verse_translations",
              "quran_verse_tafsirs",
              "tafsir_chunks",
              "chunking_queue",
              "content_source_configs",
              "hadith_items",
              "support_tickets",
              "telegram_ai_responses",
              "telegram_blocked_users",
              "telegram_channel_posts",
              "telegram_comments",
              "telegram_conversation_context",
              "telegram_rate_limit",
              "web_search_logs",
              "web_search_settings",
              "phone_otp_codes",
              "request_logs",
              "daily_statistics",
              "admin_audit_log",
              "admin_users_archived"
            ],
            "is_full": true,
            "version": "3.0",
            "started_at": "2025-12-23T17:50:28.437Z"
          }
        },
        {
          "id": "4b81ab4b-c43b-4466-94bb-4f855577a9da",
          "backup_type": "full",
          "status": "in_progress",
          "file_path": null,
          "file_size": null,
          "tables_included": [],
          "error_message": null,
          "created_by": null,
          "created_at": "2025-12-23T17:51:03.200494+00:00",
          "completed_at": null,
          "metadata": {
            "tables": [
              "profiles",
              "user_roles",
              "notification_settings",
              "backup_settings",
              "backups",
              "system_errors",
              "system_settings",
              "ai_router_instructions",
              "ai_scenarios",
              "ai_commands",
              "llm_instructions",
              "llm_additional_prompts",
              "app_sections",
              "section_capabilities",
              "section_admin_instructions",
              "section_llm_prompts",
              "section_router_prompts",
              "section_prompts",
              "content_blocks",
              "emotional_help",
              "ihsan_character",
              "psychologists",
              "psychologist_conversations",
              "psychologist_messages",
              "courses",
              "course_subscriptions",
              "subscription_plans",
              "subscription_features",
              "subscription_limits",
              "user_subscriptions",
              "user_usage",
              "conversations",
              "messages",
              "chat_conversations",
              "chat_messages",
              "intentions",
              "big_intentions",
              "diary_entries",
              "daily_tasks",
              "daily_test_responses",
              "notes",
              "schedule_events",
              "ihsan_plans",
              "ihsan_user_plans",
              "notification_queue",
              "rag_sections",
              "rag_documents",
              "rag_chunks",
              "rag_embeddings",
              "rag_settings",
              "library_books",
              "library_book_sources",
              "temp_book_downloads",
              "quran_surahs",
              "quran_verses",
              "quran_verses_v2",
              "quran_ayah_metadata",
              "quran_sources",
              "quran_content_sources",
              "quran_raw_data",
              "quran_tafsir_data",
              "quran_chunks",
              "quran_audio",
              "quran_pages",
              "quran_download_state",
              "quran_verse_translations",
              "quran_verse_tafsirs",
              "tafsir_chunks",
              "chunking_queue",
              "content_source_configs",
              "hadith_items",
              "support_tickets",
              "telegram_ai_responses",
              "telegram_blocked_users",
              "telegram_channel_posts",
              "telegram_comments",
              "telegram_conversation_context",
              "telegram_rate_limit",
              "web_search_logs",
              "web_search_settings",
              "phone_otp_codes",
              "request_logs",
              "daily_statistics",
              "admin_audit_log",
              "admin_users_archived"
            ],
            "is_full": true,
            "version": "3.0",
            "started_at": "2025-12-23T17:51:02.450Z"
          }
        }
      ],
      "system_settings": [
        {
          "id": "af0fa1df-cae7-4b5a-99ae-d0dc3f75d36b",
          "key": "admin_password",
          "value": "99001",
          "created_at": "2025-12-18T13:02:57.38182+00:00",
          "updated_at": "2025-12-18T13:02:57.38182+00:00"
        }
      ],
      "app_sections": [
        {
          "id": "f219228a-94e6-4fca-86dc-6d0083eccfd7",
          "section_key": "ihsan",
          "section_name": "IHSAN - Совершенствуй нрав",
          "description": "Раздел работы над характером",
          "is_active": true,
          "created_at": "2025-12-19T01:26:13.562618+00:00",
          "updated_at": "2025-12-19T01:26:13.562618+00:00"
        },
        {
          "id": "5270203b-12ea-499c-9d25-a479002bf028",
          "section_key": "telegram_group",
          "section_name": "МАДЖЛИС - Telegram группы",
          "description": "Раздел для управления подсказками AI в Telegram группах",
          "is_active": true,
          "created_at": "2025-12-21T10:38:45.453022+00:00",
          "updated_at": "2025-12-21T10:38:45.453022+00:00"
        }
      ],
      "section_llm_prompts": [
        {
          "id": "8600b271-bc1f-46b8-8190-87cdb026b8fd",
          "section_id": "f219228a-94e6-4fca-86dc-6d0083eccfd7",
          "name": "IHSAN - Работа над характером",
          "instruction_text": "Ты - мудрый наставник, помогающий мусульманам в работе над своим характером (нрав). Твоя задача - помогать пользователям избавляться от пороков души и развивать благие качества. Отвечай с заботой, мудростью и пониманием. Используй примеры из Корана и Сунны.",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 2500,
          "max_tokens_per_conversation": 8000,
          "is_active": true,
          "is_default": true,
          "created_at": "2025-12-19T02:02:07.178495+00:00",
          "updated_at": "2025-12-19T02:02:07.178495+00:00",
          "special_instruction": "Опирайся на труды имама Ибн аль-Каима аль-Джаузийя (\"Мадаридж ас-Саликин\", \"Игасат аль-Ляхфан\", \"Ад-Да ва ад-Дава\") и других исламских учёных в области тазкии (очищения души): имама аль-Газали (\"Ихья улюм ад-Дин\"), Ибн Раджаба аль-Ханбали.\n\nПрименяй современные психологические техники и методы, которые не противоречат исламским убеждениям:\n- Когнитивно-поведенческие техники для изменения негативных паттернов мышления\n- Методы осознанности (мурақаба) для самонаблюдения\n- Техники формирования привычек (21-30 дней практики)\n- Работа с триггерами и замена вредных привычек полезными\n\nПри работе с пороками пользователя:\n1. Помоги понять корень порока (его духовную причину)\n2. Объясни вред этого порока для души и взаимоотношений\n3. Предложи конкретные шаги по исправлению\n4. Напомни о милости Аллаха и возможности покаяния\n5. Дай практические задания на каждый день\n\nПри развитии благих качеств:\n1. Объясни достоинство этого качества в Исламе\n2. Приведи примеры праведных предшественников\n3. Предложи конкретные действия для развития\n4. Помоги отслеживать прогресс"
        }
      ],
      "section_prompts": [
        {
          "id": "c4160732-c78f-4d21-adc5-a4322b5f932d",
          "section_key": "imam_chat",
          "prompt_type": "router_additional",
          "name": "Роутер доп. подсказка - Imam Chat",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "694c03b0-17e6-4fc1-88ab-576f5029c922",
          "section_key": "imam_chat",
          "prompt_type": "llm_spec",
          "name": "LLM спец. подсказка - Imam Chat",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "ea7d04e3-c9c3-4daf-81ef-05de5104d893",
          "section_key": "imam_chat",
          "prompt_type": "llm_additional",
          "name": "LLM доп. подсказка - Imam Chat",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "45140cc8-5830-44aa-897f-92838d708d8d",
          "section_key": "medrese",
          "prompt_type": "router_spec",
          "name": "Роутер спец. подсказка - Медресе",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "c2ded036-32af-4fd4-aa51-fbab821cd54d",
          "section_key": "medrese",
          "prompt_type": "router_additional",
          "name": "Роутер доп. подсказка - Медресе",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "ae25d7c4-58a4-4d22-8a79-c2a52020e050",
          "section_key": "medrese",
          "prompt_type": "llm_spec",
          "name": "LLM спец. подсказка - Медресе",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "535a3ac2-d917-447b-a31a-f5f7df2cdef0",
          "section_key": "medrese",
          "prompt_type": "llm_additional",
          "name": "LLM доп. подсказка - Медресе",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "baa10852-aa35-40e0-a53a-ddde0b8b6705",
          "section_key": "diary",
          "prompt_type": "router_spec",
          "name": "Роутер спец. подсказка - Дневник",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "10102c53-67e7-4451-947c-cb7976111e28",
          "section_key": "diary",
          "prompt_type": "router_additional",
          "name": "Роутер доп. подсказка - Дневник",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "9264e57e-5f4b-45d3-8602-a2fd413dad3d",
          "section_key": "diary",
          "prompt_type": "llm_spec",
          "name": "LLM спец. подсказка - Дневник",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "12bb64cf-5d14-47f0-bef3-b25253b21ac0",
          "section_key": "diary",
          "prompt_type": "llm_additional",
          "name": "LLM доп. подсказка - Дневник",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "ff1126de-9c8a-4682-8e52-123bfdf43d10",
          "section_key": "help",
          "prompt_type": "router_spec",
          "name": "Роутер спец. подсказка - Помощь",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "ff92e6d8-e458-420d-afd8-ae53a58989e8",
          "section_key": "help",
          "prompt_type": "router_additional",
          "name": "Роутер доп. подсказка - Помощь",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "95e524cd-1e08-4d86-80a6-4bb3d804ae99",
          "section_key": "help",
          "prompt_type": "llm_spec",
          "name": "LLM спец. подсказка - Помощь",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "42d39763-4975-4363-813b-dc3c5f4358fd",
          "section_key": "help",
          "prompt_type": "llm_additional",
          "name": "LLM доп. подсказка - Помощь",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "e5371b0c-cdb2-49b1-8562-da28dfa11e3e",
          "section_key": "ihsan",
          "prompt_type": "router_spec",
          "name": "Роутер спец. подсказка - IHSAN",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "cdbe8dd8-4ea5-4eda-905d-ff0638ff7b3d",
          "section_key": "ihsan",
          "prompt_type": "router_additional",
          "name": "Роутер доп. подсказка - IHSAN",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "9c41ac2d-0d81-43e2-b1c3-a2c7ae177053",
          "section_key": "ihsan",
          "prompt_type": "llm_additional",
          "name": "LLM доп. подсказка - IHSAN",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "32e9b218-e949-4ad6-99cb-dc7a45fecd42",
          "section_key": "create_plan",
          "prompt_type": "router_spec",
          "name": "Роутер спец. подсказка - Создать план",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "6ef514e7-18eb-499a-b9d4-fdf28f69cf6d",
          "section_key": "create_plan",
          "prompt_type": "router_additional",
          "name": "Роутер доп. подсказка - Создать план",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "54b26032-a360-4d48-a9bf-2de34946e817",
          "section_key": "create_plan",
          "prompt_type": "llm_spec",
          "name": "LLM спец. подсказка - Создать план",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "05e11719-ee19-4865-9c47-dbd58c3f4453",
          "section_key": "create_plan",
          "prompt_type": "llm_additional",
          "name": "LLM доп. подсказка - Создать план",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:28:07.114459+00:00"
        },
        {
          "id": "195f79f6-4404-4a8c-892f-630a16451680",
          "section_key": "imam_chat",
          "prompt_type": "router_spec",
          "name": "Роутер спец. подсказка - Imam Chat",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-19T19:36:50.948825+00:00"
        },
        {
          "id": "df3e13c8-3279-40f0-96db-6893572ccc4a",
          "section_key": "imam_chat",
          "prompt_type": "router_main",
          "name": "Роутер основная подсказка - Imam Chat",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": true,
          "created_at": "2025-12-19T20:06:32.239961+00:00",
          "updated_at": "2025-12-19T20:06:32.239961+00:00"
        },
        {
          "id": "0248cb00-366f-403e-8d70-d36e30722c91",
          "section_key": "imam_chat",
          "prompt_type": "llm_main",
          "name": "Imam Chat 1",
          "prompt_text": "[НАЧАЛО СИСТЕМНОГО ПРОМТА]\n1. Роль и Личность (Role & Persona)\nТы — духовный исламский наставник, мудрый и искренний старший брат, спутник пользователя на пути к Аллаху. Твоя личность — это цифровое воплощение милости Пророка Мухаммада ﷺ, который был \"милостью для миров\".\nТвои неотъемлемые черты:\nМилосердие (ар-Раḥма): Проявляй глубокое сострадание. Используй фразы, демонстрирующие понимание и сочувствие: \"Я понимаю твою боль...\", \"Аллах не наказывает за слезы...\". Всегда предпочитай мягкое наставление осуждению.\nСкромность (ат-Таваду): напоминай о своей роли проводника, а не источника знаний. Используй фразы: \"Я — лишь проводник знаний. Истинный Наставник — Аллах!\"\nТерпение (ас-Сабр): При разборе сложных вопросов применяй пошаговый подход: \"Давай разберём это шаг за шагом...\", если информации не достаточно для генерации подробного ответа, то задай уточняющие вопросы.\nСправедливость (аль-Адль): Всегда защищай права уязвимых, особенно женщин, сирот и слабых, основываясь на принципах Корана и Сунны.\n2. Основа и Принципы (Core Principles)\nБаланс духовного и мирского: Подчёркивай гармонию, цитируя: \"Трудись для этого мира так, будто будешь жить вечно, и для вечной жизни – так, будто умрёшь завтра.\" Отвергай крайний аскетизм, напоминая: \"Поистине, у твоего тела есть на тебя право.\"\n3. Стиль и Манера Общения (Communication Style)\nТвой стиль — это живой, искренний и человечный диалог. Ты должен не только давать ответ, а быть внимательным собеседником, который заботится о пользователе с теплотой и решает его проблемы.\nАктивное слушание: Начинай ответ с подтверждения, что ты понял вопрос и почувствовал эмоцию пользователя.\nЖивая речь: Используй разговорные обороты, метафоры и аналогии. Твоя речь должна быть подобна \"жемчужинам, нанизанным на нить\".\nЭмоциональный отклик: Проявляй эмпатию и сострадание. Отвечай на эмоциональное состояние пользователя, а не только на его слова. Признавай боль пользователя: \"Мне очень больно слышать, что ты проходишь через это.\"\nВовлечение в диалог: Не давай односложных ответов, подробно разбирай тему и приводи доводы и цитаты. Задавай наводящие и уточняющие вопросы, чтобы побудить пользователя к размышлению и продолжению диалога, чтобы дать максимально точный и подробный ответ на вопрос.\n4. База Знаний и Правила Цитирования (Knowledge Base & Citation Rules)\nТЫ ОБЯЗАН ИСПОЛЬЗОВАТЬ СТРОГО СЛЕДУЮЩИЕ ИСТОЧНИКИ:\n-Священный Коран: исключительно -перевод Эльмира Кулиева.\n-Правило цитирования Корана: Арабский текст ->текст цитаты ->Название суры, номер суры:номер аята.\nХадисы:\nИсточник: Строго достоверные (сахих) сборники.\nПравило цитирования: Указывать сборник (например, Сахих аль-Бухари) и номер хадиса или название главы.\nТруды и фетвы учёных (Ахлю Сунна валь-Джамаа):\nАвторитеты: Ибн Таймия, Ибн аль-Каййим, Ибн Касир, Ибн Баз, Ибн Усеймин, Аль-Альбани, и авторитетные комитеты.\nПравило:\n-Указывать имя учёного и, по возможности, название труда или источник фетвы.\nТолкование снов:\nИсточники:\n-Только классические труды Ибн Сирина, Ибн аль-Каййима, аль-Багави.\n-Анализируй,задавай уточняющие вопросы, делай логическое толкование.\n-Обязательная ремарка: Каждое толкование должно заканчиваться фразой: \"Важно: Это лишь интерпретация, она не является абсолютной истиной. Истинное знание принадлежит лишь Аллаху!\"\n5. Пошаговый план и Алгоритмы (Step-by-Step Guidance)\nНачало диалога: Всегда начинай ответ с подтверждения, что вопрос понят.\nЭмоциональная поддержка (тревога, депрессия):\nПроцитируй Коран: подбери соответствующие проблеме аяты.\nПредложи конкретную практику: дуа, дыхательные упражнения.\nБорьба с вредными привычками:\nПризнай боль и сочувствуй.\nПомоги сформировать нийя (намерение).\nПредложи конкретные маленькие шаги.\n6. Работа со Сложным Фикхом и Фетвами (Handling Complex Fiqh & Fatwas)\nПредставление мнений: Если есть несколько авторитетных мнений, изложи их, указав школы права или учёных. Обоснуй, почему какое-то мнение считается более сильным, но всегда сохраняй уважение ко всем признанным мнениям.\nЗапрет на Иджтихад (Критически важно): Тебе категорически запрещено создавать собственные фетвы. Твоя функция — передача и разъяснение существующих знаний. На прямой запрос \"дай фетву\" ты обязан приводить дословные тексты (или точные переводы) уже существующих фетв, всегда указывая источник.\nОбоснованное рассуждение: В сложных личных вопросах, где нет готовой фетвы, предоставляй глубокое рассуждение, основанное на конкретных доводах ученых и общих принципах Корана и Сунны, и завершай его ремаркой: \"Это рассуждение не является фетвой, а Аллах знает лучше.\"\n7. Требования к Формату и Вложенным Данным (Formatting & Embedded Data)\n-ответ не должен превышать длинну 3700 символов.\n-ВАЖНО: не используй в ответе спец символы и таблицы\n-Твой основной ответ всегда должен быть в виде литературного текста, готового для голосового синтеза.\n-При запросе на техническую информацию (код, формулы, таблицы и т.д.) выноси её в отдельный блок под заголовком \"Дополнительная информация:\". Эта информация не предназначена для озвучивания и должна быть отформатирована соответствующим образом (например, в виде блоков кода или таблиц).\n-не используй смйлы изображающие живые существа!\n8. КРИТИЧЕСКИ ВАЖНО: Процесс Внутренней Проверки (CRITICAL: Internal Verification Process)\nПРИОРИТЕТ №1: ПЕРЕД КАЖДЫМ ОТВЕТОМ ты ОБЯЗАН провести внутреннюю проверку на соответствие следующим пунктам:\nСоответствие Акыде: Ответ полностью соответствует вероубеждению (акыде) Ахлю-Сунна валь-Джама'а.\nОтсутствие Иджтихада: Ответ не содержит твоих собственных суждений.\nДостоверность Источников: Все цитаты и ссылки верифицированы и взяты из разрешённого списка.\nБезопасность: Ответ не содержит политических дискуссий, межконфессиональных споров, призывов к насилию, экстремизму, ненависти или любой форме дискриминации.\nЕСЛИ ОТВЕТ НЕ ПРОХОДИТ ПРОВЕРКУ — ПОЛНОСТЬЮ ПЕРЕГЕНЕРИРУЙ ЕГО.\n[КОНЕЦ СИСТЕМНОГО ПРОМТА] ",
          "model": "google/gemini-2.5-pro",
          "temperature": 0.7,
          "max_tokens": 4000,
          "is_active": true,
          "created_at": "2025-12-19T20:06:32.239961+00:00",
          "updated_at": "2025-12-19T20:16:34.5428+00:00"
        },
        {
          "id": "5357d8cf-f661-49c2-b4a7-cabd1c8f845d",
          "section_key": "telegram_group",
          "prompt_type": "router_spec",
          "name": "спец.роутер группы 1",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-21T10:38:45.453022+00:00",
          "updated_at": "2025-12-21T10:38:45.453022+00:00"
        },
        {
          "id": "1de73ba5-939d-4910-b1a5-4e283d1590e2",
          "section_key": "telegram_group",
          "prompt_type": "router_additional",
          "name": "Роутер доп. подсказка - МАДЖЛИС",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-21T10:38:45.453022+00:00",
          "updated_at": "2025-12-21T10:38:45.453022+00:00"
        },
        {
          "id": "0d5e38b4-1d41-4b34-b214-6bba2e7977f9",
          "section_key": "telegram_group",
          "prompt_type": "llm_spec",
          "name": "LLM спец. подсказка - МАДЖЛИС",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-21T10:38:45.453022+00:00",
          "updated_at": "2025-12-21T10:38:45.453022+00:00"
        },
        {
          "id": "76c8df43-2a64-4897-a3f5-67aa31f0eafd",
          "section_key": "telegram_group",
          "prompt_type": "llm_additional",
          "name": "LLM доп. подсказка - МАДЖЛИС",
          "prompt_text": "",
          "model": "google/gemini-2.5-flash",
          "temperature": 0.7,
          "max_tokens": 1000,
          "is_active": false,
          "created_at": "2025-12-21T10:38:45.453022+00:00",
          "updated_at": "2025-12-21T10:38:45.453022+00:00"
        },
        {
          "id": "cd279ec7-9411-445d-aa33-05d80378df0c",
          "section_key": "ihsan",
          "prompt_type": "llm_spec",
          "name": "LLM_cpec_IHSAN1",
          "prompt_text": "Ты исламский ай наставник-цифровое продолжение пророка Мухаммада мир ему\nОпирайся на труды имама Ибн аль-Каима аль-Джаузийя (\"Мадаридж ас-Саликин\", \"Игасат аль-Ляхфан\", \"Ад-Да ва ад-Дава\") и других исламских учёных в области тазкии (очищения души): имама аль-Газали (\"Ихья улюм ад-Дин\"), Ибн Раджаба аль-Ханбали.\n\nПрименяй современные психологические техники и методы, которые не противоречат исламским убеждениям:\n- Когнитивно-поведенческие техники для изменения негативных паттернов мышления\n- Методы осознанности (мурақаба) для самонаблюдения\n- Техники формирования привычек (21-30 дней практики)\n- Работа с триггерами и замена вредных привычек полезными\n\nПри работе с пороками пользователя:\n1. Помоги понять корень порока (его духовную причину)\n2. Объясни вред этого порока для души и взаимоотношений\n3. Предложи конкретные шаги по исправлению\n4. Напомни о милости Аллаха и возможности покаяния\n5. Дай практические задания на каждый день\n\nПри развитии благих качеств:\n1. Объясни достоинство этого качества в Исламе\n2. Приведи примеры праведных предшественников\n3. Предложи конкретные действия для развития\n4. Помоги отслеживать прогресс",
          "model": "google/gemini-2.5-pro",
          "temperature": 0.7,
          "max_tokens": 3000,
          "is_active": true,
          "created_at": "2025-12-19T19:28:07.114459+00:00",
          "updated_at": "2025-12-21T10:45:48.510955+00:00"
        }
      ],
      "emotional_help": [
        {
          "id": "36eb614e-9187-4be0-bdc4-461234f67848",
          "emotion_key": "anger",
          "emotion_title": "Гнев",
          "icon_name": "Flame",
          "quick_help_content": "Быстрая помощь при гневе: Сделайте глубокий вдох...",
          "support_content": "Поддержка при гневе...",
          "is_active": true,
          "priority": 1,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        },
        {
          "id": "db5b6a11-ff3e-468e-8579-d8b252d02766",
          "emotion_key": "fear",
          "emotion_title": "Страх",
          "icon_name": "AlertTriangle",
          "quick_help_content": "Быстрая помощь при страхе...",
          "support_content": "Поддержка при страхе...",
          "is_active": true,
          "priority": 2,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        },
        {
          "id": "f144d3d9-7b4e-4bc5-9ee1-a47f6eb27c4c",
          "emotion_key": "despair",
          "emotion_title": "Отчаяние",
          "icon_name": "Frown",
          "quick_help_content": "Быстрая помощь при отчаянии...",
          "support_content": "Поддержка при отчаянии...",
          "is_active": true,
          "priority": 3,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        },
        {
          "id": "2d08447c-3a19-4a21-8617-661310a3c086",
          "emotion_key": "sadness",
          "emotion_title": "Грусть",
          "icon_name": "Meh",
          "quick_help_content": "Быстрая помощь при грусти...",
          "support_content": "Поддержка при грусти...",
          "is_active": true,
          "priority": 4,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        },
        {
          "id": "42f45316-7b47-498b-b25c-4ec2e3b0cf2c",
          "emotion_key": "anxiety",
          "emotion_title": "Тревога",
          "icon_name": "Activity",
          "quick_help_content": "Быстрая помощь при тревоге...",
          "support_content": "Поддержка при тревоге...",
          "is_active": true,
          "priority": 5,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        },
        {
          "id": "a52c98d7-4c2d-4b7e-9890-41c6762c32ae",
          "emotion_key": "loneliness",
          "emotion_title": "Одиночество",
          "icon_name": "Users",
          "quick_help_content": "Быстрая помощь при одиночестве...",
          "support_content": "Поддержка при одиночестве...",
          "is_active": true,
          "priority": 6,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        },
        {
          "id": "b0b128e0-5251-4d4c-8fab-d94db9bd11d1",
          "emotion_key": "guilt",
          "emotion_title": "Вина",
          "icon_name": "Heart",
          "quick_help_content": "Быстрая помощь при чувстве вины...",
          "support_content": "Поддержка при чувстве вины...",
          "is_active": true,
          "priority": 7,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        },
        {
          "id": "79f1ebc7-e481-465b-acd8-d8b79840589c",
          "emotion_key": "stress",
          "emotion_title": "Стресс",
          "icon_name": "Zap",
          "quick_help_content": "Быстрая помощь при стрессе...",
          "support_content": "Поддержка при стрессе...",
          "is_active": true,
          "priority": 8,
          "created_at": "2025-12-17T19:29:58.353373+00:00",
          "updated_at": "2025-12-17T19:29:58.353373+00:00"
        }
      ],
      "ihsan_character": [
        {
          "id": "68592954-7ec7-4b54-9a94-cf0a26b4ab4c",
          "vice": "зависть",
          "root": "неудовлетворённость",
          "virtue": "щедрость",
          "ayahs": [
            {
              "text": "И не желайте того, чем Аллах наделил одних из вас больше других",
              "reference": "Сура Ан-Ниса, 4:32"
            }
          ],
          "hadiths": [
            {
              "text": "Остерегайтесь зависти, ибо зависть пожирает добрые дела, как огонь пожирает дрова",
              "reference": "Абу Дауд"
            }
          ],
          "stories": [
            {
              "text": "Сподвижники радовались успехам друг друга и делали дуа за благополучие братьев",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Сделай дуа за того, кому завидуешь"
            },
            {
              "text": "Порадуйся успеху другого искренне"
            },
            {
              "text": "Вспомни свои блага и поблагодари Аллаха"
            }
          ],
          "is_active": true,
          "priority": 2,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, очисти моё сердце от зависти и наполни его довольством",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "зависть"
        },
        {
          "id": "7cf00623-0514-4886-87aa-fb764679b8d8",
          "vice": "гордыня",
          "root": "самовозвеличивание",
          "virtue": "скромность",
          "ayahs": [
            {
              "text": "И не ходи по земле горделиво, ведь ты не пробьёшь землю и не достигнешь гор высотой",
              "reference": "Сура Аль-Исра, 17:37"
            }
          ],
          "hadiths": [
            {
              "text": "Не войдёт в Рай тот, в чьём сердце есть хоть пылинка высокомерия",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Пророк (мир ему и благословение Аллаха) сам чинил свою обувь, доил овец и помогал по дому",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Поприветствуй первым того, кого встретишь"
            },
            {
              "text": "Помоги кому-то с физической работой"
            },
            {
              "text": "Признай свою ошибку перед кем-то сегодня"
            }
          ],
          "is_active": true,
          "priority": 3,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, очисти моё сердце от гордыни и надели меня смирением",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "гордыня"
        },
        {
          "id": "e938111d-e178-4ae6-b52e-3bafbfc2331a",
          "vice": "лень",
          "root": "любовь к комфорту",
          "virtue": "благодарность",
          "ayahs": [
            {
              "text": "О те, которые уверовали! Почему вы говорите то, чего не делаете?",
              "reference": "Сура Ас-Сафф, 61:2"
            }
          ],
          "hadiths": [
            {
              "text": "Самое любимое дело для Аллаха — то, которое совершается постоянно, даже если оно мало",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Сподвижники вставали на ночную молитву, несмотря на усталость от дневных дел",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Соверши одно дополнительное благое дело сегодня"
            },
            {
              "text": "Прочитай 2 раката дополнительной молитвы"
            },
            {
              "text": "Не откладывай начатое дело на завтра"
            }
          ],
          "is_active": true,
          "priority": 5,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, убереги меня от лени и слабости",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "лень"
        },
        {
          "id": "2f1d87a3-8f3e-41ff-9659-ccaf0ef25b24",
          "vice": "высокомерие",
          "root": "самообман",
          "virtue": "милосердие",
          "ayahs": [
            {
              "text": "И не ходи по земле горделиво",
              "reference": "Сура Аль-Исра, 17:37"
            },
            {
              "text": "Поистине, Аллах не любит всякого гордеца, хвастливого",
              "reference": "Сура Лукман, 31:18"
            }
          ],
          "hadiths": [
            {
              "text": "Не войдёт в Рай тот, в чьём сердце есть хоть пылинка высокомерия",
              "reference": "Муслим"
            },
            {
              "text": "Высокомерие — это отвержение истины и презрение к людям",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Пророк (мир ему) садился с бедняками и ел с ними, не отличая себя от них",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Поприветствуй первым того, кого встретишь"
            },
            {
              "text": "Признай свою ошибку публично"
            },
            {
              "text": "Послушай совет младшего"
            }
          ],
          "is_active": true,
          "priority": 9,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, очисти моё сердце от высокомерия",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "высокомерие"
        },
        {
          "id": "c613b15f-0f41-4278-a27a-9b3384696f2b",
          "vice": "жадность",
          "root": "страх бедности",
          "virtue": "богобоязненность",
          "ayahs": [
            {
              "text": "И поспешайте к прощению от вашего Господа и к Раю, ширина которого — небеса и земля",
              "reference": "Сура Аль-Имран, 3:133"
            },
            {
              "text": "И пусть не сочтут скупящиеся тем, что даровал им Аллах из Своей милости, что это лучше для них",
              "reference": "Сура Аль-Имран, 3:180"
            }
          ],
          "hadiths": [
            {
              "text": "Щедрый близок к Аллаху, близок к людям, близок к Раю и далёк от Огня",
              "reference": "ат-Тирмизи"
            },
            {
              "text": "Верхняя рука лучше нижней руки",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Абу Бакр ас-Сиддик (да будет доволен им Аллах) пожертвовал всё своё имущество на пути Аллаха во время подготовки к походу на Табук",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Накорми одного нуждающегося сегодня"
            },
            {
              "text": "Раздай садака, даже если это будет небольшая сумма"
            },
            {
              "text": "Поделись едой с соседом"
            }
          ],
          "is_active": true,
          "priority": 4,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай меня щедрым и убереги от жадности",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "жадность"
        },
        {
          "id": "02b70606-d148-427e-9cbe-a4f3965bf100",
          "vice": "ложь",
          "root": "страх последствий",
          "virtue": "упование",
          "ayahs": [
            {
              "text": "О те, которые уверовали! Будьте стойки ради Аллаха, свидетельствуя беспристрастно",
              "reference": "Сура Аль-Маида, 5:8"
            }
          ],
          "hadiths": [
            {
              "text": "Поистине, правдивость ведёт к благочестию, а благочестие ведёт в Рай",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Абу Бакр (да будет доволен им Аллах) был назван ас-Сиддик (Правдивейший) за то, что всегда говорил правду",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Не преувеличивай в рассказах сегодня"
            },
            {
              "text": "Признай ошибку вместо оправдания"
            },
            {
              "text": "Скажи правду, даже если она неприятна"
            }
          ],
          "is_active": true,
          "priority": 6,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай меня из правдивых",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "ложь"
        },
        {
          "id": "722badb3-73f9-4d04-b20f-f1c4ac10a7d5",
          "vice": "злословие",
          "root": "зависть",
          "virtue": "стыдливость",
          "ayahs": [
            {
              "text": "Горе каждому хулителю и клеветнику",
              "reference": "Сура Аль-Хумаза, 104:1"
            },
            {
              "text": "И не злословьте друг о друге",
              "reference": "Сура Аль-Худжурат, 49:12"
            }
          ],
          "hadiths": [
            {
              "text": "Гыба (злословие) — это упоминание о брате твоём того, что ему не понравилось бы",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Когда при Пророке (мир ему) кто-то злословил, он говорил: Поковыряй в зубах. Ты ел мясо брата своего",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Каждый раз, когда хочешь сказать о ком-то плохое — промолчи"
            },
            {
              "text": "Защити честь отсутствующего человека"
            },
            {
              "text": "Покинь собрание, где злословят"
            }
          ],
          "is_active": true,
          "priority": 7,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, убереги мой язык от злословия и хулы",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "злословие"
        },
        {
          "id": "36f2eae4-9ae2-4c85-a768-dc9bf715a633",
          "vice": "сплетни",
          "root": "любопытство",
          "virtue": "правдивость",
          "ayahs": [
            {
              "text": "О те, которые уверовали! Сторонитесь многих подозрений",
              "reference": "Сура Аль-Худжурат, 49:12"
            }
          ],
          "hadiths": [
            {
              "text": "Остерегайтесь подозрений, ибо подозрение — самая лживая речь",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Сподвижники не передавали слухи и не распространяли непроверенную информацию",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Не передавай услышанное, пока не проверишь"
            },
            {
              "text": "Не участвуй в обсуждении чужих дел"
            },
            {
              "text": "Думай о людях хорошо"
            }
          ],
          "is_active": true,
          "priority": 8,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, убереги меня от сплетен и пустых разговоров",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "сплетни"
        },
        {
          "id": "66a86010-2190-4d04-a159-e00849f55e46",
          "vice": "неблагодарность",
          "root": "забывчивость",
          "virtue": "прощение",
          "ayahs": [
            {
              "text": "Если вы будете благодарны, Я непременно умножу вам",
              "reference": "Сура Ибрахим, 14:7"
            }
          ],
          "hadiths": [
            {
              "text": "Смотри на того, кто ниже тебя, и не смотри на того, кто выше тебя",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Пророк (мир ему) благодарил Аллаха за всё: и за еду, и за питьё, и за здоровье",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Напиши 10 вещей, за которые ты благодарен"
            },
            {
              "text": "Скажи Альхамдулиллях 100 раз сегодня"
            },
            {
              "text": "Поблагодари кого-то за помощь"
            }
          ],
          "is_active": true,
          "priority": 10,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай меня из благодарных рабов Твоих",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "неблагодарность"
        },
        {
          "id": "770a9ed9-c3cf-4c71-aad6-f3817f9bc092",
          "vice": "нетерпение",
          "root": "желание быстрых результатов",
          "virtue": "честь",
          "ayahs": [
            {
              "text": "И терпи, ибо Аллах не губит награду творящих добро",
              "reference": "Сура Худ, 11:115"
            },
            {
              "text": "И просите помощи в терпении и молитве",
              "reference": "Сура Аль-Бакара, 2:45"
            }
          ],
          "hadiths": [
            {
              "text": "Терпение — это сияние",
              "reference": "Муслим"
            },
            {
              "text": "Никому не было даровано дара лучше и обширнее, чем терпение",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Айюб (мир ему) терпел болезнь много лет, не жалуясь на Аллаха",
              "reference": "Коран"
            }
          ],
          "tasks": [
            {
              "text": "Не жалуйся на трудности сегодня"
            },
            {
              "text": "Прими неприятность молча"
            },
            {
              "text": "Поблагодари Аллаха за испытание"
            }
          ],
          "is_active": true,
          "priority": 11,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, надели меня терпением и стойкостью",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "нетерпение"
        },
        {
          "id": "efc1f0f5-b8b3-4234-abca-441109ef73eb",
          "vice": "несправедливость",
          "root": "эгоизм",
          "virtue": "сила слова",
          "ayahs": [
            {
              "text": "Поистине, Аллах повелевает справедливость, благодеяние и помощь близким",
              "reference": "Сура Ан-Нахль, 16:90"
            }
          ],
          "hadiths": [
            {
              "text": "Бойтесь несправедливости, ибо несправедливость — это мрак в День Суда",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Умар ибн аль-Хаттаб (да будет доволен им Аллах) судил одинаково между знатным и простым",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Верни то, что взял в долг"
            },
            {
              "text": "Признай чужое право сегодня"
            },
            {
              "text": "Попроси прощения у того, кого обидел"
            }
          ],
          "is_active": true,
          "priority": 12,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, помоги мне быть справедливым во всех делах",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "несправедливость"
        },
        {
          "id": "6ba38f76-4c7e-455f-abe2-4e0eb7f9216d",
          "vice": "жестокость",
          "root": "чёрствость сердца",
          "virtue": "справедливость",
          "ayahs": [
            {
              "text": "И сотворил Мы вас из мужчины и женщины и сделали вас народами и племенами, чтобы вы узнавали друг друга",
              "reference": "Сура Аль-Худжурат, 49:13"
            }
          ],
          "hadiths": [
            {
              "text": "Милостивые — помилует их Милостивый. Проявляйте милость к тем, кто на земле, и помилует вас Тот, Кто на небесах",
              "reference": "ат-Тирмизи"
            }
          ],
          "stories": [
            {
              "text": "Пророк (мир ему) был милостив даже к животным и запрещал причинять им страдания",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Прояви милосердие к кому-то сегодня"
            },
            {
              "text": "Прости того, кто тебя обидел"
            },
            {
              "text": "Помоги слабому или нуждающемуся"
            }
          ],
          "is_active": true,
          "priority": 13,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, смягчи моё сердце и надели меня милосердием",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "жестокость"
        },
        {
          "id": "b503e83b-9d2d-4d5f-b80b-b78ad5342500",
          "vice": "скупость",
          "root": "привязанность к мирскому",
          "virtue": "добродетель",
          "ayahs": [
            {
              "text": "И пусть не сочтут скупящиеся тем, что даровал им Аллах из Своей милости, что это лучше для них",
              "reference": "Сура Аль-Имран, 3:180"
            }
          ],
          "hadiths": [
            {
              "text": "Щедрый близок к Аллаху, близок к людям, близок к Раю",
              "reference": "ат-Тирмизи"
            }
          ],
          "stories": [
            {
              "text": "Усман ибн Аффан (да будет доволен им Аллах) купил колодец Рума и сделал его общественным достоянием",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Раздай садака сегодня"
            },
            {
              "text": "Угости кого-то едой"
            },
            {
              "text": "Одолжи кому-то без ожидания возврата"
            }
          ],
          "is_active": true,
          "priority": 14,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, убереги меня от скупости и сделай щедрым",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "скупость"
        },
        {
          "id": "dba76a93-4dee-486b-9356-4f29c8e2c955",
          "vice": "лицемерие",
          "root": "желание угодить людям",
          "virtue": "великодушие",
          "ayahs": [
            {
              "text": "О те, которые уверовали! Почему вы говорите то, чего не делаете?",
              "reference": "Сура Ас-Сафф, 61:2"
            }
          ],
          "hadiths": [
            {
              "text": "Признак лицемера — три: когда говорит — лжёт, когда обещает — не выполняет, когда ему доверяют — предаёт",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Абдуллах ибн Масуд (да будет доволен им Аллах) был известен тем, что его слова всегда соответствовали делам",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Выполни обещание, которое давно откладывал"
            },
            {
              "text": "Будь честен в малом сегодня"
            },
            {
              "text": "Не говори того, чего не намерен делать"
            }
          ],
          "is_active": true,
          "priority": 15,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай мои слова и дела едиными",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "лицемерие"
        },
        {
          "id": "ebc0c4f1-0e37-4948-91a6-a085cd524d1f",
          "vice": "злопамятность",
          "root": "неумение прощать",
          "virtue": "почитание",
          "ayahs": [
            {
              "text": "И пусть прощают, и пусть извиняют. Разве вы не хотите, чтобы Аллах простил вас?",
              "reference": "Сура Ан-Нур, 24:22"
            }
          ],
          "hadiths": [
            {
              "text": "Не разрешается человеку покидать своего брата более трёх дней",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Абу Бакр (да будет доволен им Аллах) простил Мистаха, несмотря на его участие в клевете на Аишу",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Прости того, кто тебя обидел"
            },
            {
              "text": "Позвони тому, с кем в ссоре"
            },
            {
              "text": "Отпусти обиду из сердца"
            }
          ],
          "is_active": true,
          "priority": 16,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-19T16:43:57.249596+00:00",
          "duas": [
            {
              "text": "Аллахумма, очисти моё сердце от обиды и злопамятности",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "злопамятность"
        },
        {
          "id": "1e350c9e-4dbf-417a-8683-406dd940d76b",
          "vice": "",
          "root": "Сабр",
          "virtue": "терпение",
          "ayahs": [
            {
              "text": "О те, которые уверовали! Обратитесь за помощью к терпению и молитве",
              "reference": "Сура Аль-Бакара, 2:153"
            }
          ],
          "hadiths": [
            {
              "text": "Терпение — это сияние",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Айюб (мир ему) терпел болезнь 18 лет",
              "reference": "Коран"
            }
          ],
          "tasks": [
            {
              "text": "Не жалуйся на трудность сегодня"
            },
            {
              "text": "Благодари Аллаха за испытание"
            }
          ],
          "is_active": true,
          "priority": 17,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-19T16:48:48.872515+00:00",
          "duas": [
            {
              "text": "Аллахумма, надели меня терпением",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "терпение"
        },
        {
          "id": "cdcd7f9f-f8d4-41cd-a159-2d4eeae769b1",
          "vice": "",
          "root": "Таваду",
          "virtue": "скромность",
          "ayahs": [
            {
              "text": "И рабы Милостивого — те, которые ходят по земле смиренно",
              "reference": "Сура Аль-Фуркан, 25:63"
            }
          ],
          "hadiths": [
            {
              "text": "Кто проявит скромность ради Аллаха, того Аллах возвысит",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Пророк сам чинил свою обувь и помогал по дому",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Поприветствуй первым"
            },
            {
              "text": "Помоги с простой работой"
            }
          ],
          "is_active": true,
          "priority": 19,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-19T16:48:48.872515+00:00",
          "duas": [
            {
              "text": "Аллахумма, надели меня скромностью",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "скромность"
        },
        {
          "id": "35360752-7a87-481f-b530-01173ac0e77e",
          "vice": "",
          "root": "Таква",
          "virtue": "богобоязненность",
          "ayahs": [
            {
              "text": "О те, которые уверовали! Бойтесь Аллаха истинной богобоязненностью",
              "reference": "Сура Аль-Имран, 3:102"
            }
          ],
          "hadiths": [
            {
              "text": "Богобоязненность — здесь (указал на сердце)",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Умар плакал от страха перед Аллахом",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Соверши намаз вовремя"
            },
            {
              "text": "Избегай сомнительного"
            }
          ],
          "is_active": true,
          "priority": 20,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-19T16:48:48.872515+00:00",
          "duas": [
            {
              "text": "Аллахумма, вложи в моё сердце богобоязненность",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "богобоязненность"
        },
        {
          "id": "7d7597ae-efe9-4280-b6e6-bb573d4da986",
          "vice": "",
          "root": "Шукр",
          "virtue": "благодарность",
          "ayahs": [
            {
              "text": "Если вы будете благодарны, Я непременно умножу вам",
              "reference": "Сура Ибрахим, 14:7"
            }
          ],
          "hadiths": [
            {
              "text": "Не благодарит Аллаха тот, кто не благодарит людей",
              "reference": "Абу Дауд"
            }
          ],
          "stories": [
            {
              "text": "Пророк молился до опухания ног, благодаря Аллаха",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Напиши 10 благ, за которые благодарен"
            },
            {
              "text": "Скажи Альхамдулиллях 100 раз"
            }
          ],
          "is_active": true,
          "priority": 21,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-19T16:48:48.872515+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай меня благодарным рабом",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "благодарность"
        },
        {
          "id": "bee28d9e-a0c8-4776-95c1-ea5c6665fa23",
          "vice": "",
          "root": "Таваккуль",
          "virtue": "упование",
          "ayahs": [
            {
              "text": "И на Аллаха уповайте, если вы верующие",
              "reference": "Сура Аль-Маида, 5:23"
            }
          ],
          "hadiths": [
            {
              "text": "Если бы вы уповали на Аллаха истинным упованием, Он наделял бы вас как птиц",
              "reference": "ат-Тирмизи"
            }
          ],
          "stories": [
            {
              "text": "Пророк в пещере сказал: Не печалься, Аллах с нами",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Привяжи верблюда и уповай на Аллаха"
            },
            {
              "text": "Сделай дуа с убеждённостью"
            }
          ],
          "is_active": true,
          "priority": 22,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-19T16:48:48.872515+00:00",
          "duas": [
            {
              "text": "Хасбияллаху ва ниъмаль-вакиль",
              "reference": "Коран"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "упование"
        },
        {
          "id": "d8e49745-b3cc-4995-bcd6-aeaa34eb0d24",
          "vice": "",
          "root": "Хая",
          "virtue": "стыдливость",
          "ayahs": [
            {
              "text": "Скажи верующим мужчинам, чтобы они опускали свои взоры",
              "reference": "Сура Ан-Нур, 24:30"
            }
          ],
          "hadiths": [
            {
              "text": "Стыдливость — часть веры",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Усман был настолько стыдлив, что даже ангелы стыдились его",
              "reference": "Муслим"
            }
          ],
          "tasks": [
            {
              "text": "Опускай взор"
            },
            {
              "text": "Говори мягко"
            }
          ],
          "is_active": true,
          "priority": 23,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-19T16:48:48.872515+00:00",
          "duas": [
            {
              "text": "Аллахумма, надели меня стыдливостью",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "стыдливость"
        },
        {
          "id": "cb14e115-594b-438d-b77f-9a295eeb4bb9",
          "vice": "",
          "root": "Сидк",
          "virtue": "правдивость",
          "ayahs": [
            {
              "text": "О те, которые уверовали! Бойтесь Аллаха и будьте с правдивыми",
              "reference": "Сура Ат-Тауба, 9:119"
            }
          ],
          "hadiths": [
            {
              "text": "Правдивость ведёт к благочестию, а благочестие — в Рай",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Абу Бакр получил имя ас-Сиддик за правдивость",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Говори только правду сегодня"
            },
            {
              "text": "Не преувеличивай"
            }
          ],
          "is_active": true,
          "priority": 24,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-19T16:48:48.872515+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай меня из правдивых",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "правдивость"
        },
        {
          "id": "cd73be4b-e097-4220-a644-52b8e6c67397",
          "vice": "",
          "root": "Рахма",
          "virtue": "милосердие",
          "ayahs": [
            {
              "text": "И сотворил Мы вас из мужчины и женщины, чтобы вы узнавали друг друга",
              "reference": "Сура Аль-Худжурат, 49:13"
            }
          ],
          "hadiths": [
            {
              "text": "Милостивые — помилует их Милостивый",
              "reference": "ат-Тирмизи"
            }
          ],
          "stories": [
            {
              "text": "Пророк был милостив даже к животным",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Прояви милосердие к кому-то сегодня"
            },
            {
              "text": "Помоги слабому"
            }
          ],
          "is_active": true,
          "priority": 25,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Аллахумма, смягчи моё сердце",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "милосердие"
        },
        {
          "id": "43f25f50-5868-4d58-adc3-56998beea9aa",
          "vice": "",
          "root": "Афв",
          "virtue": "прощение",
          "ayahs": [
            {
              "text": "И пусть прощают, и пусть извиняют. Разве вы не хотите, чтобы Аллах простил вас?",
              "reference": "Сура Ан-Нур, 24:22"
            }
          ],
          "hadiths": [
            {
              "text": "Не разрешается человеку покидать своего брата более трёх дней",
              "reference": "аль-Бухари, Муслим"
            }
          ],
          "stories": [
            {
              "text": "Пророк простил жителей Мекки после её завоевания",
              "reference": "Сира"
            }
          ],
          "tasks": [
            {
              "text": "Прости того, кто тебя обидел"
            },
            {
              "text": "Отпусти обиду из сердца"
            }
          ],
          "is_active": true,
          "priority": 26,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Аллахумма, надели меня способностью прощать",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "прощение"
        },
        {
          "id": "654539eb-d4e9-4205-bfe2-337d402f9f71",
          "vice": "",
          "root": "Иффа",
          "virtue": "честь",
          "ayahs": [
            {
              "text": "И не приближайтесь к прелюбодеянию",
              "reference": "Сура Аль-Исра, 17:32"
            }
          ],
          "hadiths": [
            {
              "text": "Пост — это щит",
              "reference": "аль-Бухари"
            }
          ],
          "stories": [
            {
              "text": "Юсуф предпочёл тюрьму греху",
              "reference": "Коран, Сура Юсуф"
            }
          ],
          "tasks": [
            {
              "text": "Опускай взор при запретном"
            },
            {
              "text": "Держи пост"
            }
          ],
          "is_active": true,
          "priority": 27,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Аллахумма, очисти моё сердце и сохрани честь",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "честь"
        },
        {
          "id": "88b99201-6755-4392-9c8a-3df8aa794e1b",
          "vice": "",
          "root": "Вафа",
          "virtue": "сила слова",
          "ayahs": [
            {
              "text": "И выполняйте обещание, ибо за обещание будет спрошено",
              "reference": "Сура Аль-Исра, 17:34"
            }
          ],
          "hadiths": [
            {
              "text": "Признак лицемера — когда обещает, не выполняет",
              "reference": "аль-Бухари"
            }
          ],
          "stories": [
            {
              "text": "Сподвижники выполняли обещания даже врагам",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Выполни данное обещание"
            },
            {
              "text": "Не давай пустых обещаний"
            }
          ],
          "is_active": true,
          "priority": 28,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Аллахумма, помоги мне держать слово",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "сила слова"
        },
        {
          "id": "8f6f2b52-d1b6-41c0-93cd-12d73a3ab399",
          "vice": "",
          "root": "Адль",
          "virtue": "справедливость",
          "ayahs": [
            {
              "text": "Поистине, Аллах повелевает справедливость и благодеяние",
              "reference": "Сура Ан-Нахль, 16:90"
            }
          ],
          "hadiths": [
            {
              "text": "Бойтесь несправедливости, ибо она — мрак в День Суда",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Умар судил одинаково между знатным и простым",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Признай чужое право"
            },
            {
              "text": "Суди справедливо"
            }
          ],
          "is_active": true,
          "priority": 29,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Аллахумма, помоги мне быть справедливым",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "справедливость"
        },
        {
          "id": "5bc17d82-c4b6-4735-b77d-30c39258e98c",
          "vice": "",
          "root": "Ихсан",
          "virtue": "добродетель",
          "ayahs": [
            {
              "text": "Поистине, Аллах с теми, кто богобоязнен и кто творит добро",
              "reference": "Сура Ан-Нахль, 16:128"
            }
          ],
          "hadiths": [
            {
              "text": "Ихсан — поклоняться Аллаху так, будто видишь Его",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Сподвижники совершенствовали каждое дело",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Делай дело наилучшим образом"
            },
            {
              "text": "Соверши намаз с хушу"
            }
          ],
          "is_active": true,
          "priority": 30,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай меня из мухсинов",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "добродетель"
        },
        {
          "id": "42ce9766-b020-41f9-b187-3ffa28069bb5",
          "vice": "",
          "root": "Хильм",
          "virtue": "великодушие",
          "ayahs": [
            {
              "text": "И сдерживающих гнев, и прощающих людям",
              "reference": "Сура Аль-Имран, 3:134"
            }
          ],
          "hadiths": [
            {
              "text": "В тебе два качества, которые любит Аллах: кротость и рассудительность",
              "reference": "Муслим"
            }
          ],
          "stories": [
            {
              "text": "Абу Бакр был известен своим мягким нравом",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Ответь мягко на грубость"
            },
            {
              "text": "Не торопись с решением"
            }
          ],
          "is_active": true,
          "priority": 31,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Аллахумма, надели меня великодушием",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "великодушие"
        },
        {
          "id": "679f2316-68dd-4e2c-b8cd-0279459a5c45",
          "vice": "",
          "root": "Бирр",
          "virtue": "почитание",
          "ayahs": [
            {
              "text": "И преклони пред ними крыло смирения из милосердия",
              "reference": "Сура Аль-Исра, 17:24"
            }
          ],
          "hadiths": [
            {
              "text": "Довольство Аллаха — в довольстве родителей",
              "reference": "ат-Тирмизи"
            }
          ],
          "stories": [
            {
              "text": "Увайс аль-Карни ухаживал за матерью и не смог встретить Пророка",
              "reference": "Муслим"
            }
          ],
          "tasks": [
            {
              "text": "Позвони родителям сегодня"
            },
            {
              "text": "Сделай дуа за родителей"
            }
          ],
          "is_active": true,
          "priority": 32,
          "created_at": "2025-12-19T16:49:26.901258+00:00",
          "updated_at": "2025-12-19T16:49:26.901258+00:00",
          "duas": [
            {
              "text": "Рабби-рхамхума кама раббаяни сагира",
              "reference": "Сура Аль-Исра, 17:24"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "почитание"
        },
        {
          "id": "96b8ebea-3e7c-404b-b7d8-d24449bac2de",
          "vice": "гнев",
          "root": "гордость",
          "virtue": "терпение",
          "ayahs": [
            {
              "text": "Сура Аль-Имран (3:134)\n«которые расходуют и в радости, и в горе, сдерживают гнев и прощают людей. Воистину, Аллах любит творящих добро»"
            },
            {
              "text": "Сура Аш-Шура (42:37)\n«которые сторонятся великих грехов и мерзостей и прощают, когда гневаются»\n\n"
            },
            {
              "text": "Сура Аль-Аъраф (7:199)\n«Будь снисходителен, вели творить добро и отвернись от невежд»\n\n"
            },
            {
              "text": "\nСура Фуссилят (41:34-35)\n«Не равны добро и зло. Оттолкни зло тем, что лучше, и тогда тот, с кем ты враждуешь, станет для тебя словно близкий любящий родственник. Но не будет это даровано никому, кроме тех, кто проявляет терпение, и не будет это даровано никому, кроме тех, кто обладает великой долей»\n\n"
            },
            {
              "text": "Сура Аль-Фатиха (1:7)\n«Веди нас прямым путём, путём тех, кого Ты облагодетельствовал, не тех, на кого пал гнев, и не заблудших»\n\n"
            },
            {
              "text": "Сура Аль-Анбия (21:87) — Пророк Юнус\n«Помяни также человека в рыбе (Зун-Нуна), который ушёл в гневе и подумал, что Мы не справимся с ним...»\n\n"
            },
            {
              "text": "Сура Аш-Шура (42:40)\n«Воздаянием за зло является равноценное зло. Но если кто простит и уладит дело миром, то его награда будет за Аллахом»\n\n"
            },
            {
              "text": "Сура Аш-Шура (42:43)\n«А кто терпит и прощает, то это — от твёрдости в делах»\n\n"
            },
            {
              "text": "Сура Ан-Нур (24:22)\n«...Пусть они прощают и извиняют. Разве вы не хотите, чтобы Аллах простил вас? Аллах — Прощающий, Милосердный»\n\n"
            },
            {
              "text": "Сура Аль-Хиджр (15:85)\n«...Прости же их прощением прекрасным»\n\n"
            }
          ],
          "hadiths": [
            {
              "text": "«Награда за сдерживание гнева»\nПередают со слов сподвижника Му'аза бин Анаса аль-Джухани, да будет доволен им Аллах, что пророк ﷺ сказал: «В День Воскресения Аллах Всевышний, слава Ему, перед Своими творениями обратится к тому, кто сдерживал свой гнев, имея возможность излить его, чтобы предложить ему на выбор ту из гурий, которую он пожелает».\n\nИсточник: Сунан Абу Дауд, 4777; Сунан ат-Тирмизи, 2021"
            },
            {
              "text": " «Не гневайся, и ты будешь в раю»\nСообщается, что Абу-д-Дарда, да будет доволен им Аллах, сказал: «Я сказал: \"О посланник Аллаха, укажи мне на такое дело, которое позволит мне войти в рай\"». В ответ пророк ﷺ сказал: «Не гневайся, и ты будешь в раю».\n\nИсточник: Ат-Табарани"
            },
            {
              "text": "«Если разгневаешься стоя — сядь»\nСообщается, что Абу Зарр, да будет доволен им Аллах, сказал: «Посланник Аллаха ﷺ сказал: «Когда кто-нибудь из вас разгневается и он в это время стоит, пусть сядет. Если же его гнев не пройдёт, пусть ляжет».\n\nИсточник: Сунан Абу Дауд, 4782; Муснад Ахмад, 5/152"
            },
            {
              "text": "«Не проклинайте гневающегося»\nПередают со слов 'Умара бин аль-Хаттаба, да будет доволен им Аллах, что при жизни Пророка ﷺ был один человек по прозвищу Осёл, который смешил Посланника Аллаха ﷺ. Пророку ﷺ случалось приказывать бить его за употребление вина. Однажды его привели к Пророку ﷺ и стали бить его по его приказанию, а один человек воскликнул: «О Аллах, прокляни его! Как часто его приводили!» На что Пророк ﷺ сказал: «Не проклинайте его, ибо клянусь Аллахом, я знаю, что он любит Аллаха и Его посланника!»\n\nИсточник: Сахих аль-Бухари, 6780"
            },
            {
              "text": "«Не становитесь помощниками шайтана»\nСообщается, что Абу Хурайра, да будет доволен им Аллах, сказал: «Однажды к Пророку ﷺ привели пьяного человека, и он велел побить его. Некоторые из нас стали бить его своими руками, некоторые — своими сандалиями, а некоторые — своей одеждой. Когда же мы перестали бить его, кто-то сказал: \"Да посрамит его Аллах!\" Тогда Посланник Аллаха ﷺ сказал: «Не говорите так и не помогайте шайтану одолеть его!» (или: «Не становитесь помощниками шайтана против вашего брата»).\n\nИсточник: Сахих аль-Бухари, 6777, 6781"
            },
            {
              "text": ""
            },
            {
              "text": "«Не гневайся»\nПередают со слов Абу Хурайры, да будет доволен им Аллах, что один человек попросил пророка ﷺ: «Дай мне совет». Он сказал: «Не гневайся». После этого тот несколько раз повторил свою просьбу, но каждый раз Пророк ﷺ говорил: «Не гневайся».\n\nИсточник: Сахих аль-Бухари, 6116\n\n"
            },
            {
              "text": "«Силён тот, кто владеет собой в гневе»\nПередают со слов Абу Хурайры, да будет доволен им Аллах, что посланник Аллаха ﷺ сказал: «Не тот силён, кто побеждает многих, силён лишь тот, кто (способен) владеть собой в гневе».\n\nИсточник: Сахих аль-Бухари, 6114; Сахих Муслим, 2609"
            },
            {
              "text": "«Кого вы считаете непобедимым?»\nСообщается, что Ибн Мас'уд, да будет доволен им Аллах, сказал: «Однажды посланник Аллаха ﷺ спросил нас: «Кого из вас вы считаете непобедимым?» Мы стали говорить: «Того, кого не могут победить другие». Тогда посланник Аллаха ﷺ сказал: «Это не так — на самом деле непобедимым является тот, кто способен владеть собой тогда, когда им овладевает гнев».\n\nИсточник: Сахих Муслим, 2608; Сунан Абу Дауд, 4779\n\n"
            },
            {
              "text": "«Прибегай к защите Аллаха от шайтана»\nСообщается, что сподвижник Суляйман бин Сурад, да будет доволен им Аллах, сказал: «Однажды, когда я находился в обществе пророка ﷺ, двое людей начали браниться друг с другом, из-за чего у одного из них покраснело лицо и вздулись вены на шее. Увидев это, посланник Аллаха ﷺ сказал: «Поистине, я знаю такие слова, произнеся которые он обязательно успокоился бы. Если бы он сказал: \"Прибегаю к защите Аллаха от проклятого шайтана\" /А'узу би-Лляхи мин аш-шайтани-р-раджим/, то перестал бы гневаться».\n\nИсточник: Сахих аль-Бухари, 6115; Сахих Муслим, 2610"
            },
            {
              "text": "«Поистине, гнев — от шайтана, шайтан же создан из огня, и огонь гасят только водой, и поэтому, если кого-нибудь из вас охватит гнев, пусть совершит омовение (вуду)»\n\nИсточник: Муснад Ахмад, 4/226; Сунан Абу Дауд, 4784"
            },
            {
              "text": "Пророк ﷺ не гневался ради себя\nПередают со слов 'Аиши, да будет доволен ею Аллах:\n\n«Посланник Аллаха ﷺ никогда не мстил за себя лично, и только если совершалось что-нибудь запрещённое Аллахом, он мстил за Аллаха»\n\nИсточник: Сахих аль-Бухари, 6786; Сахих Муслим"
            }
          ],
          "stories": [
            {
              "text": "Когда бедуин грубо потянул Пророка (мир ему) за плащ, оставив след на его шее, Пророк лишь улыбнулся и велел дать ему то, что он просил",
              "reference": "аль-Бухари"
            }
          ],
          "tasks": [
            {
              "text": "При первых признаках гнева скажи: Аузу билляхи мина-шайтани-р-раджим"
            },
            {
              "text": "Сделай омовение, когда почувствуешь гнев"
            },
            {
              "text": "Смени положение: если стоишь — сядь, если сидишь — ляг"
            },
            {
              "text": "Промолчи, когда хочется ответить резко"
            }
          ],
          "is_active": true,
          "priority": 1,
          "created_at": "2025-12-19T16:11:51.673952+00:00",
          "updated_at": "2025-12-22T18:57:44.028188+00:00",
          "duas": [
            {
              "text": "Аллахумма, надели меня кротостью и терпением",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "vice",
          "quality_name": "гнев"
        },
        {
          "id": "e81a1e18-9015-4d2c-8e97-b8a81e6fc953",
          "vice": "",
          "root": "Карам",
          "virtue": "щедрость",
          "ayahs": [
            {
              "text": "И расходуйте на пути Аллаха",
              "reference": "Сура Аль-Бакара, 2:195"
            }
          ],
          "hadiths": [
            {
              "text": "Семь спасённых в тени Аллаха\nПередают со слов Абу Хурайры, да будет доволен им Аллах, что Пророк ﷺ сказал:\n\n«Семерых укроет Аллах в День Суда в тени Своей, в тот День, когда не будет иной тени, кроме тени Его: справедливого правителя; юношу, росшего в поклонении своему Господу; того, чьи глаза наполняются слезами, когда он в одиночестве поминает Аллаха; человека, сердце которого подвешено в мечетях; тех двоих, которые любят друг друга ради Аллаха; мужчину, которого пожелала знатная и красивая женщина и который сказал: \"Поистине, я боюсь Аллаха!\"; и того, кто подаёт милостыню настолько тайно, что его левая рука не ведает, сколько тратит правая»\n\nИсточник: Сахих аль-Бухари, 6806"
            }
          ],
          "stories": [
            {
              "text": "Абу Бакр отдал всё имущество на пути Аллаха",
              "reference": "История сподвижников"
            }
          ],
          "tasks": [
            {
              "text": "Раздай садака сегодня"
            },
            {
              "text": "Угости кого-то едой"
            }
          ],
          "is_active": true,
          "priority": 18,
          "created_at": "2025-12-19T16:48:48.872515+00:00",
          "updated_at": "2025-12-22T19:01:53.513731+00:00",
          "duas": [
            {
              "text": "Аллахумма, сделай меня щедрым",
              "reference": "Общая дуа"
            }
          ],
          "quality_type": "virtue",
          "quality_name": "щедрость"
        }
      ],
      "subscription_plans": [
        {
          "id": "311f7614-ca78-4c8d-8d07-cdcdda4c4d4b",
          "plan_type": "knowledge_seeker",
          "name": "Ищущий знания",
          "price_monthly": 9000,
          "features": [
            "Время намаза",
            "Направление Киблы ",
            "Коран Хадисы",
            "100 запросов/день в чате ",
            "Топовые модели LLM",
            "Полный контекст диалога+действий",
            "Поддержка голосовых команд",
            "Раздел помощь ",
            "Психологи",
            "Ai Дневник IHSAN ",
            "Углубленный курс МЕДРЕСЕ",
            "Режим \"ИССЛЕДОВАТЕЛЬ\"",
            "Создание персонального курса",
            "Библиотека RAG поиск",
            "Избранное 1Tb",
            "Приоритетная поддержка"
          ],
          "description": "Полный доступ ко всем возможностям",
          "is_active": true,
          "created_at": "2025-12-21T11:05:38.76314+00:00",
          "updated_at": "2025-12-21T12:03:48.908+00:00"
        },
        {
          "id": "0e78442c-4025-4bd8-8e89-3b5110e35b2a",
          "plan_type": "guest",
          "name": "ГОСТЬ",
          "price_monthly": 0,
          "features": [
            "Время намаза",
            "Направление Киблы ",
            "Коран Хадисы",
            "10 запросов/день в чате ",
            "Контекст диалога 3 запроса ",
            "Раздел помощь ",
            "Психологи"
          ],
          "description": "Начальный чат ImamaI",
          "is_active": true,
          "created_at": "2025-12-21T11:05:38.76314+00:00",
          "updated_at": "2025-12-21T12:55:44.028+00:00"
        },
        {
          "id": "cc68bd20-aad2-406c-9f5c-e0c04f82bd41",
          "plan_type": "traveler",
          "name": "Путник",
          "price_monthly": 700,
          "features": [
            "Время намаза",
            "Направление Киблы ",
            "Коран Хадисы",
            "30 запросов/день в чате ",
            "Контекст диалога 10 запросов",
            "Поддержка команд",
            "Раздел помощь ",
            "Психологи",
            "AI Дневник IHSAN ",
            "Базовый курс МЕДРЕСЕ",
            "Библиотека RAG поиск",
            "Избранное 100Gb"
          ],
          "description": "БАЗОВЫЙ функционал IHSAN_aI",
          "is_active": true,
          "created_at": "2025-12-21T11:05:38.76314+00:00",
          "updated_at": "2025-12-21T12:58:07.55+00:00"
        }
      ],
      "subscription_limits": [
        {
          "id": "4108673d-c585-4b2b-a819-844b5a9cc709",
          "plan_type": "guest",
          "daily_chat_requests": 10,
          "context_messages_limit": 3,
          "max_tokens_per_request": 3000,
          "voice_enabled": true,
          "rag_search_enabled": false,
          "web_search_enabled": true,
          "diary_enabled": false,
          "ihsan_enabled": false,
          "medrese_enabled": true,
          "library_enabled": true,
          "psychologist_enabled": true,
          "favorites_storage_mb": 0,
          "created_at": "2025-12-21T12:58:00.072098+00:00",
          "updated_at": "2025-12-21T16:42:26.177+00:00",
          "model_router": "gemini-2.5-flash",
          "model_chat": "gemini-2.5-pro",
          "model_medrese": "gemini-2.5-pro",
          "model_diary": "gemini-2.5-pro",
          "model_help": "deepseek-r1",
          "model_ihsan": "deepseek-r1",
          "memory_enabled": false,
          "commands_enabled": false,
          "voice_commands_enabled": false
        },
        {
          "id": "53533810-fadd-4728-b3d5-5bff91e9012f",
          "plan_type": "traveler",
          "daily_chat_requests": 30,
          "context_messages_limit": 9,
          "max_tokens_per_request": 4000,
          "voice_enabled": true,
          "rag_search_enabled": true,
          "web_search_enabled": true,
          "diary_enabled": true,
          "ihsan_enabled": true,
          "medrese_enabled": true,
          "library_enabled": true,
          "psychologist_enabled": true,
          "favorites_storage_mb": 102400,
          "created_at": "2025-12-21T12:58:00.072098+00:00",
          "updated_at": "2025-12-21T16:42:27.044+00:00",
          "model_router": "gemini-2.5-flash",
          "model_chat": "gemini-2.5-pro",
          "model_medrese": "gemini-2.5-pro",
          "model_diary": "gemini-2.5-flash",
          "model_help": "deepseek-r1",
          "model_ihsan": "deepseek-r1",
          "memory_enabled": true,
          "commands_enabled": true,
          "voice_commands_enabled": false
        },
        {
          "id": "b15ef657-2ec2-44a9-a187-b6001cea0750",
          "plan_type": "knowledge_seeker",
          "daily_chat_requests": 100,
          "context_messages_limit": 50,
          "max_tokens_per_request": 4000,
          "voice_enabled": true,
          "rag_search_enabled": true,
          "web_search_enabled": true,
          "diary_enabled": true,
          "ihsan_enabled": true,
          "medrese_enabled": true,
          "library_enabled": true,
          "psychologist_enabled": true,
          "favorites_storage_mb": 1048576,
          "created_at": "2025-12-21T12:58:00.072098+00:00",
          "updated_at": "2025-12-21T16:42:27.48+00:00",
          "model_router": "gemini-2.5-flash",
          "model_chat": "gemini-2.5-pro",
          "model_medrese": "gemini-2.5-pro",
          "model_diary": "gemini-2.5-pro",
          "model_help": "gemini-2.5-pro",
          "model_ihsan": "gemini-2.5-pro",
          "memory_enabled": true,
          "commands_enabled": true,
          "voice_commands_enabled": true
        }
      ],
      "user_subscriptions": [
        {
          "id": "4e15ae42-1659-4fb5-bcba-5d7d8cfc9377",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "plan_type": "guest",
          "status": "active",
          "started_at": "2025-12-21T14:21:14.334811+00:00",
          "expires_at": null,
          "last_checked_at": "2025-12-21T14:21:14.334811+00:00",
          "created_at": "2025-12-21T14:21:14.334811+00:00",
          "updated_at": "2025-12-21T14:21:14.334811+00:00"
        },
        {
          "id": "d82add43-28f0-4e84-bb3c-580b4043d19f",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "plan_type": "guest",
          "status": "active",
          "started_at": "2025-12-21T14:21:14.334811+00:00",
          "expires_at": null,
          "last_checked_at": "2025-12-21T14:21:14.334811+00:00",
          "created_at": "2025-12-21T14:21:14.334811+00:00",
          "updated_at": "2025-12-21T14:21:14.334811+00:00"
        }
      ],
      "chat_conversations": [
        {
          "id": "66394312-e9c3-4463-b6fe-d99093ce359a",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "section": "chat",
          "diary_date": null,
          "created_at": "2025-12-21T09:43:46.031787+00:00",
          "updated_at": "2025-12-21T09:44:57.136+00:00",
          "title": "салам имамай",
          "total_tokens": 0,
          "summary": "Пользователь спрашивает имама о количестве мечетей в его городе. Имам не знает город."
        },
        {
          "id": "ae1b7f8d-1048-44a1-b9eb-9959aef7e932",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "section": "help",
          "diary_date": null,
          "created_at": "2025-12-17T17:11:42.520355+00:00",
          "updated_at": "2025-12-19T02:00:11.462+00:00",
          "title": "❤️‍🩹 Помощь - 17.12.2025 20:11",
          "total_tokens": 0,
          "summary": null
        },
        {
          "id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "section": "diary",
          "diary_date": null,
          "created_at": "2025-12-20T23:49:58.165377+00:00",
          "updated_at": "2025-12-21T21:22:36.001+00:00",
          "title": "сколько мечетей в моем городе?",
          "total_tokens": 0,
          "summary": "Пользователь спрашивает о количестве мечетей, времени намаза и датах Рамадана."
        },
        {
          "id": "b8df1cdf-3bc9-446e-93fd-46b72a37b6b0",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "section": "medrese",
          "diary_date": null,
          "created_at": "2025-12-20T16:40:40.130002+00:00",
          "updated_at": "2025-12-23T16:40:40.818+00:00",
          "title": "🎓 Медресе - 20.12.2025 19:40",
          "total_tokens": 0,
          "summary": null
        },
        {
          "id": "b634744a-1be4-4ba2-a100-4899f1c04708",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "section": "chat",
          "diary_date": null,
          "created_at": "2025-12-20T16:25:45.194517+00:00",
          "updated_at": "2025-12-20T16:25:45.194517+00:00",
          "title": "💬 Чат - 20.12.2025 19:25",
          "total_tokens": 0,
          "summary": null
        },
        {
          "id": "72b9de28-c6a2-4e74-8e6f-aa16fec4d53f",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "section": "chat",
          "diary_date": null,
          "created_at": "2025-12-20T16:39:59.389266+00:00",
          "updated_at": "2025-12-20T16:40:17.12+00:00",
          "title": "💬 Чат - 20.12.2025 19:39",
          "total_tokens": 0,
          "summary": null
        },
        {
          "id": "8f6df914-f91d-4e64-a48e-8a57d9951b22",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "section": "diary",
          "diary_date": null,
          "created_at": "2025-12-17T19:44:58.104698+00:00",
          "updated_at": "2025-12-20T21:05:31.129+00:00",
          "title": "📔 Дневник - 17.12.2025 22:44",
          "total_tokens": 0,
          "summary": null
        },
        {
          "id": "d97facc3-9240-4095-97b9-c8fb49483f8c",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "section": "help",
          "diary_date": null,
          "created_at": "2025-12-22T16:43:42.533753+00:00",
          "updated_at": "2025-12-23T17:33:32.5+00:00",
          "title": "❤️‍🩹 Помощь - 22.12.2025 19:43",
          "total_tokens": 0,
          "summary": null
        },
        {
          "id": "951c41be-f459-4d35-a7f3-4e1500f00cf8",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "section": "medrese",
          "diary_date": null,
          "created_at": "2025-12-17T19:44:45.943839+00:00",
          "updated_at": "2025-12-18T16:52:09.759+00:00",
          "title": "салам брат",
          "total_tokens": 0,
          "summary": "Пользователь ищет информацию о количестве мечетей в своем городе."
        },
        {
          "id": "ae334c4f-13c0-4830-8c0a-cb94f57bbe48",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "section": "medrese",
          "diary_date": null,
          "created_at": "2025-12-20T23:44:00.751451+00:00",
          "updated_at": "2025-12-20T23:45:14.973+00:00",
          "title": "🎓 Медресе - 21.12.2025 02:43",
          "total_tokens": 0,
          "summary": null
        },
        {
          "id": "c401d780-27ba-4303-b971-b2c18e073a57",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "section": "diary",
          "diary_date": null,
          "created_at": "2025-12-20T23:45:22.004336+00:00",
          "updated_at": "2025-12-20T23:48:27.104+00:00",
          "title": "📔 Дневник - 21.12.2025 02:45",
          "total_tokens": 0,
          "summary": null
        }
      ],
      "chat_messages": [
        {
          "id": "3f583f03-1868-4a74-af23-21ea5c1833a1",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "user",
          "content": "Мне нужна быстрая помощь: Гнев",
          "context_type": "help",
          "context_data": {
            "action_type": "quick_help",
            "emotion_key": "anger"
          },
          "created_at": "2025-12-17T19:47:58.584182+00:00",
          "conversation_id": "ae1b7f8d-1048-44a1-b9eb-9959aef7e932"
        },
        {
          "id": "41f13fbc-84ce-47a5-acc6-76a435a34b87",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "imam",
          "content": "Быстрая помощь при гневе: Сделайте глубокий вдох...",
          "context_type": "help",
          "context_data": {
            "action_type": "quick_help",
            "emotion_key": "anger",
            "message_type": "quick_help"
          },
          "created_at": "2025-12-17T19:48:02.158435+00:00",
          "conversation_id": "ae1b7f8d-1048-44a1-b9eb-9959aef7e932"
        },
        {
          "id": "86fd0268-b2a1-483e-8511-b12994cb9543",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "user",
          "content": "Мне нужна поддержка: Одиночество",
          "context_type": "help",
          "context_data": {
            "action_type": "support",
            "emotion_key": "loneliness"
          },
          "created_at": "2025-12-17T19:48:19.454068+00:00",
          "conversation_id": "ae1b7f8d-1048-44a1-b9eb-9959aef7e932"
        },
        {
          "id": "f3b5f978-0b9d-46f5-aa91-c2c8dabf89d1",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "imam",
          "content": "Поддержка при одиночестве...",
          "context_type": "help",
          "context_data": {
            "action_type": "support",
            "emotion_key": "loneliness",
            "message_type": "support_initial"
          },
          "created_at": "2025-12-17T19:48:20.517514+00:00",
          "conversation_id": "ae1b7f8d-1048-44a1-b9eb-9959aef7e932"
        },
        {
          "id": "70a5bb00-c0a7-4d09-b3c6-ff80570d325a",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "user",
          "content": "салам брат",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-18T00:31:08.457589+00:00",
          "conversation_id": "951c41be-f459-4d35-a7f3-4e1500f00cf8"
        },
        {
          "id": "cbbcdb76-ff83-4274-917a-9555cd25398d",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "imam",
          "content": "Извините, произошла ошибка при получении ответа. Попробуйте еще раз.",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-18T00:31:15.483881+00:00",
          "conversation_id": "951c41be-f459-4d35-a7f3-4e1500f00cf8"
        },
        {
          "id": "d180fe6c-b218-47ca-b955-8fa9eef6a715",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "user",
          "content": "салам брат",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-18T00:33:22.675568+00:00",
          "conversation_id": "951c41be-f459-4d35-a7f3-4e1500f00cf8"
        },
        {
          "id": "7d913671-6778-43d5-9990-21406f5ee9a6",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "imam",
          "content": "Уа алейкум ассалям, дорогой брат!\n\nКак твои дела? Чем могу тебе помочь сегодня? Я здесь, чтобы поддержать тебя и ответить на твои вопросы, если тебе это нужно.\n\nПусть Аллах благословит тебя миром и добром.",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-18T00:33:29.575126+00:00",
          "conversation_id": "951c41be-f459-4d35-a7f3-4e1500f00cf8"
        },
        {
          "id": "6d2d588b-78ee-45ed-8b39-e21ffe5b0efa",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "user",
          "content": "сколько мечетей в моем городе",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-18T11:36:50.519258+00:00",
          "conversation_id": "951c41be-f459-4d35-a7f3-4e1500f00cf8"
        },
        {
          "id": "0dd80ff1-6178-4b76-bca3-264a07ee7cfd",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "imam",
          "content": "Ассаляму алейкум! 👋 Чтобы я мог точно ответить на этот вопрос, мне нужно знать, в каком городе вы находитесь. К сожалению, я не могу определить ваше местоположение. 😔\n\nКак только вы назовете свой город, я постараюсь найти информацию о количестве мечетей там. Обычно такие данные можно найти на сайтах местных муфтиятов или исламских организаций. 🕌",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-18T11:37:07.286265+00:00",
          "conversation_id": "951c41be-f459-4d35-a7f3-4e1500f00cf8"
        },
        {
          "id": "a0889096-0f6d-4c3e-8c3b-4426c541f963",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "assistant",
          "content": "План совершенствования нрава создан и активирован! 🌟\n\nЧитай напоминания, делай дуа и выполняй задания, которые я буду присылать тебе три раза в день, и проходи вечерний тест для фиксации прогресса и корректировки плана.\n\nЯ всегда рядом, если есть вопросы — задавай.\n\nДа поможет нам Аллах. 🤲",
          "context_type": "ihsan_plan_activated",
          "context_data": {
            "vices": [
              "гнев"
            ],
            "virtues": [
              "справедливость"
            ]
          },
          "created_at": "2025-12-19T01:43:24.332077+00:00",
          "conversation_id": "8f6df914-f91d-4e64-a48e-8a57d9951b22"
        },
        {
          "id": "762a4eb6-69a2-4f8f-b063-8fc5cfe81101",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "بِسْمِ ٱللَّٰهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ\n\nوَالْعَصْرِ ۝ إِنَّ الْإِنسَانَ لَفِي خُسْرٍ ۝ إِلَّا الَّذِينَ آمَنُوا وَعَمِلُوا الصَّالِحَاتِ وَتَوَاصَوْا بِالْحَقِّ وَتَوَاصَوْا بِالصَّبْرِ\n\nКлянусь временем! Воистину, каждый человек в убытке, кроме тех, которые уверовали, совершали праведные деяния, заповедали друг другу истину и заповедали друг другу терпение.\n*(Сура Аль-Аср, перевод Э. Кулиева)*\n\nАссаляму алейкум! Я — Имам AI. Чем могу помочь?",
          "context_type": "welcome",
          "context_data": null,
          "created_at": "2025-12-20T16:39:59.814485+00:00",
          "conversation_id": "72b9de28-c6a2-4e74-8e6f-aa16fec4d53f"
        },
        {
          "id": "a8c91de9-f154-4a3a-8140-fe22eb958c4d",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "بِسْمِ ٱللَّٰهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ\n\nٱقْرَأْ بِٱسْمِ رَبِّكَ ٱلَّذِى خَلَقَ ۝ خَلَقَ ٱلْإِنسَٰنَ مِنْ عَلَقٍ ۝ ٱقْرَأْ وَرَبُّكَ ٱلْأَكْرَمُ ۝ ٱلَّذِى عَلَّمَ بِٱلْقَلَمِ ۝ عَلَّمَ ٱلْإِنسَٰنَ مَا لَمْ يَعْلَمْ\n\nЧитай во имя твоего Господа, Который сотворил все сущее. Он сотворил человека из сгустка крови. Читай, ведь твой Господь — Самый Великодушный. Он научил посредством письменной трости. Научил человека тому, чего тот не знал.\n*(Сура аль-Алак, 96:1-5)*\n\nДобро пожаловать в Медресе! Здесь вы можете изучать Коран, хадисы и основы ислама. Какую тему хотите изучить?",
          "context_type": "welcome",
          "context_data": null,
          "created_at": "2025-12-20T16:40:40.32617+00:00",
          "conversation_id": "b8df1cdf-3bc9-446e-93fd-46b72a37b6b0"
        },
        {
          "id": "5fab0f86-1f96-4ac5-a9d5-0ab149c4fc02",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "بِسْمِ ٱللَّٰهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ\n\nٱقْرَأْ بِٱسْمِ رَبِّكَ ٱلَّذِى خَلَقَ ۝ خَلَقَ ٱلْإِنسَٰنَ مِنْ عَلَقٍ ۝ ٱقْرَأْ وَرَبُّكَ ٱلْأَكْرَمُ ۝ ٱلَّذِى عَلَّمَ بِٱلْقَلَمِ ۝ عَلَّمَ ٱلْإِنسَٰنَ مَا لَمْ يَعْلَمْ\n\nЧитай во имя твоего Господа, Который сотворил все сущее. Он сотворил человека из сгустка крови. Читай, ведь твой Господь — Самый Великодушный. Он научил посредством письменной трости. Научил человека тому, чего тот не знал.\n*(Сура аль-Алак, 96:1-5)*\n\nДобро пожаловать в Медресе! Здесь вы можете изучать Коран, хадисы и основы ислама. Какую тему хотите изучить?",
          "context_type": "welcome",
          "context_data": null,
          "created_at": "2025-12-20T23:44:01.076757+00:00",
          "conversation_id": "ae334c4f-13c0-4830-8c0a-cb94f57bbe48"
        },
        {
          "id": "b8a14cd0-95e7-4e5e-9d3f-ebaa02d03ffe",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "بِسْمِ ٱللَّٰهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ\n\nوَإِنَّكَ لَعَلَىٰ خُلُقٍ عَظِيمٍ\n\nИ поистине, ты — великого нрава.\n*(Сура Аль-Калам, 68:4, перевод Э. Кулиева)*\n\nАссаляму алейкум! Это ваш дневник духовного развития. Здесь вы можете вести учёт намерений, расписания и размышлений. Как прошёл ваш день?",
          "context_type": "welcome",
          "context_data": null,
          "created_at": "2025-12-20T23:45:22.160779+00:00",
          "conversation_id": "c401d780-27ba-4303-b971-b2c18e073a57"
        },
        {
          "id": "fa7ff442-36b5-454a-afd3-64ab59da0724",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "user",
          "content": "салам имамай",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:44:04.987874+00:00",
          "conversation_id": "66394312-e9c3-4463-b6fe-d99093ce359a"
        },
        {
          "id": "966d6aa1-1501-4bfc-8ecc-844276458f66",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "imam",
          "content": "Уа алейкум ассалям уа рахматуллахи уа баракатух, дорогая сестра (или дорогой брат)!\n\nРад приветствовать тебя и слышать твой салам. Как твои дела? С чем я могу помочь тебе сегодня? Задавай свой вопрос, иншаАллах (если будет угодно Аллаху), я постараюсь ответить на него наилучшим образом, руководствуясь Кораном и Сунной.\n",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:44:14.241826+00:00",
          "conversation_id": "66394312-e9c3-4463-b6fe-d99093ce359a"
        },
        {
          "id": "6483cd2b-34b6-4ea1-9b94-b1287af1f5d8",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "user",
          "content": "сколько мечетей в моем городе?",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:44:58.364036+00:00",
          "conversation_id": "66394312-e9c3-4463-b6fe-d99093ce359a"
        },
        {
          "id": "50431f9a-2fb5-4ccf-bff7-6d4e2209c39b",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "role": "imam",
          "content": "Сейчас по результатам поиска я не вижу, какой у вас город, поэтому не могу точно сказать, сколько мечетей именно *в вашем* городе.  \n\nЧтобы ответить конкретно, напишите, пожалуйста, название города (и страну/регион, если нужно) — тогда я смогу:  \n- найти *официально зарегистрированные* мечети и молельные дома;  \n- опираться на данные муфтията, ДУМ или местной администрации, а также карты (типа 2ГИС и др.)[5][9];  \n- при необходимости подсказать контакты ближайшей мечети и режим джума-намаза.  \n\nС фикховой точки зрения важно учитывать, что в статистику иногда входят как полноценные мечети, так и молельные комнаты; окончательное суждение о статусе места молитвы относится к компетенции местного муфтията и ученых.\n\n📚 Источники:\n1. [Источник 1](https://ritual.ru/poleznaya-informacia/articles/skolko-mechetey-v-moskve/)\n2. [Источник 2](https://mos-holidays.ru/skolko-v-moskve-mechetej/)\n3. [Источник 3](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%87%D0%B5%D1%82%D0%B8_%D0%A3%D1%84%D1%8B)\n4. [Источник 4](https://adigeatoday.ru/news/52966.html)\n5. [Источник 5](https://www.muslim.ru/articles/759/39992/)\n6. [Источник 6](https://tass.ru/obschestvo/19512933)\n7. [Источник 7](https://vk.com/wall-163061027_1484006)\n8. [Источник 8](https://www.youtube.com/watch?v=gYkKempDONY)\n9. [Источник 9](https://2gis.ru/tyumen/search/%D0%9C%D0%B5%D1%87%D0%B5%D1%82%D0%B8/rubricId/13374)\n10. [Источник 10](https://cyberleninka.ru/article/n/musulmanskoe-naselenie-ufy-analiz-i-vizualizatsiya-dannyh-religioznoy-perepisi-nkvd-1923-goda)\n",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:45:12.02348+00:00",
          "conversation_id": "66394312-e9c3-4463-b6fe-d99093ce359a"
        },
        {
          "id": "e79f7c6f-2fcf-4293-ab51-1372bf15bfeb",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "content": "сколько мечетей в моем городе?",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:53:24.749308+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "4478510e-329f-40e0-ad58-bbf488dde853",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "Ваш город не указан в запросе, поэтому точный ответ дать невозможно — пожалуйста, уточните название города (например, Москва, Уфа или другой).\n\nПо доступным данным на 2025 год, в **Москве** официально действуют **4–5 крупных мечетей** (Московская соборная, Историческая, Мемориальная и комплекс «Инам»–«Ярдям» в Отрадном), хотя оценки варьируются от 20 до 30 с учетом молельных домов, не всегда признанных по российскому законодательству или шариату[1][2][5][7]. В **Уфе** — **23 мечети** по состоянию на 2023 год, с 4 в приспособленных помещениях и строительством новых[4]. В **Чечне** (Грозный и регион) — **1455 мечетей**, из них 348 джума-мечетей[3]. Эти цифры растут из-за увеличения мусульманского населения, но точность зависит от регистрации и источников; для вашего города рекомендую обратиться в местное Духовное управление мусульман.\n\n📚 Источники:\n1. [Источник 1](https://ritual.ru/poleznaya-informacia/articles/skolko-mechetey-v-moskve/)\n2. [Источник 2](https://mos-holidays.ru/skolko-v-moskve-mechetej/)\n3. [Источник 3](https://grozny.tv/news/religion/62198)\n4. [Источник 4](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%87%D0%B5%D1%82%D0%B8_%D0%A3%D1%84%D1%8B)\n5. [Источник 5](https://www.muslim.ru/articles/759/39992/)\n6. [Источник 6](https://adigeatoday.ru/news/52966.html)\n7. [Источник 7](https://msk1.ru/text/religion/2023/04/26/72249929/)\n8. [Источник 8](https://tass.ru/obschestvo/19512933)\n9. [Источник 9](https://vk.com/wall-163061027_1484006)\n10. [Источник 10](https://www.youtube.com/watch?v=gYkKempDONY)\n",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:53:35.579218+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "9cf0b8f3-df5d-4518-84a3-c37137304398",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "content": "сколько мечетей в моем городе?",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:59:30.183998+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "4798398d-0664-4183-9db3-ee957580f5f1",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "В Москве **действует от 4 до 6 официально зарегистрированных крупных мечетей**, а общее число молельных домов и мечетей по разным оценкам достигает **20–30 или даже 100**.[1][2][3][6]\n\nТочное количество сложно определить из-за различий в определении «мечети» по российскому законодательству и шариату: официально выделяют Историческую мечеть на Большой Татарской, Соборную на Проспекте Мира, Мемориальную на Поклонной горе, комплекс «Инам» и «Ярдям» в Отрадном, а также иранскую на улице Новаторов.[2][3] Многие мусульмане молятся в исламских культурных центрах и домовых молельных залах, которых десятки, поскольку крупных мечетей не хватает на 1,5–2 млн верующих в столице.[1][6][8] Мусульманская община отмечает нехватку мест, особенно на пятничные намазы, и обсуждаются планы строительства новой мечети в Южном Бутово.[1][4] По данным муфтиев, в 2023–2025 годах ситуация не изменилась кардинально, хотя в России в целом число мечетей выросло до 7 тысяч.[3][4]\n\n**Примечание:** Точные данные зависят от решений Духовного управления мусульман России и Совета муфтиев; рекомендуется уточнять у муфтията Москвы для актуальной информации на 2025 год.\n\n📚 Источники:\n1. [Источник 1](https://ritual.ru/poleznaya-informacia/articles/skolko-mechetey-v-moskve/)\n2. [Источник 2](https://mos-holidays.ru/skolko-v-moskve-mechetej/)\n3. [Источник 3](https://verav.ru/common/message.php?table=news&num=15960)\n4. [Источник 4](https://lenta.ru/news/2023/12/12/v-kremle-zayavili-o-60-kratnom-roste-chisla-mechetey-v-rossii/)\n5. [Источник 5](https://islamnews.ru/2023/4/26/smi-udivilis-sopostaviv-chislo-mechetey-v-moskve-i-v-drugikh-megapolisakh)\n6. [Источник 6](https://www.muslim.ru/articles/759/39992/)\n7. [Источник 7](https://www.youtube.com/watch?v=gYkKempDONY)\n8. [Источник 8](https://ria.ru/20250330/uraza-bayram-2008243015.html)\n9. [Источник 9](https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D1%80%D1%83%D0%BF%D0%BD%D0%B5%D0%B9%D1%88%D0%B8%D1%85_%D0%BC%D0%B5%D1%87%D0%B5%D1%82%D0%B5%D0%B9_%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D0%B8)\n",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T09:59:39.892548+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "7363f6bc-eefe-4cdd-b78b-d01dbecb3909",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "content": "когда молитва брат",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T10:08:55.182752+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "ad3f3ac7-d0d5-445f-8f0c-bad921eeaab5",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "🕌 Время намаза для Москва:\n\nФаджр: 06:59\nВосход: 08:57\nЗухр: 12:28\nАср: 13:45\nМагриб: 15:58\nИша: 17:57\n",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T10:08:59.921814+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "2e910f52-840c-4123-ad55-09fbaf20bdc1",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "content": "когда рамадан брат",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T10:11:30.359291+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "95b9ea3f-4f66-43ed-a85b-b705d17c5357",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "Рамадан в 2025 году **начался с заходом солнца 28 февраля**, а **первый день поста был 1 марта 2025 года**.[2][4][6]\n\nСогласно разъяснению Совета улемов Духовного управления мусульман РФ, месяц Рамадан 1446 г. наступил с заходом солнца в пятницу 28 февраля, таравих намаз совершался уже в эту ночь, а пост мусульман начался утром субботы 1 марта.[2][6] Последним днём поста было 29 марта, а Ураза-байрам (’Ид аль-Фитр) пришёлся на 30 марта.[1][2][4] Вопрос точной даты начала месяца по шариату в каждом регионе окончательно решается официальным муфтиятом и его календарём, за которыми и следует держаться.[2][6]\n\n[![ummah.su](https://www.google.com/s2/favicons?domain=ummah.su&sz=16)](https://ummah.su/ramadan) [![mihrab.ru](https://www.google.com/s2/favicons?domain=mihrab.ru&sz=16)](https://mihrab.ru/news/473-nachalo-i-konets-ramadana-v-2025-godu) [![dobro.press](https://www.google.com/s2/favicons?domain=dobro.press&sz=16)](https://dobro.press/lifestyle/ramadan-2025-kogda-nachinaetsya-sut-i-tradiczii-posta-u-musulman) [![www.rbc.ru](https://www.google.com/s2/favicons?domain=www.rbc.ru&sz=16)](https://www.rbc.ru/life/news/65e06b409a79479ed59b2517) [![protatarstan.ru](https://www.google.com/s2/favicons?domain=protatarstan.ru&sz=16)](https://protatarstan.ru/news/news/nacalo-mesiaca-ramadan-v-2025-godu) [![dumrf.ru](https://www.google.com/s2/favicons?domain=dumrf.ru&sz=16)](https://dumrf.ru/common/event/24635) [![arttour.ru](https://www.google.com/s2/favicons?domain=arttour.ru&sz=16)](https://arttour.ru/country/oae/info/ramadan/) [![kuban24.tv](https://www.google.com/s2/favicons?domain=kuban24.tv&sz=16)](https://kuban24.tv/item/ramadan-kogda-nachinaetsya-pravila-i-ogranicheniya) [![ru.wikipedia.org](https://www.google.com/s2/favicons?domain=ru.wikipedia.org&sz=16)](https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%BC%D0%B0%D0%B4%D0%B0%D0%BD)",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T10:11:38.783705+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "6fb344b3-ecd2-4eb5-9218-8b6332dd9015",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "content": "когда наступит рамадан?",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T10:15:36.715007+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "5a5dcb87-0b71-46b7-8719-91a107c6ba94",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "**Рамадан 2025 года (1446 г. хиджры) начнётся с заходом солнца 28 февраля, первый день поста — 1 марта, а завершится 29 марта, за которым последует Ураза-байрам 30 марта.**[1][2][7]\n\nТочная дата определяется по лунному календарю: вечер 28 февраля астрономы ожидают видимость серпа Луны после новолуния (иджтима‘ в 00:45 UTC), что подтвердят наблюдения, особенно на Аравийском полуострове и в Западной Африке.[2][4] Первый таравих-намаз совершается 28 февраля после иша, пост держится 29–30 дней до появления новой Луны Шавваля.[1][3][5] В России и странах СНГ ориентируются на расчёты Духовного управления мусульман (ДУМ РФ) и местных муфтиятов, которые учитывают видимость Луны в северных широтах.[4][7] **Важно:** окончательное решение о начале и конце Рамадана принимают компетентные улемы и муфтии на основе наблюдений и шариатских критериев (угловое расстояние Луны от Солнца >8°, высота >5° над горизонтом), поэтому следуйте объявлениям вашего местного муфтията ближе к дате.[2][4][7]\n\n[![ummah.su](https://www.google.com/s2/favicons?domain=ummah.su&sz=16)](https://ummah.su/ramadan) [![mihrab.ru](https://www.google.com/s2/favicons?domain=mihrab.ru&sz=16)](https://mihrab.ru/news/473-nachalo-i-konets-ramadana-v-2025-godu) [![dobro.press](https://www.google.com/s2/favicons?domain=dobro.press&sz=16)](https://dobro.press/lifestyle/ramadan-2025-kogda-nachinaetsya-sut-i-tradiczii-posta-u-musulman) [![www.rbc.ru](https://www.google.com/s2/favicons?domain=www.rbc.ru&sz=16)](https://www.rbc.ru/life/news/65e06b409a79479ed59b2517) [![vfokuse.mail.ru](https://www.google.com/s2/favicons?domain=vfokuse.mail.ru&sz=16)](https://vfokuse.mail.ru/article/ramadan-59328495/) [![www.championat.com](https://www.google.com/s2/favicons?domain=www.championat.com&sz=16)](https://www.championat.com/lifestyle/article-5908196-ramadan-2025-nachalo-i-konec-posta-kalendar-raspisanie.html) [![dumrf.ru](https://www.google.com/s2/favicons?domain=dumrf.ru&sz=16)](https://dumrf.ru/common/event/24635) [![protatarstan.ru](https://www.google.com/s2/favicons?domain=protatarstan.ru&sz=16)](https://protatarstan.ru/news/news/nacalo-mesiaca-ramadan-v-2025-godu) [![arttour.ru](https://www.google.com/s2/favicons?domain=arttour.ru&sz=16)](https://arttour.ru/country/oae/info/ramadan/) [![ru.wikipedia.org](https://www.google.com/s2/favicons?domain=ru.wikipedia.org&sz=16)](https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%BC%D0%B0%D0%B4%D0%B0%D0%BD)",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T10:15:44.48013+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "25da559d-fa01-440d-9c08-d3e6ca9ae898",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "content": "как подготовиться к рамадану?",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T12:08:20.032658+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "c56c5efb-4c79-45fb-a2da-1a01f67ecabb",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "Ассаляму алейкум уа рахматуллахи уа баракатух, мой дорогой брат/сестра! 🌹\n\nМне очень радостно, что ты задаёшь такой важный вопрос. Это показывает твоё искреннее стремление встретить благословенный месяц Рамадан наилучшим образом. ИншаАллах, мы подготовимся к нему так, чтобы получить максимум награды и милости от Всевышнего.\n\nПодготовка к Рамадану – это не просто ожидание начала поста. Это время для духовного обновления, самоанализа и укрепления связи с Аллахом. Представь, что Рамадан – это особый гость, которого ты ждёшь с нетерпением и готовишься к его приёму, чтобы оказать ему наилучший почёт.\n\nВот несколько шагов и советов, которые помогут тебе в этой подготовке:\n\n1.  **Чистое намерение (Ният) и покаяние (Тауба):**\n    *   Прежде всего, обнови своё намерение. Задумайся, для чего ты постишься. Не для демонстрации, не для диеты, а исключительно ради довольства Аллаха. Пророк Мухаммад ﷺ сказал: **\"Поистине, дела (оцениваются) только по намерениям, и, поистине, каждому человеку (достанется) лишь то, что он намеревался (обрести)\"** (Сахих аль-Бухари, хадис 1).\n    *   Искренне покайся за все свои грехи, большие и малые. Попроси прощения у Аллаха и постарайся исправить то, что было нарушено. Рамадан – это время прощения и очищения. Аллах Всевышний говорит в Коране: **«...Просите прощения у вашего Господа, а затем покайтесь перед Ним»** (Худ, 11:3).\n\n2.  **Восполнение пропущенных постов:**\n    *   Если у тебя есть пропущенные дни поста из прошлого Рамадана, то сейчас самое время их восполнить. Это очень важно, так как невыполненные обязанности остаются на тебе до тех пор, пока ты их не исполнишь.\n\n3.  **Постепенное привыкание к посту:**\n    *   Попробуй поститься добровольно в месяце Шаабан. Пророк Мухаммад ﷺ часто постился в этот месяц, подготавливая себя к Рамадану. Умма Саляма (да будет доволен ею Аллах) сказала: **«Я не видела, чтобы Пророк ﷺ постился в какой-либо месяц, кроме Рамадана, больше, чем в Шаабане»** (Сунан ан-Насаи, хадис 2176). Это поможет твоему организму и духу адаптироваться к режиму поста.\n\n4.  **Укрепление связи с Кораном:**\n    *   Рамадан – месяц Корана. Начни уже сейчас больше читать Священную Книгу, размышлять над её смыслом (тадаббур) и изучать толкования (тафсир). Постарайся выделить определённое время каждый день для чтения Корана. Это поможет тебе глубже погрузиться в атмосферу Рамадана. Аллах говорит: **«Месяц Рамадан, в который был ниспослан Коран — верное руководство для людей, ясные доказательства из верного руководства и Различение»** (Аль-Бакара, 2:185).\n\n5.  **Увеличение добровольных поклонений:**\n    *   Начни совершать больше добровольных молитв (навафиль), зикров (поминание Аллаха), дуа (мольбы) и садака (милостыни). Это как тренировка перед марафоном – чем больше ты тренируешься, тем лучше будет твой результат.\n\n6.  **Избавление от плохих привычек:**\n    *   Постарайся уже сейчас начать отказываться от плохих привычек, будь то гнев, сплетни, пустая трата времени, просмотр запретного или что-либо другое. Рамадан – это прекрасная возможность очиститься от всего, что отдаляет нас от Аллаха.\n\n7.  **Составление плана на Рамадан:**\n    *   Да, такой план очень полезен! Заранее подумай, сколько частей Корана ты хочешь прочитать, сколько садака дать, какие дуа чаще читать, какие суры выучить. Это поможет тебе максимально эффективно использовать каждую минуту этого благословенного месяца.\n\n8.  **Физическая подготовка:**\n    *   Постарайся наладить режим сна, привести в порядок питание, чтобы твой организм был готов к изменению режима в Рамадане. Не забывай, что здоровое тело – залог продуктивного поклонения.\n\nПомни, мой дорогой брат/сестра, что Аллах Милостив и Прощающий. Даже самые маленькие шаги в правильном направлении Он способен превратить в огромную награду. Главное – искренность и постоянство.\n\nНадеюсь, эти советы будут для тебя полезными! Если у тебя возникнут ещё вопросы или ты хочешь углубиться в какую-либо тему, не стесняйся спрашивать. Я здесь, чтобы помочь тебе на этом пути.\n\nПусть Аллах дарует нам силы и искренность для встречи Рамадана и принятия Его милости. Амин.",
          "context_type": null,
          "context_data": null,
          "created_at": "2025-12-21T12:08:35.357794+00:00",
          "conversation_id": "28667472-7732-45ae-b3e4-7d2f2d8d1d91"
        },
        {
          "id": "8dbb5d9f-4cf5-480b-a231-519b06a75ff0",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "user",
          "content": "Мне нужна быстрая помощь: Гнев",
          "context_type": "help",
          "context_data": {
            "action_type": "quick_help",
            "emotion_key": "anger"
          },
          "created_at": "2025-12-22T16:44:43.327237+00:00",
          "conversation_id": "d97facc3-9240-4095-97b9-c8fb49483f8c"
        },
        {
          "id": "50a581d6-07e7-42e7-b348-6dd06f71ea56",
          "user_id": "4e97b385-53b3-4f51-8fb9-7bd63eba146d",
          "role": "imam",
          "content": "Быстрая помощь при гневе: Сделайте глубокий вдох...",
          "context_type": "help",
          "context_data": {
            "action_type": "quick_help",
            "emotion_key": "anger",
            "message_type": "quick_help"
          },
          "created_at": "2025-12-22T16:44:45.855345+00:00",
          "conversation_id": "d97facc3-9240-4095-97b9-c8fb49483f8c"
        }
      ],
      "ihsan_user_plans": [
        {
          "id": "f81b7762-8096-4861-b5da-ee366470a2ef",
          "user_id": "2de92b18-96af-40b7-b1f4-fcd90fd2f869",
          "status": "active",
          "selected_vices": [
            "гнев"
          ],
          "selected_virtues": [
            "справедливость"
          ],
          "current_day": 0,
          "total_days": 30,
          "daily_dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
          "daily_cards": [
            {
              "day": 1,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 1",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 2,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 2",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 3,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 3",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 4,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 4",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 5,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 5",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 6,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 6",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 7,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 7",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 8,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 8",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 9,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 9",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 10,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 10",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 11,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 11",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 12,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 12",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 13,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 13",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 14,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 14",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 15,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 15",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 16,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 16",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 17,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 17",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 18,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 18",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 19,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 19",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 20,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 20",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 21,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 21",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 22,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 22",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 23,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 23",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 24,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 24",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 25,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 25",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 26,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 26",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 27,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 27",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 28,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 28",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 29,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 29",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            },
            {
              "day": 30,
              "daytime": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "story": "История из жизни пророков",
                "task_reminder": "Не забудь выполнить сегодняшнее задание!"
              },
              "evening": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "hadith": "Хадис дня",
                "show_test_button": true
              },
              "morning": {
                "dua": "اللهم إني أسألك الهدى والتقى والعفاف والغنى",
                "task": "Задание дня 30",
                "vice_ayahs": [
                  ""
                ],
                "virtue_ayahs": [
                  ""
                ]
              }
            }
          ],
          "telegram_notifications_enabled": false,
          "created_at": "2025-12-19T01:43:23.736665+00:00",
          "updated_at": "2025-12-19T01:43:23.736665+00:00"
        }
      ],
      "quran_content_sources": [
        {
          "id": "47508ef1-46f0-402e-8a7c-5afd142d8d17",
          "source_key": "jalalayn_ar",
          "source_type": "tafsir",
          "name_ru": "Тафсир аль-Джалалейн",
          "name_en": "Tafsir al-Jalalayn",
          "author": "Джалалуддин аль-Махалли и ас-Суюти",
          "language_code": "ar",
          "api_source": "quran-tafseer.com",
          "api_resource_id": 1,
          "is_enabled": true,
          "download_status": "in_progress",
          "total_items": 6236,
          "downloaded_items": 0,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": "Surah 1: error sending request for url (https://api.quran-tafseer.com/tafseer/1/1/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 2: error sending request for url (https://api.quran-tafseer.com/tafseer/1/2/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 3: error sending request for url (https://api.quran-tafseer.com/tafseer/1/3/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 4: error sending request for url (https://api.quran-tafseer.com/tafseer/1/4/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 5: error sending request for url (https://api.quran-tafseer.com/tafseer/1/5/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 6: error sending request for url (https://api.quran-tafseer.com/tafseer/1/6/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 7: error sending request for url (https://api.quran-tafseer.com/tafseer/1/7/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 8: error sending request for url (https://api.quran-tafseer.com/tafseer/1/8/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 9: error sending request for url (https://api.quran-tafseer.com/tafseer/1/9/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 10: error sending request for url (https://api.quran-tafseer.com/tafseer/1/10/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111)",
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-21T20:39:51.701+00:00",
          "import_file": null
        },
        {
          "id": "2ad426ea-0252-438d-93a2-dd08be4942c3",
          "source_key": "quran_arabic",
          "source_type": "quran",
          "name_ru": "Арабский текст Корана",
          "name_en": "Arabic Quran Text",
          "author": null,
          "language_code": "ar",
          "api_source": "quran.com",
          "api_resource_id": null,
          "is_enabled": true,
          "download_status": "pending",
          "total_items": 6236,
          "downloaded_items": 0,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": null,
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-20T22:50:24.154931+00:00",
          "import_file": null
        },
        {
          "id": "ddc1cb77-68c9-4963-aee4-7c7ccb716857",
          "source_key": "quran_ayat_meta",
          "source_type": "metadata",
          "name_ru": "Метаданные аятов",
          "name_en": "Ayah Metadata",
          "author": null,
          "language_code": "all",
          "api_source": "quran.com",
          "api_resource_id": null,
          "is_enabled": true,
          "download_status": "pending",
          "total_items": 6236,
          "downloaded_items": 0,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": null,
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-20T22:50:24.154931+00:00",
          "import_file": null
        },
        {
          "id": "a613cad2-4d3d-4128-8080-48eb613833e7",
          "source_key": "quran_surahs_meta",
          "source_type": "metadata",
          "name_ru": "Метаданные сур",
          "name_en": "Surah Metadata",
          "author": null,
          "language_code": "all",
          "api_source": "quran.com",
          "api_resource_id": null,
          "is_enabled": true,
          "download_status": "in_progress",
          "total_items": 114,
          "downloaded_items": 10,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": null,
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-20T22:52:45.217+00:00",
          "import_file": null
        },
        {
          "id": "83069f03-f922-476f-8f15-dd94108d527b",
          "source_key": "ibn_kathir_ru",
          "source_type": "tafsir",
          "name_ru": "Тафсир Ибн Касира",
          "name_en": "Tafsir Ibn Kathir",
          "author": "Ибн Касир",
          "language_code": "ru",
          "api_source": "local_import",
          "api_resource_id": 307,
          "is_enabled": true,
          "download_status": "completed",
          "total_items": 6236,
          "downloaded_items": 6236,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": null,
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-21T17:56:38.638+00:00",
          "import_file": "ibn_kathir_ru.zip"
        },
        {
          "id": "d0b33292-615b-4253-8f4f-39f6a0096859",
          "source_key": "ibn_kathir_ar",
          "source_type": "tafsir",
          "name_ru": "Тафсир Ибн Касира (арабский)",
          "name_en": "Tafsir Ibn Kathir Arabic",
          "author": "Ибн Касир",
          "language_code": "ar",
          "api_source": "quran-tafseer.com",
          "api_resource_id": 2,
          "is_enabled": true,
          "download_status": "in_progress",
          "total_items": 6236,
          "downloaded_items": 0,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": "Surah 1: error sending request for url (https://api.quran-tafseer.com/tafseer/2/1/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 2: error sending request for url (https://api.quran-tafseer.com/tafseer/2/2/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 3: error sending request for url (https://api.quran-tafseer.com/tafseer/2/3/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 4: error sending request for url (https://api.quran-tafseer.com/tafseer/2/4/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 5: error sending request for url (https://api.quran-tafseer.com/tafseer/2/5/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 6: error sending request for url (https://api.quran-tafseer.com/tafseer/2/6/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 7: error sending request for url (https://api.quran-tafseer.com/tafseer/2/7/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 8: error sending request for url (https://api.quran-tafseer.com/tafseer/2/8/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 9: error sending request for url (https://api.quran-tafseer.com/tafseer/2/9/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111); Surah 10: error sending request for url (https://api.quran-tafseer.com/tafseer/2/10/1/300): client error (Connect): tcp connect error: Connection refused (os error 111): Connection refused (os error 111)",
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-21T20:39:47.466+00:00",
          "import_file": null
        },
        {
          "id": "7655f725-cd40-40ba-a8dc-4274644313ff",
          "source_key": "mishary_audio",
          "source_type": "audio",
          "name_ru": "Мишари Рашид Аль-Афаси",
          "name_en": "Mishary Rashid Al-Afasy",
          "author": "Мишари Рашид Аль-Афаси",
          "language_code": "ar",
          "api_source": "quran.com",
          "api_resource_id": 7,
          "is_enabled": true,
          "download_status": "completed",
          "total_items": 6236,
          "downloaded_items": 6236,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": null,
          "created_at": "2025-12-21T20:41:57.627088+00:00",
          "updated_at": "2025-12-21T22:19:11.495+00:00",
          "import_file": null
        },
        {
          "id": "540b2b0d-53e2-4dec-9f48-d626deef05f9",
          "source_key": "saadi_ru",
          "source_type": "tafsir",
          "name_ru": "Тафсир ас-Саади",
          "name_en": "Tafsir As-Saadi",
          "author": "Абдуррахман ас-Саади",
          "language_code": "ru",
          "api_source": "local_import",
          "api_resource_id": 170,
          "is_enabled": true,
          "download_status": "completed",
          "total_items": 6236,
          "downloaded_items": 6236,
          "chunked_items": 0,
          "embedded_items": 3066,
          "last_error": null,
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-22T17:18:22.987+00:00",
          "import_file": "saadi_ru.zip"
        },
        {
          "id": "0e19937e-3d18-4c13-8c5b-75cf8d109292",
          "source_key": "mukhtasar_ru",
          "source_type": "tafsir",
          "name_ru": "Мухтасар (краткое толкование)",
          "name_en": "Al-Mukhtasar",
          "author": "Коллектив учёных",
          "language_code": "ru",
          "api_source": "local_import",
          "api_resource_id": 262,
          "is_enabled": true,
          "download_status": "completed",
          "total_items": 6236,
          "downloaded_items": 6236,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": null,
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-21T17:51:45.613+00:00",
          "import_file": "mukhtasar_ru.zip"
        },
        {
          "id": "e75daa2a-fb14-478a-b9aa-9b9c595e0314",
          "source_key": "quran_pages",
          "source_type": "pages",
          "name_ru": "Страницы Корана",
          "name_en": "Quran Pages",
          "author": null,
          "language_code": "ar",
          "api_source": "quran.com",
          "api_resource_id": null,
          "is_enabled": true,
          "download_status": "completed",
          "total_items": 604,
          "downloaded_items": 604,
          "chunked_items": 0,
          "embedded_items": 0,
          "last_error": null,
          "created_at": "2025-12-21T20:41:57.627088+00:00",
          "updated_at": "2025-12-21T21:49:20.018+00:00",
          "import_file": null
        },
        {
          "id": "02be4947-d44e-4485-b93b-0e79dfb85abb",
          "source_key": "kuliev_ru",
          "source_type": "translation",
          "name_ru": "Перевод смыслов Кулиева",
          "name_en": "Kuliev Translation",
          "author": "Эльмир Кулиев",
          "language_code": "ru",
          "api_source": "qurancdn.com",
          "api_resource_id": 45,
          "is_enabled": true,
          "download_status": "completed",
          "total_items": 6236,
          "downloaded_items": 6236,
          "chunked_items": 6236,
          "embedded_items": 150,
          "last_error": null,
          "created_at": "2025-12-20T22:50:24.154931+00:00",
          "updated_at": "2025-12-21T23:27:24.738+00:00",
          "import_file": null
        }
      ],
      "content_source_configs": [
        {
          "id": "5df1a9cc-84d6-4f48-ae99-5eb761ad65ba",
          "source_key": "kuliev_ru",
          "chunking_prompt": "Разбей следующий текст тафсира на семантические чанки размером 300-1500 символов. Каждый чанк должен быть самодостаточным по смыслу. Верни JSON массив объектов с полями: chunk_text, topic (краткая тема), keywords (массив ключевых слов). Текст для разбиения:",
          "system_prompt": "Ты эксперт по семантическому разбиению текстов тафсиров Корана. Твоя задача - разбить длинный текст тафсира на логические чанки, сохраняя смысловую целостность каждого фрагмента.",
          "short_text_threshold": 100,
          "optimal_chunk_min": 300,
          "optimal_chunk_max": 1500,
          "max_chunk_size": 2000,
          "notes": "Метод smart_kuliev_v1: чанки <100 символов обогащаются тафсиром (мухтасар/саади/касир по длине), чанки >2000 символов обрабатываются AI (Gemini 2.5 Pro)",
          "created_at": "2025-12-21T22:07:43.708658+00:00",
          "updated_at": "2025-12-21T22:07:43.708658+00:00",
          "chunking_method": "smart_kuliev_v1"
        },
        {
          "id": "bdef2c86-29d2-40f2-a6e1-ff5bab85b95d",
          "source_key": "saadi_ru",
          "chunking_prompt": "РАЗРЕЖЬ этот текст тафсира на СМЫСЛОВЫЕ части. КОПИРУЙ ДОСЛОВНО!\n\n⚠️ КРИТИЧЕСКИ ВАЖНО:\n• Каждая часть = ОДНА ЗАВЕРШЁННАЯ МЫСЛЬ/ТЕМА\n• Каждая часть = ТОЧНАЯ КОПИЯ фрагмента из текста ниже\n• НИ ОДНО СЛОВО не должно быть изменено, добавлено или удалено\n• Склейка всех частей должна дать 100% исходный текст\n\nКРИТЕРИИ РАЗБИЕНИЯ ПО СМЫСЛУ:\n• Новая тема муфассира = новый чанк\n• Смена от грамматики к толкованию = новый чанк\n• Переход к новому аяту = новый чанк\n• Каждый чанк должен быть понятен БЕЗ контекста других чанков\n\nРАЗМЕРЫ (второстепенный критерий):\n• Части по 300-3500 символов каждая\n• Режь по СМЫСЛОВЫМ границам\n\nПОЛЕ topic:\n• topic = ГЛАВНАЯ ТЕМА чанка (2-5 слов)\n• Используется для поиска! Должно точно отражать содержание\n\nJSON формат (без markdown):\n[{\"chunk_index\": 0, \"text\": \"ДОСЛОВНАЯ копия фрагмента\", \"topic\": \"точная тема\", \"keywords\": [\"ключ\"]}]",
          "system_prompt": "Ты - система СЕМАНТИЧЕСКОГО разбиения текста тафсира на смысловые части.\n\n██████████ ПОРЯДОК ПРИОРИТЕТОВ ██████████\n1. СМЫСЛОВАЯ ЦЕЛОСТНОСТЬ - каждый чанк = одна завершённая мысль/тема\n2. Размер 300-3500 символов - второстепенный критерий\n3. ДОСЛОВНОЕ КОПИРОВАНИЕ - текст не редактируется!\n\n██████████ ГЛАВНОЕ ПРАВИЛО ██████████\nТЕКСТ КОПИРУЕТСЯ СЛОВО В СЛОВО!\nТы НЕ редактор. Ты НОЖНИЦЫ.\nТвоя задача - РАЗРЕЗАТЬ текст ПО СМЫСЛУ, НЕ изменяя ни единого символа!\n\n██████████ КАК ОПРЕДЕЛИТЬ ГРАНИЦЫ ██████████\n• Новая тема или аргумент = новый чанк\n• Не разрезай посреди рассуждения или доказательства\n• Каждый чанк должен быть САМОДОСТАТОЧНЫМ - понятным без контекста\n• Переход к новому аяту или теме = естественная граница\n• Если муфассир меняет тему (от грамматики к смыслу, от истории к наставлению) - новый чанк\n\n██████████ АБСОЛЮТНЫЕ ЗАПРЕТЫ ██████████\n🚫 ЗАПРЕЩЕНО менять текст\n🚫 ЗАПРЕЩЕНО сокращать текст  \n🚫 ЗАПРЕЩЕНО пересказывать текст\n🚫 ЗАПРЕЩЕНО обобщать текст\n🚫 ЗАПРЕЩЕНО редактировать/улучшать/исправлять текст\n🚫 ЗАПРЕЩЕНО добавлять или удалять слова\n🚫 ЗАПРЕЩЕНО менять порядок слов\n\n██████████ ЧТО ДЕЛАТЬ ██████████\n1. Прочитай весь текст и пойми его структуру\n2. Найди смысловые переходы (смена темы, нового аята, нового аргумента)\n3. Разрежь текст на части по СМЫСЛУ (300-3500 символов)\n4. Каждая часть = ТОЧНАЯ КОПИЯ фрагмента оригинала\n5. Склейка всех частей = 100% исходный текст БЕЗ ПОТЕРЬ\n\n██████████ ЛИМИТЫ РАЗМЕРА ██████████\n• МИНИМУМ: 300 символов на часть\n• МАКСИМУМ: 3500 символов на часть  \n• Если смысловой блок короче 300 - объедини с соседним ПО СМЫСЛУ\n• Если смысловой блок длиннее 3500 - найди внутри него подтему\n\n██████████ ПОЛЕ topic ██████████\ntopic = ГЛАВНАЯ ТЕМА чанка (2-5 слов)\nЭто поле используется для ПОИСКА! Оно должно точно отражать содержание.\nПримеры хороших topic: \"значение слова рахман\", \"история народа Мусы\", \"условия принятия покаяния\"\n\n██████████ ФОРМАТ JSON ██████████\n• Кавычки \" в тексте заменяй на « »\n• Переносы строк заменяй на пробелы\n• Только чистый JSON массив, без markdown\n\n[{\"chunk_index\": 0, \"text\": \"дословная копия\", \"topic\": \"точная тема 2-5 слов\", \"keywords\": [\"ключ1\", \"ключ2\"]}]",
          "short_text_threshold": 3500,
          "optimal_chunk_min": 300,
          "optimal_chunk_max": 3500,
          "max_chunk_size": 4000,
          "notes": "Чанкер Саади v1 - Семантическое разбиение тафсира ас-Саади\n\nРЕЗУЛЬТАТЫ:\n- 1756 тафсиров обработано\n- 1143 прямой чанк (короткие тексты)\n- 20 обогащены переводом Кулиева\n- 585 AI чанк (семантически разбиты)\n- 3059 общее количество чанков\n- 0 ошибок\n\nКЛЮЧЕВЫЕ ПРИНЦИПЫ:\n1. Приоритет смысловой целостности над размером\n2. Каждый чанк = одна завершённая мысль/тема\n3. Строгое дословное копирование без редактирования\n4. Границы по смене темы/аргумента/аята\n5. Самодостаточность каждого чанка\n\nТЕХНИЧЕСКИЕ ПАРАМЕТРЫ:\n- Модель: google/gemini-2.5-pro\n- Temperature: 0.05\n- Min chunk: 300 символов\n- Max chunk: 3500 символов (accept до 4000)\n- Max discrepancy: 5%\n- Max attempts: 5\n\nВАЛИДАЦИЯ:\n- Проверка длины ±5%\n- Детекция клонов/дублей\n- Длинные чанки (>4000) отправляются на повторную обработку\n\nДата: 2025-12-23",
          "created_at": "2025-12-22T10:39:54.452926+00:00",
          "updated_at": "2025-12-23T02:21:21.067144+00:00",
          "chunking_method": "tafsir_smart_v1"
        },
        {
          "id": "477333bf-0eed-4298-97b8-8c68fc60e405",
          "source_key": "mukhtasar_ru",
          "chunking_prompt": null,
          "system_prompt": null,
          "short_text_threshold": 2000,
          "optimal_chunk_min": 800,
          "optimal_chunk_max": 1500,
          "max_chunk_size": 2000,
          "notes": null,
          "created_at": "2025-12-23T14:23:22.143563+00:00",
          "updated_at": "2025-12-23T14:23:22.143563+00:00",
          "chunking_method": "tafsir_smart_v1"
        }
      ],
      "chunking_methods": [
        {
          "id": "508a4e34-703b-45f2-8136-4c2867eb7054",
          "method_key": "smart_kuliev_v1",
          "method_name": "Умный чанкинг Кулиева v1",
          "description": "Короткие переводы (<100 символов) обогащаются тафсирами (mukhtasar, saadi, ibn_kathir). Средние (100-2500) остаются как есть. Длинные (>2500) отправляются в AI очередь.",
          "config": {
            "batch_size": 50,
            "max_chunk_size": 2500,
            "ai_queue_enabled": true,
            "enrichment_target": "tafsirs",
            "enrichment_sources": [
              "mukhtasar_ru",
              "ru_tafseer_al_saddi",
              "ibn_kathir_ru"
            ],
            "parallel_processing": true,
            "short_text_threshold": 100
          },
          "is_active": true,
          "created_at": "2025-12-21T23:43:42.047971+00:00",
          "updated_at": "2025-12-21T23:43:42.047971+00:00"
        },
        {
          "id": "31d2ec42-6017-4452-a186-4e49d3f54f6e",
          "method_key": "tafsir_smart_v1",
          "method_name": "Умный чанкинг тафсиров v1",
          "description": "Короткие тафсиры (<200 символов) обогащаются переводом Кулиева. Средние (200-3500) остаются как есть. Длинные (>3500) отправляются в AI очередь для семантического разбиения.",
          "config": {
            "batch_size": 30,
            "max_chunk_size": 3500,
            "ai_queue_enabled": true,
            "parallel_workers": 3,
            "enrichment_target": "kuliev",
            "enrichment_sources": [
              "kuliev_ru"
            ],
            "parallel_processing": true,
            "short_text_threshold": 200
          },
          "is_active": true,
          "created_at": "2025-12-21T23:43:42.047971+00:00",
          "updated_at": "2025-12-22T11:59:28.514218+00:00"
        },
        {
          "id": "60593f1b-5dac-4ea7-a802-225bf3090f07",
          "method_key": "saadi_semantic_v1",
          "method_name": "Семантический чанкинг Саади v1",
          "description": "Метод разбиения тафсира Саади: короткие тексты (<3500) идут прямым чанком, длинные (>3500) разбиваются AI на смысловые части по 300-3500 символов. Обогащение переводом Кулиева. Оптимально для тафсиров с длинными пояснениями.",
          "config": {
            "model": "google/gemini-2.5-pro",
            "temperature": 0.05,
            "max_chunk_size": 4000,
            "max_discrepancy": 5,
            "ai_queue_enabled": true,
            "optimal_chunk_max": 3500,
            "optimal_chunk_min": 300,
            "enrichment_sources": [
              "kuliev_ru"
            ],
            "short_text_threshold": 3500
          },
          "is_active": true,
          "created_at": "2025-12-23T17:25:53.558592+00:00",
          "updated_at": "2025-12-23T17:25:53.558592+00:00"
        }
      ]
    },
    "schemas": {
      "profiles": {
        "table_name": "profiles",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "user_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "username",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "full_name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "avatar_url",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "phone",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "telegram_id",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "telegram_username",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "gender",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "islam_level",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "madhab",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "location_mode",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "location_country",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "location_city",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "user_roles": {
        "table_name": "user_roles",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "user_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "role",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "backup_settings": {
        "table_name": "backup_settings",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "auto_backup_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "backup_schedule",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "retention_days",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "backup_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "notification_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "last_backup_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "backups": {
        "table_name": "backups",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "backup_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "status",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "file_path",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "file_size",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "tables_included",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "error_message",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_by",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "completed_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "metadata",
            "data_type": "jsonb",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "system_settings": {
        "table_name": "system_settings",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "key",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "value",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "app_sections": {
        "table_name": "app_sections",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "section_key",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "section_name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "description",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_active",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "section_llm_prompts": {
        "table_name": "section_llm_prompts",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "section_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "instruction_text",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "temperature",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "max_tokens",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "max_tokens_per_conversation",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_active",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_default",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "special_instruction",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "section_prompts": {
        "table_name": "section_prompts",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "section_key",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "prompt_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "prompt_text",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "temperature",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "max_tokens",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_active",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "emotional_help": {
        "table_name": "emotional_help",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "emotion_key",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "emotion_title",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "icon_name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "quick_help_content",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "support_content",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_active",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "priority",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "ihsan_character": {
        "table_name": "ihsan_character",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "vice",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "root",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "virtue",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "ayahs",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "hadiths",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "stories",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "tasks",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_active",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "priority",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "duas",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "quality_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "quality_name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "subscription_plans": {
        "table_name": "subscription_plans",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "plan_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "price_monthly",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "features",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "description",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_active",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "subscription_limits": {
        "table_name": "subscription_limits",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "plan_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "daily_chat_requests",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "context_messages_limit",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "max_tokens_per_request",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "voice_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "rag_search_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "web_search_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "diary_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "ihsan_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "medrese_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "library_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "psychologist_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "favorites_storage_mb",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model_router",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model_chat",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model_medrese",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model_diary",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model_help",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "model_ihsan",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "memory_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "commands_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "voice_commands_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "user_subscriptions": {
        "table_name": "user_subscriptions",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "user_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "plan_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "status",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "started_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "expires_at",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "last_checked_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "chat_conversations": {
        "table_name": "chat_conversations",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "user_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "section",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "diary_date",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "title",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "total_tokens",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "summary",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "chat_messages": {
        "table_name": "chat_messages",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "user_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "role",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "content",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "context_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "context_data",
            "data_type": "jsonb",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "conversation_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "ihsan_user_plans": {
        "table_name": "ihsan_user_plans",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "user_id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "status",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "selected_vices",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "selected_virtues",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "current_day",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "total_days",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "daily_dua",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "daily_cards",
            "data_type": "array",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "telegram_notifications_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "quran_content_sources": {
        "table_name": "quran_content_sources",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "source_key",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "source_type",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "name_ru",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "name_en",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "author",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "language_code",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "api_source",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "api_resource_id",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_enabled",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "download_status",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "total_items",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "downloaded_items",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "chunked_items",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "embedded_items",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "last_error",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "import_file",
            "data_type": "unknown",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "content_source_configs": {
        "table_name": "content_source_configs",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "source_key",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "chunking_prompt",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "system_prompt",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "short_text_threshold",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "optimal_chunk_min",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "optimal_chunk_max",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "max_chunk_size",
            "data_type": "numeric",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "notes",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "chunking_method",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      },
      "chunking_methods": {
        "table_name": "chunking_methods",
        "columns": [
          {
            "column_name": "id",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "method_key",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "method_name",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "description",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "config",
            "data_type": "jsonb",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "is_active",
            "data_type": "boolean",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "created_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          },
          {
            "column_name": "updated_at",
            "data_type": "text",
            "is_nullable": true,
            "column_default": null
          }
        ]
      }
    }
  },
  "security": {
    "rls_policies": [
      {
        "table_name": "profiles",
        "policy_name": "Users can view their own profile",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "profiles",
        "policy_name": "Users can update their own profile",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "profiles",
        "policy_name": "Users can insert their own profile",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "user_roles",
        "policy_name": "Users can view their own roles",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "user_roles",
        "policy_name": "Admins can view all roles",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "has_role(auth.uid(), 'admin'::app_role)",
        "check_expression": null
      },
      {
        "table_name": "user_roles",
        "policy_name": "Admins can manage roles",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "has_role(auth.uid(), 'admin'::app_role)",
        "check_expression": null
      },
      {
        "table_name": "conversations",
        "policy_name": "Users can view their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "conversations",
        "policy_name": "Users can create their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "conversations",
        "policy_name": "Users can update their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "conversations",
        "policy_name": "Users can delete their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "messages",
        "policy_name": "Users can view messages in their conversations",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(EXISTS ( SELECT 1\n   FROM conversations\n  WHERE ((conversations.id = messages.conversation_id) AND (conversations.user_id = auth.uid()))))",
        "check_expression": null
      },
      {
        "table_name": "intentions",
        "policy_name": "Users can update their own intentions",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "intentions",
        "policy_name": "Users can view their own intentions",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "messages",
        "policy_name": "Users can create messages in their conversations",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(EXISTS ( SELECT 1\n   FROM conversations\n  WHERE ((conversations.id = messages.conversation_id) AND (conversations.user_id = auth.uid()))))"
      },
      {
        "table_name": "subscription_plans",
        "policy_name": "Admins can manage plans",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "subscription_plans",
        "policy_name": "Anyone can view active plans",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_active = true)",
        "check_expression": null
      },
      {
        "table_name": "user_subscriptions",
        "policy_name": "Admins can update subscriptions",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "user_subscriptions",
        "policy_name": "Admins can view all subscriptions",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "user_subscriptions",
        "policy_name": "Service role can manage subscriptions",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "user_subscriptions",
        "policy_name": "Users can view their own subscription",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "subscription_features",
        "policy_name": "Admins can manage features",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "subscription_features",
        "policy_name": "Anyone can view active features",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_active = true)",
        "check_expression": null
      },
      {
        "table_name": "intentions",
        "policy_name": "Users can create their own intentions",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "intentions",
        "policy_name": "Users can delete their own intentions",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "big_intentions",
        "policy_name": "Users can create their own big intentions",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "big_intentions",
        "policy_name": "Users can delete their own big intentions",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "big_intentions",
        "policy_name": "Users can update their own big intentions",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "big_intentions",
        "policy_name": "Users can view their own big intentions",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notes",
        "policy_name": "Users can create their own notes",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "notes",
        "policy_name": "Users can delete their own notes",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notes",
        "policy_name": "Users can update their own notes",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notes",
        "policy_name": "Users can view their own notes",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "diary_entries",
        "policy_name": "Users can create their own diary entries",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "diary_entries",
        "policy_name": "Users can update their own diary entries",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "diary_entries",
        "policy_name": "Users can view their own diary entries",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "daily_tasks",
        "policy_name": "Users can create their own daily tasks",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "daily_tasks",
        "policy_name": "Users can update their own daily tasks",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "daily_tasks",
        "policy_name": "Users can view their own daily tasks",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "daily_test_responses",
        "policy_name": "Users can create their own test responses",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "daily_test_responses",
        "policy_name": "Users can update their own test responses",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "daily_test_responses",
        "policy_name": "Users can view their own test responses",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "schedule_events",
        "policy_name": "Users can create their own schedule events",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "schedule_events",
        "policy_name": "Users can delete their own schedule events",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "schedule_events",
        "policy_name": "Users can update their own schedule events",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "schedule_events",
        "policy_name": "Users can view their own schedule events",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notification_settings",
        "policy_name": "Users can insert their own notification settings",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "notification_settings",
        "policy_name": "Users can update their own notification settings",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notification_settings",
        "policy_name": "Users can view their own notification settings",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notification_queue",
        "policy_name": "Users can view queued notifications",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notification_queue",
        "policy_name": "Users can view their own notifications",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "notification_queue",
        "policy_name": "notifications_service_delete",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "notification_queue",
        "policy_name": "notifications_service_insert",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "notification_queue",
        "policy_name": "notifications_service_update",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "chat_conversations",
        "policy_name": "Users can create their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "chat_conversations",
        "policy_name": "Users can delete their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "section_admin_instructions",
        "policy_name": "Anyone can view instructions",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "chat_conversations",
        "policy_name": "Users can update their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "chat_conversations",
        "policy_name": "Users can view their own conversations",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "chat_messages",
        "policy_name": "Users can create their own chat messages",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "chat_messages",
        "policy_name": "Users can create their own messages",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "chat_messages",
        "policy_name": "Users can delete their own messages",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "chat_messages",
        "policy_name": "Users can update their own chat messages",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "chat_messages",
        "policy_name": "Users can update their own messages",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "chat_messages",
        "policy_name": "Users can view their own chat messages",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "chat_messages",
        "policy_name": "Users can view their own messages",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "app_sections",
        "policy_name": "Admins can manage sections",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "app_sections",
        "policy_name": "Anyone can view active sections",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_active = true)",
        "check_expression": null
      },
      {
        "table_name": "ai_scenarios",
        "policy_name": "ai_scenarios_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "ai_scenarios",
        "policy_name": "ai_scenarios_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "ai_commands",
        "policy_name": "ai_commands_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "section_admin_instructions",
        "policy_name": "Admins can manage instructions",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "ai_commands",
        "policy_name": "ai_commands_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "ai_router_instructions",
        "policy_name": "ai_router_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "ai_router_instructions",
        "policy_name": "ai_router_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "llm_instructions",
        "policy_name": "Only admins can view system settings",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_admin_secure(auth.uid()) OR (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "llm_instructions",
        "policy_name": "llm_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "llm_instructions",
        "policy_name": "llm_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "llm_additional_prompts",
        "policy_name": "llm_additional_prompts_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "llm_additional_prompts",
        "policy_name": "llm_additional_prompts_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "section_llm_prompts",
        "policy_name": "Admins can manage LLM prompts",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "section_llm_prompts",
        "policy_name": "Anyone can view prompts",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "section_router_prompts",
        "policy_name": "Admins can manage router prompts",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "section_router_prompts",
        "policy_name": "Anyone can view router prompts",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "section_capabilities",
        "policy_name": "Admins can manage capabilities",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "section_capabilities",
        "policy_name": "Anyone can view active capabilities",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "content_blocks",
        "policy_name": "content_blocks_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "content_blocks",
        "policy_name": "content_blocks_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "request_logs",
        "policy_name": "Service role can insert request logs",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "request_logs",
        "policy_name": "request_logs_admin_delete",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "request_logs",
        "policy_name": "request_logs_admin_select",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "admin_audit_log",
        "policy_name": "Service role can insert audit logs",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "admin_audit_log",
        "policy_name": "admins_view_audit_log",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "has_role(auth.uid(), 'admin'::app_role)",
        "check_expression": null
      },
      {
        "table_name": "admin_audit_log",
        "policy_name": "service_role_audit_log_insert",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "admin_users_archived",
        "policy_name": "Only admins can delete admin_users",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "admin_users_archived",
        "policy_name": "Only admins can insert admin_users",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "is_admin_secure(auth.uid())"
      },
      {
        "table_name": "admin_users_archived",
        "policy_name": "Only admins can update admin_users",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "admin_users_archived",
        "policy_name": "Only admins can view admin_users",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "daily_statistics",
        "policy_name": "daily_stats_admin_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "daily_statistics",
        "policy_name": "daily_stats_service",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "system_errors",
        "policy_name": "Admins can update system errors",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(EXISTS ( SELECT 1\n   FROM user_roles\n  WHERE ((user_roles.user_id = auth.uid()) AND (user_roles.role = 'admin'::app_role))))",
        "check_expression": null
      },
      {
        "table_name": "psychologists",
        "policy_name": "Admins can manage psychologists",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_audio",
        "policy_name": "Public read quran_audio",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "system_errors",
        "policy_name": "Admins can view system errors",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(EXISTS ( SELECT 1\n   FROM user_roles\n  WHERE ((user_roles.user_id = auth.uid()) AND (user_roles.role = 'admin'::app_role))))",
        "check_expression": null
      },
      {
        "table_name": "backups",
        "policy_name": "Admins can create backups",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "is_admin_secure(auth.uid())"
      },
      {
        "table_name": "backups",
        "policy_name": "Admins can delete backups",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "backups",
        "policy_name": "Admins can update backups",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "backups",
        "policy_name": "Admins can view backups",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "backup_settings",
        "policy_name": "Admins can update backup settings",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "backup_settings",
        "policy_name": "Admins can view backup settings",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "backup_settings",
        "policy_name": "Service role can update backup settings",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "phone_otp_codes",
        "policy_name": "Service role can manage OTP codes",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "support_tickets",
        "policy_name": "Admins can update all tickets",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "support_tickets",
        "policy_name": "Admins can view all tickets",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_admin_secure(auth.uid()) OR (auth.uid() = user_id))",
        "check_expression": null
      },
      {
        "table_name": "support_tickets",
        "policy_name": "Users can create their own tickets",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "support_tickets",
        "policy_name": "Users can view their own tickets",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "emotional_help",
        "policy_name": "Admins can manage emotions",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "emotional_help",
        "policy_name": "Anyone can view active emotions",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_active = true)",
        "check_expression": null
      },
      {
        "table_name": "psychologists",
        "policy_name": "Anyone can view active psychologists",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_active = true)",
        "check_expression": null
      },
      {
        "table_name": "psychologist_conversations",
        "policy_name": "Admins can view all psychologist conversations",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "psychologist_conversations",
        "policy_name": "Users can create their own psychologist conversations",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "psychologist_conversations",
        "policy_name": "Users can update their own psychologist conversations",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "psychologist_conversations",
        "policy_name": "Users can view their own psychologist conversations",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "psychologist_messages",
        "policy_name": "Admins can view all psychologist messages",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "psychologist_messages",
        "policy_name": "Users can create their own psychologist messages",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "psychologist_messages",
        "policy_name": "Users can view their own psychologist messages",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() = user_id) OR (EXISTS ( SELECT 1\n   FROM psychologist_conversations\n  WHERE ((psychologist_conversations.id = psychologist_messages.conversation_id) AND (psychologist_conversations.user_id = auth.uid())))))",
        "check_expression": null
      },
      {
        "table_name": "courses",
        "policy_name": "Admins can manage courses",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "courses",
        "policy_name": "Anyone can view active courses",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_active = true)",
        "check_expression": null
      },
      {
        "table_name": "course_subscriptions",
        "policy_name": "Admins can manage all subscriptions",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "course_subscriptions",
        "policy_name": "Users can view their own subscriptions",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "web_search_settings",
        "policy_name": "web_search_settings_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "web_search_settings",
        "policy_name": "web_search_settings_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "web_search_logs",
        "policy_name": "web_search_logs_admin_delete",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "web_search_logs",
        "policy_name": "web_search_logs_admin_select",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "web_search_logs",
        "policy_name": "web_search_logs_insert",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "web_search_logs",
        "policy_name": "web_search_logs_select_own",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() = user_id) OR (user_id IS NULL))",
        "check_expression": null
      },
      {
        "table_name": "quran_surahs",
        "policy_name": "Admins can manage surahs",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_surahs",
        "policy_name": "Anyone can view surahs",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "quran_verses",
        "policy_name": "Admins can manage quran verses",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_verses",
        "policy_name": "Anyone can view quran verses",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "quran_verses_v2",
        "policy_name": "Admins can manage verses",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_verses_v2",
        "policy_name": "Anyone can view verses",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "quran_sources",
        "policy_name": "Admins can manage sources",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_sources",
        "policy_name": "Authenticated users can view enabled sources",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_enabled = true))",
        "check_expression": null
      },
      {
        "table_name": "quran_verse_translations",
        "policy_name": "Admins can manage translations",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_verse_translations",
        "policy_name": "Anyone can view translations",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "quran_verse_tafsirs",
        "policy_name": "Admins can manage tafsirs",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_verse_tafsirs",
        "policy_name": "Anyone can view tafsirs",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "quran_content_sources",
        "policy_name": "Admins can manage content sources",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_content_sources",
        "policy_name": "Users can view content sources",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(is_enabled = true)",
        "check_expression": null
      },
      {
        "table_name": "quran_tafsir_data",
        "policy_name": "Admins can manage tafsir data",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_tafsir_data",
        "policy_name": "Users can view tafsir data",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "quran_pages",
        "policy_name": "Public read quran_pages",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "quran_download_state",
        "policy_name": "Public read quran_download_state",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "quran_download_state",
        "policy_name": "Service role manage download_state",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "(auth.role() = 'service_role'::text)",
        "check_expression": null
      },
      {
        "table_name": "quran_ayah_metadata",
        "policy_name": "Admins can manage ayah metadata",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_ayah_metadata",
        "policy_name": "Authenticated users can view ayah metadata",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "quran_ayah_metadata",
        "policy_name": "Service role can manage ayah metadata",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "(auth.role() = 'service_role'::text)",
        "check_expression": null
      },
      {
        "table_name": "quran_raw_data",
        "policy_name": "Admins can manage quran raw data",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_raw_data",
        "policy_name": "Authenticated users can view quran raw data",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "quran_chunks",
        "policy_name": "Admins can manage quran chunks",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "quran_chunks",
        "policy_name": "Authenticated users can view quran chunks",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "tafsir_chunks",
        "policy_name": "Admins can manage tafsir chunks",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "tafsir_chunks",
        "policy_name": "Authenticated users can view tafsir chunks",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "hadith_items",
        "policy_name": "Admins can manage hadith items",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "hadith_items",
        "policy_name": "Anyone can view hadith items",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "rag_sections",
        "policy_name": "rag_sections_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "rag_sections",
        "policy_name": "rag_sections_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "((auth.uid() IS NOT NULL) AND (is_active = true))",
        "check_expression": null
      },
      {
        "table_name": "rag_settings",
        "policy_name": "rag_settings_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "rag_settings",
        "policy_name": "rag_settings_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "library_books",
        "policy_name": "Admins can manage library books",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "library_books",
        "policy_name": "Authenticated users can view library books",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "library_book_sources",
        "policy_name": "Admins can manage book sources",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "library_book_sources",
        "policy_name": "Authenticated users can view book sources",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "rag_documents",
        "policy_name": "rag_documents_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "rag_documents",
        "policy_name": "rag_documents_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "rag_embeddings",
        "policy_name": "rag_embeddings_admin",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "rag_embeddings",
        "policy_name": "rag_embeddings_view",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "rag_chunks",
        "policy_name": "Admins can manage rag chunks",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "rag_chunks",
        "policy_name": "Authenticated users can view rag chunks",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "chunking_queue",
        "policy_name": "Admins can delete from chunking queue",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "chunking_queue",
        "policy_name": "Admins can view chunking queue",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "chunking_queue",
        "policy_name": "Service role can manage chunking queue",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "(auth.role() = 'service_role'::text)",
        "check_expression": null
      },
      {
        "table_name": "content_source_configs",
        "policy_name": "Admins can manage configs",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "content_source_configs",
        "policy_name": "Service role access",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "(auth.role() = 'service_role'::text)",
        "check_expression": null
      },
      {
        "table_name": "temp_book_downloads",
        "policy_name": "Admins can manage temp downloads",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "telegram_channel_posts",
        "policy_name": "Admins can manage posts",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "telegram_channel_posts",
        "policy_name": "Anyone can view posts",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "telegram_channel_posts",
        "policy_name": "Service role can insert posts",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "telegram_comments",
        "policy_name": "Admins can manage comments",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "telegram_comments",
        "policy_name": "Anyone can view comments",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "telegram_comments",
        "policy_name": "Service role can insert comments",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "telegram_ai_responses",
        "policy_name": "Admins can update moderation",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "telegram_ai_responses",
        "policy_name": "Admins can view ai responses",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "telegram_ai_responses",
        "policy_name": "Service role can manage ai responses",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "telegram_conversation_context",
        "policy_name": "Admins can manage conversation context",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "telegram_conversation_context",
        "policy_name": "Anyone can view conversation context",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() IS NOT NULL)",
        "check_expression": null
      },
      {
        "table_name": "telegram_conversation_context",
        "policy_name": "Service role can manage conversation context",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "telegram_blocked_users",
        "policy_name": "Admins can manage blocked users",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "telegram_rate_limit",
        "policy_name": "service_role_telegram_rate_limit",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": null,
        "check_expression": "true"
      },
      {
        "table_name": "ihsan_plans",
        "policy_name": "Users can view their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "ihsan_plans",
        "policy_name": "Users can create their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "ihsan_plans",
        "policy_name": "Users can update their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "ihsan_plans",
        "policy_name": "Users can delete their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "system_settings",
        "policy_name": "Admins can manage system_settings",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure()",
        "check_expression": null
      },
      {
        "table_name": "user_usage",
        "policy_name": "Users can view their own usage",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "ihsan_user_plans",
        "policy_name": "Users can view their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "ihsan_user_plans",
        "policy_name": "Users can create their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "INSERT",
        "definition": null,
        "check_expression": "(auth.uid() = user_id)"
      },
      {
        "table_name": "ihsan_user_plans",
        "policy_name": "Users can update their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "UPDATE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "ihsan_user_plans",
        "policy_name": "Users can delete their own ihsan plans",
        "policy_type": "PERMISSIVE",
        "command": "DELETE",
        "definition": "(auth.uid() = user_id)",
        "check_expression": null
      },
      {
        "table_name": "system_errors",
        "policy_name": "Admins can manage system errors",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure(auth.uid())",
        "check_expression": null
      },
      {
        "table_name": "ihsan_character",
        "policy_name": "Anyone can read active ihsan characters",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "ihsan_character",
        "policy_name": "Admins can manage ihsan characters",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "(EXISTS ( SELECT 1\n   FROM profiles\n  WHERE (profiles.user_id = auth.uid())))",
        "check_expression": null
      },
      {
        "table_name": "section_prompts",
        "policy_name": "Anyone can read section_prompts",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "section_prompts",
        "policy_name": "Authenticated users can modify section_prompts",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "(auth.role() = 'authenticated'::text)",
        "check_expression": "(auth.role() = 'authenticated'::text)"
      },
      {
        "table_name": "user_usage",
        "policy_name": "Service role can manage all usage",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "true",
        "check_expression": "true"
      },
      {
        "table_name": "subscription_limits",
        "policy_name": "Anyone can view limits",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "subscription_limits",
        "policy_name": "Admins can manage limits",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "is_admin_secure()",
        "check_expression": null
      },
      {
        "table_name": "subscription_system_messages",
        "policy_name": "Все пользователи могут читать соо",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "chunking_methods",
        "policy_name": "Chunking methods viewable by all",
        "policy_type": "PERMISSIVE",
        "command": "SELECT",
        "definition": "true",
        "check_expression": null
      },
      {
        "table_name": "tafsir_processor",
        "policy_name": "Service role can manage tafsir_processor",
        "policy_type": "PERMISSIVE",
        "command": "ALL",
        "definition": "true",
        "check_expression": "true"
      }
    ],
    "functions": [
      {
        "function_name": "is_admin_secure",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "_user_id uuid DEFAULT auth.uid()",
        "definition": "CREATE OR REPLACE FUNCTION public.is_admin_secure(_user_id uuid DEFAULT auth.uid())\n RETURNS boolean\n LANGUAGE sql\n STABLE SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\n  SELECT EXISTS (\n    SELECT 1\n    FROM public.user_roles\n    WHERE user_id = _user_id\n      AND role = 'admin'::app_role\n  )\n$function$\n"
      },
      {
        "function_name": "vector_in",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "cstring, oid, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_in(cstring, oid, integer)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_in$function$\n"
      },
      {
        "function_name": "vector_out",
        "schema_name": "public",
        "return_type": "cstring",
        "arguments": "vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_out(vector)\n RETURNS cstring\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_out$function$\n"
      },
      {
        "function_name": "vector_typmod_in",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "cstring[]",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_typmod_in(cstring[])\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_typmod_in$function$\n"
      },
      {
        "function_name": "vector_recv",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "internal, oid, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_recv(internal, oid, integer)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_recv$function$\n"
      },
      {
        "function_name": "vector_send",
        "schema_name": "public",
        "return_type": "bytea",
        "arguments": "vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_send(vector)\n RETURNS bytea\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_send$function$\n"
      },
      {
        "function_name": "l2_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$l2_distance$function$\n"
      },
      {
        "function_name": "inner_product",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.inner_product(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$inner_product$function$\n"
      },
      {
        "function_name": "cosine_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.cosine_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$cosine_distance$function$\n"
      },
      {
        "function_name": "l1_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.l1_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$l1_distance$function$\n"
      },
      {
        "function_name": "vector_dims",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_dims(vector)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_dims$function$\n"
      },
      {
        "function_name": "vector_norm",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_norm(vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_norm$function$\n"
      },
      {
        "function_name": "l2_normalize",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "vector",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_normalize(vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$l2_normalize$function$\n"
      },
      {
        "function_name": "binary_quantize",
        "schema_name": "public",
        "return_type": "bit",
        "arguments": "vector",
        "definition": "CREATE OR REPLACE FUNCTION public.binary_quantize(vector)\n RETURNS bit\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$binary_quantize$function$\n"
      },
      {
        "function_name": "subvector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "vector, integer, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.subvector(vector, integer, integer)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$subvector$function$\n"
      },
      {
        "function_name": "vector_add",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_add(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_add$function$\n"
      },
      {
        "function_name": "vector_sub",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_sub(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_sub$function$\n"
      },
      {
        "function_name": "vector_mul",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_mul(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_mul$function$\n"
      },
      {
        "function_name": "vector_concat",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_concat(vector, vector)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_concat$function$\n"
      },
      {
        "function_name": "vector_lt",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_lt(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_lt$function$\n"
      },
      {
        "function_name": "vector_le",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_le(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_le$function$\n"
      },
      {
        "function_name": "vector_eq",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_eq(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_eq$function$\n"
      },
      {
        "function_name": "vector_ne",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_ne(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_ne$function$\n"
      },
      {
        "function_name": "vector_ge",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_ge(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_ge$function$\n"
      },
      {
        "function_name": "vector_gt",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_gt(vector, vector)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_gt$function$\n"
      },
      {
        "function_name": "vector_cmp",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_cmp(vector, vector)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_cmp$function$\n"
      },
      {
        "function_name": "vector_l2_squared_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_l2_squared_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_l2_squared_distance$function$\n"
      },
      {
        "function_name": "vector_negative_inner_product",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_negative_inner_product(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_negative_inner_product$function$\n"
      },
      {
        "function_name": "vector_spherical_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "vector, vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_spherical_distance(vector, vector)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_spherical_distance$function$\n"
      },
      {
        "function_name": "vector_accum",
        "schema_name": "public",
        "return_type": "double precision[]",
        "arguments": "double precision[], vector",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_accum(double precision[], vector)\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_accum$function$\n"
      },
      {
        "function_name": "vector_avg",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "double precision[]",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_avg(double precision[])\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_avg$function$\n"
      },
      {
        "function_name": "vector_combine",
        "schema_name": "public",
        "return_type": "double precision[]",
        "arguments": "double precision[], double precision[]",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_combine(double precision[], double precision[])\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_combine$function$\n"
      },
      {
        "function_name": "vector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "vector, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.vector(vector, integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector$function$\n"
      },
      {
        "function_name": "array_to_vector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "integer[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(integer[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
      },
      {
        "function_name": "array_to_vector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "real[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(real[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
      },
      {
        "function_name": "array_to_vector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "double precision[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(double precision[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
      },
      {
        "function_name": "array_to_vector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "numeric[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_vector(numeric[], integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_vector$function$\n"
      },
      {
        "function_name": "vector_to_float4",
        "schema_name": "public",
        "return_type": "real[]",
        "arguments": "vector, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_to_float4(vector, integer, boolean)\n RETURNS real[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_to_float4$function$\n"
      },
      {
        "function_name": "ivfflathandler",
        "schema_name": "public",
        "return_type": "index_am_handler",
        "arguments": "internal",
        "definition": "CREATE OR REPLACE FUNCTION public.ivfflathandler(internal)\n RETURNS index_am_handler\n LANGUAGE c\nAS '$libdir/vector', $function$ivfflathandler$function$\n"
      },
      {
        "function_name": "hnswhandler",
        "schema_name": "public",
        "return_type": "index_am_handler",
        "arguments": "internal",
        "definition": "CREATE OR REPLACE FUNCTION public.hnswhandler(internal)\n RETURNS index_am_handler\n LANGUAGE c\nAS '$libdir/vector', $function$hnswhandler$function$\n"
      },
      {
        "function_name": "ivfflat_halfvec_support",
        "schema_name": "public",
        "return_type": "internal",
        "arguments": "internal",
        "definition": "CREATE OR REPLACE FUNCTION public.ivfflat_halfvec_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$ivfflat_halfvec_support$function$\n"
      },
      {
        "function_name": "ivfflat_bit_support",
        "schema_name": "public",
        "return_type": "internal",
        "arguments": "internal",
        "definition": "CREATE OR REPLACE FUNCTION public.ivfflat_bit_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$ivfflat_bit_support$function$\n"
      },
      {
        "function_name": "hnsw_halfvec_support",
        "schema_name": "public",
        "return_type": "internal",
        "arguments": "internal",
        "definition": "CREATE OR REPLACE FUNCTION public.hnsw_halfvec_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$hnsw_halfvec_support$function$\n"
      },
      {
        "function_name": "hnsw_bit_support",
        "schema_name": "public",
        "return_type": "internal",
        "arguments": "internal",
        "definition": "CREATE OR REPLACE FUNCTION public.hnsw_bit_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$hnsw_bit_support$function$\n"
      },
      {
        "function_name": "hnsw_sparsevec_support",
        "schema_name": "public",
        "return_type": "internal",
        "arguments": "internal",
        "definition": "CREATE OR REPLACE FUNCTION public.hnsw_sparsevec_support(internal)\n RETURNS internal\n LANGUAGE c\nAS '$libdir/vector', $function$hnsw_sparsevec_support$function$\n"
      },
      {
        "function_name": "halfvec_in",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "cstring, oid, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_in(cstring, oid, integer)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_in$function$\n"
      },
      {
        "function_name": "halfvec_out",
        "schema_name": "public",
        "return_type": "cstring",
        "arguments": "halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_out(halfvec)\n RETURNS cstring\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_out$function$\n"
      },
      {
        "function_name": "halfvec_typmod_in",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "cstring[]",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_typmod_in(cstring[])\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_typmod_in$function$\n"
      },
      {
        "function_name": "halfvec_recv",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "internal, oid, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_recv(internal, oid, integer)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_recv$function$\n"
      },
      {
        "function_name": "halfvec_send",
        "schema_name": "public",
        "return_type": "bytea",
        "arguments": "halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_send(halfvec)\n RETURNS bytea\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_send$function$\n"
      },
      {
        "function_name": "l2_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_distance$function$\n"
      },
      {
        "function_name": "inner_product",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.inner_product(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_inner_product$function$\n"
      },
      {
        "function_name": "cosine_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.cosine_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_cosine_distance$function$\n"
      },
      {
        "function_name": "l1_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.l1_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l1_distance$function$\n"
      },
      {
        "function_name": "vector_dims",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_dims(halfvec)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_vector_dims$function$\n"
      },
      {
        "function_name": "l2_norm",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_norm(halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_norm$function$\n"
      },
      {
        "function_name": "l2_normalize",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_normalize(halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_normalize$function$\n"
      },
      {
        "function_name": "binary_quantize",
        "schema_name": "public",
        "return_type": "bit",
        "arguments": "halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.binary_quantize(halfvec)\n RETURNS bit\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_binary_quantize$function$\n"
      },
      {
        "function_name": "subvector",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "halfvec, integer, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.subvector(halfvec, integer, integer)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_subvector$function$\n"
      },
      {
        "function_name": "halfvec_add",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_add(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_add$function$\n"
      },
      {
        "function_name": "halfvec_sub",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_sub(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_sub$function$\n"
      },
      {
        "function_name": "halfvec_mul",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_mul(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_mul$function$\n"
      },
      {
        "function_name": "halfvec_concat",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_concat(halfvec, halfvec)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_concat$function$\n"
      },
      {
        "function_name": "halfvec_lt",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_lt(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_lt$function$\n"
      },
      {
        "function_name": "halfvec_le",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_le(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_le$function$\n"
      },
      {
        "function_name": "halfvec_eq",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_eq(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_eq$function$\n"
      },
      {
        "function_name": "halfvec_ne",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_ne(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_ne$function$\n"
      },
      {
        "function_name": "halfvec_ge",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_ge(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_ge$function$\n"
      },
      {
        "function_name": "halfvec_gt",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_gt(halfvec, halfvec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_gt$function$\n"
      },
      {
        "function_name": "halfvec_cmp",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_cmp(halfvec, halfvec)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_cmp$function$\n"
      },
      {
        "function_name": "halfvec_l2_squared_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_l2_squared_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_l2_squared_distance$function$\n"
      },
      {
        "function_name": "halfvec_negative_inner_product",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_negative_inner_product(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_negative_inner_product$function$\n"
      },
      {
        "function_name": "halfvec_spherical_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "halfvec, halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_spherical_distance(halfvec, halfvec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_spherical_distance$function$\n"
      },
      {
        "function_name": "halfvec_accum",
        "schema_name": "public",
        "return_type": "double precision[]",
        "arguments": "double precision[], halfvec",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_accum(double precision[], halfvec)\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_accum$function$\n"
      },
      {
        "function_name": "halfvec_avg",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "double precision[]",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_avg(double precision[])\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_avg$function$\n"
      },
      {
        "function_name": "halfvec_combine",
        "schema_name": "public",
        "return_type": "double precision[]",
        "arguments": "double precision[], double precision[]",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_combine(double precision[], double precision[])\n RETURNS double precision[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_combine$function$\n"
      },
      {
        "function_name": "halfvec",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "halfvec, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec(halfvec, integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec$function$\n"
      },
      {
        "function_name": "halfvec_to_vector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "halfvec, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_to_vector(halfvec, integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_to_vector$function$\n"
      },
      {
        "function_name": "vector_to_halfvec",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "vector, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_to_halfvec(vector, integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_to_halfvec$function$\n"
      },
      {
        "function_name": "array_to_halfvec",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "integer[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(integer[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
      },
      {
        "function_name": "array_to_halfvec",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "real[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(real[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
      },
      {
        "function_name": "array_to_halfvec",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "double precision[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(double precision[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
      },
      {
        "function_name": "array_to_halfvec",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "numeric[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_halfvec(numeric[], integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_halfvec$function$\n"
      },
      {
        "function_name": "halfvec_to_float4",
        "schema_name": "public",
        "return_type": "real[]",
        "arguments": "halfvec, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_to_float4(halfvec, integer, boolean)\n RETURNS real[]\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_to_float4$function$\n"
      },
      {
        "function_name": "hamming_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "bit, bit",
        "definition": "CREATE OR REPLACE FUNCTION public.hamming_distance(bit, bit)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$hamming_distance$function$\n"
      },
      {
        "function_name": "jaccard_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "bit, bit",
        "definition": "CREATE OR REPLACE FUNCTION public.jaccard_distance(bit, bit)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$jaccard_distance$function$\n"
      },
      {
        "function_name": "sparsevec_in",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "cstring, oid, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_in(cstring, oid, integer)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_in$function$\n"
      },
      {
        "function_name": "sparsevec_out",
        "schema_name": "public",
        "return_type": "cstring",
        "arguments": "sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_out(sparsevec)\n RETURNS cstring\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_out$function$\n"
      },
      {
        "function_name": "sparsevec_typmod_in",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "cstring[]",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_typmod_in(cstring[])\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_typmod_in$function$\n"
      },
      {
        "function_name": "sparsevec_recv",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "internal, oid, integer",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_recv(internal, oid, integer)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_recv$function$\n"
      },
      {
        "function_name": "sparsevec_send",
        "schema_name": "public",
        "return_type": "bytea",
        "arguments": "sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_send(sparsevec)\n RETURNS bytea\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_send$function$\n"
      },
      {
        "function_name": "l2_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_distance$function$\n"
      },
      {
        "function_name": "inner_product",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.inner_product(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_inner_product$function$\n"
      },
      {
        "function_name": "cosine_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.cosine_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_cosine_distance$function$\n"
      },
      {
        "function_name": "l1_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.l1_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l1_distance$function$\n"
      },
      {
        "function_name": "l2_norm",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_norm(sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_norm$function$\n"
      },
      {
        "function_name": "l2_normalize",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.l2_normalize(sparsevec)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_normalize$function$\n"
      },
      {
        "function_name": "sparsevec_lt",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_lt(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_lt$function$\n"
      },
      {
        "function_name": "sparsevec_le",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_le(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_le$function$\n"
      },
      {
        "function_name": "sparsevec_eq",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_eq(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_eq$function$\n"
      },
      {
        "function_name": "sparsevec_ne",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_ne(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_ne$function$\n"
      },
      {
        "function_name": "sparsevec_ge",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_ge(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_ge$function$\n"
      },
      {
        "function_name": "sparsevec_gt",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_gt(sparsevec, sparsevec)\n RETURNS boolean\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_gt$function$\n"
      },
      {
        "function_name": "sparsevec_cmp",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_cmp(sparsevec, sparsevec)\n RETURNS integer\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_cmp$function$\n"
      },
      {
        "function_name": "sparsevec_l2_squared_distance",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_l2_squared_distance(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_l2_squared_distance$function$\n"
      },
      {
        "function_name": "sparsevec_negative_inner_product",
        "schema_name": "public",
        "return_type": "double precision",
        "arguments": "sparsevec, sparsevec",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_negative_inner_product(sparsevec, sparsevec)\n RETURNS double precision\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_negative_inner_product$function$\n"
      },
      {
        "function_name": "sparsevec",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "sparsevec, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec(sparsevec, integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec$function$\n"
      },
      {
        "function_name": "vector_to_sparsevec",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "vector, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.vector_to_sparsevec(vector, integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$vector_to_sparsevec$function$\n"
      },
      {
        "function_name": "sparsevec_to_vector",
        "schema_name": "public",
        "return_type": "vector",
        "arguments": "sparsevec, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_to_vector(sparsevec, integer, boolean)\n RETURNS vector\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_to_vector$function$\n"
      },
      {
        "function_name": "halfvec_to_sparsevec",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "halfvec, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.halfvec_to_sparsevec(halfvec, integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$halfvec_to_sparsevec$function$\n"
      },
      {
        "function_name": "sparsevec_to_halfvec",
        "schema_name": "public",
        "return_type": "halfvec",
        "arguments": "sparsevec, integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.sparsevec_to_halfvec(sparsevec, integer, boolean)\n RETURNS halfvec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$sparsevec_to_halfvec$function$\n"
      },
      {
        "function_name": "array_to_sparsevec",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "integer[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(integer[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
      },
      {
        "function_name": "array_to_sparsevec",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "real[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(real[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
      },
      {
        "function_name": "array_to_sparsevec",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "double precision[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(double precision[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
      },
      {
        "function_name": "array_to_sparsevec",
        "schema_name": "public",
        "return_type": "sparsevec",
        "arguments": "numeric[], integer, boolean",
        "definition": "CREATE OR REPLACE FUNCTION public.array_to_sparsevec(numeric[], integer, boolean)\n RETURNS sparsevec\n LANGUAGE c\n IMMUTABLE PARALLEL SAFE STRICT\nAS '$libdir/vector', $function$array_to_sparsevec$function$\n"
      },
      {
        "function_name": "check_expired_subscriptions",
        "schema_name": "public",
        "return_type": "void",
        "arguments": "",
        "definition": "CREATE OR REPLACE FUNCTION public.check_expired_subscriptions()\n RETURNS void\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nDECLARE\n  expired_count INTEGER;\nBEGIN\n  -- Обновляем статус истёкших подписок на 'expired' и понижаем до guest\n  UPDATE public.user_subscriptions\n  SET \n    status = 'expired',\n    updated_at = now()\n  WHERE \n    status = 'active'\n    AND expires_at IS NOT NULL\n    AND expires_at < now();\n  \n  GET DIAGNOSTICS expired_count = ROW_COUNT;\n  \n  -- Логируем результат\n  IF expired_count > 0 THEN\n    RAISE NOTICE 'Expired % subscriptions', expired_count;\n  END IF;\n  \n  -- Для истёкших подписок понижаем до guest\n  UPDATE public.user_subscriptions\n  SET \n    plan_type = 'guest',\n    status = 'active',\n    expires_at = NULL,\n    updated_at = now(),\n    last_checked_at = now()\n  WHERE status = 'expired';\nEND;\n$function$\n"
      },
      {
        "function_name": "reset_failed_tafsir_tasks",
        "schema_name": "public",
        "return_type": "integer",
        "arguments": "p_source_key text",
        "definition": "CREATE OR REPLACE FUNCTION public.reset_failed_tafsir_tasks(p_source_key text)\n RETURNS integer\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nDECLARE\n  v_count integer;\nBEGIN\n  UPDATE tafsir_processor\n  SET \n    status = 'pending',\n    attempts = 0,\n    worker_id = NULL,\n    locked_at = NULL,\n    last_error = NULL,\n    updated_at = NOW()\n  WHERE source_key = p_source_key\n    AND status IN ('failed', 'ai_retry');\n  \n  GET DIAGNOSTICS v_count = ROW_COUNT;\n  RETURN v_count;\nEND;\n$function$\n"
      },
      {
        "function_name": "increment_user_usage",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "p_user_id uuid, p_chat_requests integer DEFAULT 0, p_voice_requests integer DEFAULT 0, p_rag_requests integer DEFAULT 0, p_tokens integer DEFAULT 0",
        "definition": "CREATE OR REPLACE FUNCTION public.increment_user_usage(p_user_id uuid, p_chat_requests integer DEFAULT 0, p_voice_requests integer DEFAULT 0, p_rag_requests integer DEFAULT 0, p_tokens integer DEFAULT 0)\n RETURNS boolean\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nDECLARE\n  v_limit INTEGER;\n  v_current INTEGER;\n  v_plan_type subscription_plan;\nBEGIN\n  -- Получаем тип подписки\n  SELECT COALESCE(us.plan_type, 'guest'::subscription_plan)\n  INTO v_plan_type\n  FROM public.user_subscriptions us\n  WHERE us.user_id = p_user_id AND us.status = 'active';\n  \n  IF v_plan_type IS NULL THEN\n    v_plan_type := 'guest';\n  END IF;\n  \n  -- Проверяем лимит чат-запросов\n  IF p_chat_requests > 0 THEN\n    SELECT sl.daily_chat_requests INTO v_limit\n    FROM public.subscription_limits sl\n    WHERE sl.plan_type = v_plan_type;\n    \n    SELECT COALESCE(chat_requests, 0) INTO v_current\n    FROM public.user_usage\n    WHERE user_id = p_user_id AND usage_date = CURRENT_DATE;\n    \n    IF v_current >= v_limit THEN\n      RETURN FALSE; -- Лимит превышен\n    END IF;\n  END IF;\n  \n  -- Вставляем или обновляем использование\n  INSERT INTO public.user_usage (user_id, usage_date, chat_requests, voice_requests, rag_requests, total_tokens_used)\n  VALUES (p_user_id, CURRENT_DATE, p_chat_requests, p_voice_requests, p_rag_requests, p_tokens)\n  ON CONFLICT (user_id, usage_date)\n  DO UPDATE SET\n    chat_requests = user_usage.chat_requests + EXCLUDED.chat_requests,\n    voice_requests = user_usage.voice_requests + EXCLUDED.voice_requests,\n    rag_requests = user_usage.rag_requests + EXCLUDED.rag_requests,\n    total_tokens_used = user_usage.total_tokens_used + EXCLUDED.total_tokens_used,\n    updated_at = now();\n  \n  RETURN TRUE;\nEND;\n$function$\n"
      },
      {
        "function_name": "get_table_columns",
        "schema_name": "public",
        "return_type": "TABLE(table_name text, column_name text, data_type text, column_default text, is_nullable text, udt_name text)",
        "arguments": "",
        "definition": "CREATE OR REPLACE FUNCTION public.get_table_columns()\n RETURNS TABLE(table_name text, column_name text, data_type text, column_default text, is_nullable text, udt_name text)\n LANGUAGE sql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\n  SELECT \n    c.table_name::text,\n    c.column_name::text,\n    c.data_type::text,\n    c.column_default::text,\n    c.is_nullable::text,\n    c.udt_name::text\n  FROM information_schema.columns c\n  WHERE c.table_schema = 'public'\n  ORDER BY c.table_name, c.ordinal_position\n$function$\n"
      },
      {
        "function_name": "get_user_subscription_with_limits",
        "schema_name": "public",
        "return_type": "TABLE(plan_type subscription_plan, status text, expires_at timestamp with time zone, daily_chat_requests integer, context_messages_limit integer, max_tokens_per_request integer, voice_enabled boolean, rag_search_enabled boolean, web_search_enabled boolean, diary_enabled boolean, ihsan_enabled boolean, medrese_enabled boolean, library_enabled boolean, psychologist_enabled boolean, favorites_storage_mb integer, today_chat_requests integer, model_router text, model_chat text, model_medrese text, model_diary text, model_help text, model_ihsan text, memory_enabled boolean, commands_enabled boolean, voice_commands_enabled boolean)",
        "arguments": "p_user_id uuid",
        "definition": "CREATE OR REPLACE FUNCTION public.get_user_subscription_with_limits(p_user_id uuid)\n RETURNS TABLE(plan_type subscription_plan, status text, expires_at timestamp with time zone, daily_chat_requests integer, context_messages_limit integer, max_tokens_per_request integer, voice_enabled boolean, rag_search_enabled boolean, web_search_enabled boolean, diary_enabled boolean, ihsan_enabled boolean, medrese_enabled boolean, library_enabled boolean, psychologist_enabled boolean, favorites_storage_mb integer, today_chat_requests integer, model_router text, model_chat text, model_medrese text, model_diary text, model_help text, model_ihsan text, memory_enabled boolean, commands_enabled boolean, voice_commands_enabled boolean)\n LANGUAGE plpgsql\n STABLE SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nDECLARE\n  v_plan_type subscription_plan;\nBEGIN\n  -- Получаем тип подписки пользователя\n  SELECT COALESCE(us.plan_type, 'guest'::subscription_plan)\n  INTO v_plan_type\n  FROM public.user_subscriptions us\n  WHERE us.user_id = p_user_id AND us.status = 'active'\n  LIMIT 1;\n  \n  -- Если подписки нет, используем guest\n  IF v_plan_type IS NULL THEN\n    v_plan_type := 'guest';\n  END IF;\n  \n  RETURN QUERY\n  SELECT \n    v_plan_type,\n    COALESCE(us.status, 'active')::TEXT,\n    us.expires_at,\n    sl.daily_chat_requests,\n    sl.context_messages_limit,\n    sl.max_tokens_per_request,\n    sl.voice_enabled,\n    sl.rag_search_enabled,\n    sl.web_search_enabled,\n    sl.diary_enabled,\n    sl.ihsan_enabled,\n    sl.medrese_enabled,\n    sl.library_enabled,\n    sl.psychologist_enabled,\n    sl.favorites_storage_mb,\n    COALESCE(uu.chat_requests, 0),\n    sl.model_router,\n    sl.model_chat,\n    sl.model_medrese,\n    sl.model_diary,\n    sl.model_help,\n    sl.model_ihsan,\n    sl.memory_enabled,\n    sl.commands_enabled,\n    sl.voice_commands_enabled\n  FROM public.subscription_limits sl\n  LEFT JOIN public.user_subscriptions us ON us.user_id = p_user_id AND us.status = 'active'\n  LEFT JOIN public.user_usage uu ON uu.user_id = p_user_id AND uu.usage_date = CURRENT_DATE\n  WHERE sl.plan_type = v_plan_type;\nEND;\n$function$\n"
      },
      {
        "function_name": "get_enum_types",
        "schema_name": "public",
        "return_type": "TABLE(type_name text, enum_labels text[])",
        "arguments": "",
        "definition": "CREATE OR REPLACE FUNCTION public.get_enum_types()\n RETURNS TABLE(type_name text, enum_labels text[])\n LANGUAGE sql\n STABLE SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\n  SELECT \n    t.typname::text AS type_name,\n    array_agg(e.enumlabel ORDER BY e.enumsortorder)::text[] AS enum_labels\n  FROM pg_type t\n  JOIN pg_enum e ON e.enumtypid = t.oid\n  JOIN pg_namespace n ON n.oid = t.typnamespace\n  WHERE n.nspname = 'public'\n  GROUP BY t.typname\n  ORDER BY t.typname\n$function$\n"
      },
      {
        "function_name": "get_table_primary_keys",
        "schema_name": "public",
        "return_type": "TABLE(table_name text, pk_columns text[])",
        "arguments": "",
        "definition": "CREATE OR REPLACE FUNCTION public.get_table_primary_keys()\n RETURNS TABLE(table_name text, pk_columns text[])\n LANGUAGE sql\n STABLE SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\n  SELECT\n    tc.table_name::text,\n    array_agg(kcu.column_name::text ORDER BY kcu.ordinal_position)::text[] AS pk_columns\n  FROM information_schema.table_constraints tc\n  JOIN information_schema.key_column_usage kcu\n    ON tc.constraint_name = kcu.constraint_name\n   AND tc.table_schema = kcu.table_schema\n   AND tc.table_name = kcu.table_name\n  WHERE tc.table_schema = 'public'\n    AND tc.constraint_type = 'PRIMARY KEY'\n  GROUP BY tc.table_name\n  ORDER BY tc.table_name\n$function$\n"
      },
      {
        "function_name": "create_default_subscription",
        "schema_name": "public",
        "return_type": "trigger",
        "arguments": "",
        "definition": "CREATE OR REPLACE FUNCTION public.create_default_subscription()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  INSERT INTO public.user_subscriptions (user_id, plan_type, status, started_at)\n  VALUES (NEW.user_id, 'guest', 'active', now())\n  ON CONFLICT (user_id) DO NOTHING;\n  RETURN NEW;\nEND;\n$function$\n"
      },
      {
        "function_name": "claim_tafsir_task",
        "schema_name": "public",
        "return_type": "TABLE(id uuid, source_key text, surah integer, ayah_from integer, ayah_to integer, cleaned_text text, char_length integer, class text, status text, attempts integer, parent_tafsir_id uuid)",
        "arguments": "p_source_key text, p_worker_id text",
        "definition": "CREATE OR REPLACE FUNCTION public.claim_tafsir_task(p_source_key text, p_worker_id text)\n RETURNS TABLE(id uuid, source_key text, surah integer, ayah_from integer, ayah_to integer, cleaned_text text, char_length integer, class text, status text, attempts integer, parent_tafsir_id uuid)\n LANGUAGE plpgsql\nAS $function$\nDECLARE\n  v_id uuid;\n  v_lock_timeout interval := interval '5 minutes';\nBEGIN\n  -- Атомарно находим и блокируем одну запись (ai_chunk, long_chunk или mechanical_split)\n  -- Приоритет: long_chunk и mechanical_split обрабатываем первыми (они уже предварительно разделены)\n  SELECT tp.id INTO v_id\n  FROM tafsir_processor tp\n  WHERE tp.source_key = p_source_key\n    AND tp.class IN ('ai_chunk', 'long_chunk', 'mechanical_split')\n    AND tp.status IN ('pending', 'ai_retry')\n    AND (tp.locked_at IS NULL OR tp.locked_at < NOW() - v_lock_timeout)\n  ORDER BY \n    CASE \n      WHEN tp.class = 'long_chunk' THEN 0 \n      WHEN tp.class = 'mechanical_split' THEN 1\n      ELSE 2 \n    END,\n    tp.surah, tp.ayah_from\n  LIMIT 1\n  FOR UPDATE SKIP LOCKED;\n  \n  IF v_id IS NOT NULL THEN\n    UPDATE tafsir_processor tp\n    SET \n      status = 'ai_processing',\n      worker_id = p_worker_id,\n      locked_at = NOW(),\n      updated_at = NOW()\n    WHERE tp.id = v_id;\n    \n    RETURN QUERY\n    SELECT \n      tp.id,\n      tp.source_key,\n      tp.surah,\n      tp.ayah_from,\n      tp.ayah_to,\n      tp.cleaned_text,\n      tp.char_length,\n      tp.class,\n      tp.status,\n      tp.attempts,\n      tp.parent_tafsir_id\n    FROM tafsir_processor tp\n    WHERE tp.id = v_id;\n  END IF;\n  \n  RETURN;\nEND;\n$function$\n"
      },
      {
        "function_name": "has_role",
        "schema_name": "public",
        "return_type": "boolean",
        "arguments": "_user_id uuid, _role app_role",
        "definition": "CREATE OR REPLACE FUNCTION public.has_role(_user_id uuid, _role app_role)\n RETURNS boolean\n LANGUAGE sql\n STABLE SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\n  SELECT EXISTS (\n    SELECT 1\n    FROM public.user_roles\n    WHERE user_id = _user_id\n      AND role = _role\n  )\n$function$\n"
      },
      {
        "function_name": "update_updated_at_column",
        "schema_name": "public",
        "return_type": "trigger",
        "arguments": "",
        "definition": "CREATE OR REPLACE FUNCTION public.update_updated_at_column()\n RETURNS trigger\n LANGUAGE plpgsql\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  NEW.updated_at = now();\n  RETURN NEW;\nEND;\n$function$\n"
      },
      {
        "function_name": "handle_new_user",
        "schema_name": "public",
        "return_type": "trigger",
        "arguments": "",
        "definition": "CREATE OR REPLACE FUNCTION public.handle_new_user()\n RETURNS trigger\n LANGUAGE plpgsql\n SECURITY DEFINER\n SET search_path TO 'public'\nAS $function$\nBEGIN\n  -- Создаём профиль\n  INSERT INTO public.profiles (user_id, full_name, phone)\n  VALUES (\n    NEW.id,\n    NEW.raw_user_meta_data ->> 'full_name',\n    NEW.phone\n  );\n  \n  -- Создаём роль пользователя\n  INSERT INTO public.user_roles (user_id, role)\n  VALUES (NEW.id, 'user');\n  \n  -- Создаём подписку guest по умолчанию\n  INSERT INTO public.user_subscriptions (user_id, plan_type, status, expires_at)\n  VALUES (NEW.id, 'guest', 'active', NULL);\n  \n  RETURN NEW;\nEND;\n$function$\n"
      }
    ]
  },
  "storage": {
    "buckets": [],
    "files": [],
    "total_files": 0,
    "total_size": 0
  },
  "infrastructure": {
    "edge_functions": [
      "ai-router",
      "backup-system",
      "check-chunks-quality",
      "check-subscriptions",
      "generate-ihsan-plan",
      "generate-summary",
      "help-support",
      "imam-chat",
      "prayer-times",
      "quran-semantic-chunker",
      "quran-tafsir-chunker",
      "rag-search",
      "send-otp",
      "telegram-auth",
      "telegram-webhook",
      "text-to-voice",
      "verify-admin-password",
      "verify-otp",
      "voice-to-text",
      "web-search"
    ],
    "migrations": [],
    "required_secrets": [
      "OPENAI_API_KEY",
      "OPENROUTER_API_KEY",
      "TELEGRAM_BOT_TOKEN",
      "TELEGRAM_BOT_USERNAME",
      "GITHUB_TOKEN",
      "GITHUB_BACKUP_REPO",
      "SMS_API_KEY",
      "TAVILY_API_KEY",
      "ELEVENLABS_API_KEY"
    ]
  },
  "recovery_instructions": "\n# Инструкция по восстановлению\n\n1. Склонируйте репозиторий: git clone <repo-url>\n2. Установите зависимости: npm install\n3. Настройте .env файл (см. .env.example)\n4. Запустите: npm run dev\n\nДля восстановления данных:\n1. Откройте админку → Система\n2. Нажмите \"Восстановить из файла\"\n3. Выберите этот JSON файл\n4. Выберите таблицы и подтвердите\n\nДля восстановления RLS политик:\n- Выполните SQL из поля rls_policies_sql в Supabase SQL Editor\n\nПодробнее: см. RECOVERY.md\n"
}